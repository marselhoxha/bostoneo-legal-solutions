--
-- Bostoneo Legal Solutions - Initial PostgreSQL Schema
-- Generated: 2026-01-27
--
-- This is the complete database schema for new deployments.
-- For data seeding, use: /backend/src/main/resources/db/backup/data_backup_20260127_222811.sql
--
-- PostgreSQL database dump
--


-- Dumped from database version 18.1
-- Dumped by pg_dump version 18.1 (Homebrew)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: bostoneosolutions; Type: SCHEMA; Schema: -; Owner: -
--

CREATE SCHEMA bostoneosolutions;


--
-- Name: public; Type: SCHEMA; Schema: -; Owner: -
--

-- *not* creating schema, since initdb creates it


--
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON SCHEMA public IS '';


--
-- Name: update_invoice_payment_status(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.update_invoice_payment_status() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_payments DECIMAL(10, 2);
    invoice_total DECIMAL(10, 2);
BEGIN
    -- Calculate total payments for this invoice
    SELECT COALESCE(SUM(amount), 0) INTO total_payments
    FROM invoice_payments
    WHERE invoice_id = NEW.invoice_id;

    -- Get invoice total
    SELECT total_amount INTO invoice_total
    FROM invoices
    WHERE id = NEW.invoice_id;

    -- Update invoice payment fields
    UPDATE invoices
    SET
        total_paid = total_payments,
        balance_due = total_amount - total_payments,
        last_payment_date = NEW.payment_date,
        payment_status = CASE
            WHEN total_payments = 0 THEN 'UNPAID'
            WHEN total_payments < invoice_total THEN 'PARTIAL'
            WHEN total_payments >= invoice_total THEN 'PAID'
        END
    WHERE id = NEW.invoice_id;

    RETURN NEW;
END;
$$;


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: account_verifications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.account_verifications (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    url character varying(255) NOT NULL
);


--
-- Name: account_verifications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.account_verifications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: account_verifications_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.account_verifications_id_seq OWNED BY public.account_verifications.id;


--
-- Name: action_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.action_items (
    id bigint NOT NULL,
    analysis_id bigint NOT NULL,
    created_date timestamp(6) without time zone,
    deadline date,
    description text NOT NULL,
    organization_id bigint,
    priority character varying(20),
    related_section character varying(255),
    status character varying(20),
    updated_date timestamp(6) without time zone
);


--
-- Name: action_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.action_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.action_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: active_timer_view; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.active_timer_view (
    id bigint,
    user_id bigint NOT NULL,
    legal_case_id bigint NOT NULL,
    start_time timestamp without time zone,
    description text,
    is_active boolean,
    paused_duration integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    first_name character varying(255),
    last_name character varying(255),
    case_title character varying(255) NOT NULL,
    customer_name character varying(255) NOT NULL,
    current_duration_seconds bigint
);


--
-- Name: active_timers; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.active_timers (
    id bigint NOT NULL,
    apply_multipliers boolean NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    hourly_rate numeric(10,2),
    is_active boolean NOT NULL,
    is_emergency boolean NOT NULL,
    legal_case_id bigint NOT NULL,
    organization_id bigint,
    paused_duration integer NOT NULL,
    start_time timestamp(6) without time zone NOT NULL,
    tags character varying(500),
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL,
    work_type character varying(100)
);


--
-- Name: active_timers_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.active_timers ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.active_timers_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: activity_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.activity_summary (
    id bigint NOT NULL,
    date date NOT NULL,
    user_id bigint,
    entity_type character varying(50),
    action character varying(50),
    activity_count integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: activity_summary_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.activity_summary_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: activity_summary_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.activity_summary_id_seq OWNED BY public.activity_summary.id;


--
-- Name: ai_analysis_messages; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_analysis_messages (
    id bigint NOT NULL,
    analysis_id bigint NOT NULL,
    content text NOT NULL,
    created_at timestamp(6) without time zone,
    metadata text,
    organization_id bigint,
    role character varying(255) NOT NULL,
    user_id bigint
);


--
-- Name: ai_analysis_messages_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_analysis_messages ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_analysis_messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_audit_logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_audit_logs (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    user_email character varying(255),
    user_role character varying(100),
    action character varying(100),
    resource_type character varying(50),
    resource_id bigint,
    ip_address character varying(45),
    user_agent text,
    request_payload jsonb,
    response_summary text,
    was_successful boolean,
    error_details text,
    contains_pii boolean,
    data_classification character varying(20),
    created_at timestamp without time zone
);


--
-- Name: ai_audit_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_audit_logs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_audit_logs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_audit_logs_id_seq OWNED BY public.ai_audit_logs.id;


--
-- Name: ai_closing_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_closing_documents (
    id bigint NOT NULL,
    completion_date date,
    completion_status character varying(255),
    created_at timestamp(6) without time zone,
    document_name character varying(200),
    document_type character varying(255) NOT NULL,
    due_date date,
    file_id bigint,
    is_required boolean,
    notes text,
    organization_id bigint,
    responsible_party character varying(255) NOT NULL,
    transaction_id bigint NOT NULL,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_closing_documents_completion_status_check CHECK (((completion_status)::text = ANY ((ARRAY['PENDING'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'NOT_APPLICABLE'::character varying])::text[]))),
    CONSTRAINT ai_closing_documents_document_type_check CHECK (((document_type)::text = ANY ((ARRAY['CONTRACT'::character varying, 'PLEADING'::character varying, 'EVIDENCE'::character varying, 'CORRESPONDENCE'::character varying, 'MOTION'::character varying, 'ORDER'::character varying, 'OTHER'::character varying])::text[]))),
    CONSTRAINT ai_closing_documents_responsible_party_check CHECK (((responsible_party)::text = ANY ((ARRAY['BUYER'::character varying, 'SELLER'::character varying, 'LENDER'::character varying, 'ATTORNEY'::character varying, 'TITLE_COMPANY'::character varying, 'OTHER'::character varying])::text[])))
);


--
-- Name: ai_closing_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_closing_documents ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_closing_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_conversation_messages; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_conversation_messages (
    id bigint NOT NULL,
    content text NOT NULL,
    cost_usd numeric(10,4),
    created_at timestamp(6) without time zone NOT NULL,
    metadata text,
    model_used character varying(100),
    organization_id bigint,
    rag_context_used boolean,
    role character varying(20) NOT NULL,
    temperature numeric(3,2),
    tokens_used integer,
    user_feedback text,
    user_rating integer,
    was_helpful boolean,
    session_id bigint NOT NULL
);


--
-- Name: ai_conversation_messages_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_conversation_messages ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_conversation_messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_conversation_sessions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_conversation_sessions (
    id bigint NOT NULL,
    archived_at timestamp(6) without time zone,
    case_id bigint,
    context_summary text,
    created_at timestamp(6) without time zone NOT NULL,
    document_id bigint,
    document_type character varying(100),
    is_active boolean,
    is_archived boolean,
    is_pinned boolean,
    jurisdiction character varying(100),
    key_entities text,
    last_interaction_at timestamp(6) without time zone,
    message_count integer,
    organization_id bigint,
    practice_area character varying(100),
    primary_topic character varying(255),
    related_draft_id character varying(255),
    research_mode character varying(20),
    session_name character varying(255),
    session_type character varying(50),
    task_type character varying(50),
    total_cost_usd numeric(10,4),
    total_tokens_used integer,
    user_id bigint NOT NULL,
    workflow_execution_id bigint
);


--
-- Name: ai_conversation_sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_conversation_sessions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_conversation_sessions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_criminal_cases; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_criminal_cases (
    id bigint NOT NULL,
    bail_amount numeric(10,2),
    bail_conditions text,
    case_id bigint,
    case_strengths text,
    case_weaknesses text,
    charge_codes text NOT NULL,
    court_name character varying(200),
    created_at timestamp(6) without time zone,
    criminal_history text,
    defense_strategy text,
    discovery_deadline date,
    docket_number character varying(50),
    max_penalty character varying(200),
    motion_deadlines text,
    offense_class character varying(10),
    offense_level character varying(255) NOT NULL,
    organization_id bigint,
    plea_deadline date,
    plea_offer text,
    potential_defenses text,
    primary_offense character varying(200),
    prior_record_points integer,
    prosecutor_name character varying(200),
    sentencing_guidelines text,
    trial_date date,
    updated_at timestamp(6) without time zone,
    victim_information text,
    CONSTRAINT ai_criminal_cases_offense_level_check CHECK (((offense_level)::text = ANY ((ARRAY['MISDEMEANOR'::character varying, 'FELONY'::character varying, 'VIOLATION'::character varying, 'INFRACTION'::character varying])::text[])))
);


--
-- Name: ai_criminal_cases_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_criminal_cases ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_criminal_cases_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_criminal_motions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_criminal_motions (
    id bigint NOT NULL,
    appeal_status character varying(50),
    case_id bigint NOT NULL,
    case_law_citations text,
    court_ruling text,
    created_at timestamp(6) without time zone,
    filing_date date,
    hearing_date date,
    is_granted boolean,
    is_urgent boolean,
    judge_name character varying(200),
    legal_arguments text,
    motion_outcome character varying(100),
    motion_text text NOT NULL,
    motion_title character varying(300) NOT NULL,
    motion_type character varying(255) NOT NULL,
    notes text,
    opposition_arguments text,
    organization_id bigint,
    prosecutor_response text,
    response_deadline date,
    ruling_date date,
    status character varying(50) NOT NULL,
    statutory_citations text,
    supporting_evidence text,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_criminal_motions_motion_type_check CHECK (((motion_type)::text = ANY ((ARRAY['MOTION_TO_DISMISS'::character varying, 'MOTION_TO_SUPPRESS'::character varying, 'MOTION_FOR_DISCOVERY'::character varying, 'MOTION_TO_COMPEL'::character varying, 'MOTION_FOR_CONTINUANCE'::character varying, 'MOTION_FOR_SEVERANCE'::character varying, 'MOTION_FOR_CHANGE_OF_VENUE'::character varying, 'MOTION_FOR_BAIL_REDUCTION'::character varying, 'MOTION_FOR_SPEEDY_TRIAL'::character varying, 'MOTION_TO_EXCLUDE_EVIDENCE'::character varying, 'MOTION_IN_LIMINE'::character varying, 'MOTION_FOR_DIRECTED_VERDICT'::character varying, 'MOTION_FOR_JUDGMENT_OF_ACQUITTAL'::character varying, 'MOTION_FOR_NEW_TRIAL'::character varying, 'MOTION_FOR_SENTENCE_REDUCTION'::character varying, 'MOTION_TO_WITHDRAW_PLEA'::character varying, 'MOTION_TO_VACATE_JUDGMENT'::character varying, 'MOTION_FOR_POST_CONVICTION_RELIEF'::character varying, 'MOTION_FOR_DNA_TESTING'::character varying, 'MOTION_FOR_COMPETENCY_EVALUATION'::character varying, 'MOTION_FOR_MENTAL_HEALTH_EVALUATION'::character varying, 'MOTION_FOR_INTERPRETER'::character varying, 'MOTION_FOR_APPOINTED_COUNSEL'::character varying, 'MOTION_TO_DISQUALIFY_JUDGE'::character varying, 'MOTION_TO_DISQUALIFY_PROSECUTOR'::character varying, 'MOTION_FOR_PROTECTIVE_ORDER'::character varying, 'MOTION_FOR_SUBPOENA'::character varying, 'MOTION_TO_QUASH_SUBPOENA'::character varying, 'MOTION_FOR_EXTRADITION'::character varying, 'MOTION_TO_OPPOSE_EXTRADITION'::character varying, 'BRADY_MOTION'::character varying, 'DAUBERT_MOTION'::character varying, 'FRYE_MOTION'::character varying, 'MOTION_FOR_SANCTIONS'::character varying, 'MOTION_FOR_CONTEMPT'::character varying, 'EMERGENCY_MOTION'::character varying, 'EX_PARTE_MOTION'::character varying, 'OMNIBUS_MOTION'::character varying, 'PRELIMINARY_MOTION'::character varying])::text[])))
);


--
-- Name: ai_criminal_motions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_criminal_motions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_criminal_motions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_document_analysis; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_document_analysis (
    id bigint NOT NULL,
    analysis_context character varying(255),
    analysis_id character varying(255) NOT NULL,
    analysis_result text,
    analysis_type character varying(255) NOT NULL,
    case_id bigint,
    compliance_issues text,
    cost_estimate double precision,
    created_at timestamp(6) without time zone,
    detected_type character varying(255),
    document_content text,
    error_message character varying(255),
    extracted_metadata text,
    file_name character varying(255),
    file_size bigint,
    file_type character varying(255),
    is_archived boolean NOT NULL,
    key_findings text,
    metadata text,
    organization_id bigint,
    processing_time_ms bigint,
    recommendations text,
    requires_ocr boolean,
    risk_level character varying(255),
    risk_score integer,
    status character varying(255),
    summary text,
    tokens_used integer,
    updated_at timestamp(6) without time zone,
    user_id bigint
);


--
-- Name: ai_document_analysis_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_document_analysis ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_document_analysis_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_document_generation_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_document_generation_log (
    id bigint NOT NULL,
    ai_model_used character varying(50),
    case_id bigint,
    cost_estimate numeric(8,4),
    created_at timestamp(6) without time zone,
    error_message text,
    generated_file_id bigint,
    generation_type character varying(255) NOT NULL,
    input_data text,
    organization_id bigint,
    processing_time_ms integer,
    quality_score numeric(3,2),
    success boolean,
    template_id bigint NOT NULL,
    tokens_used integer,
    user_feedback text,
    user_id bigint NOT NULL,
    user_rating integer,
    variables_used text,
    CONSTRAINT ai_document_generation_log_generation_type_check CHECK (((generation_type)::text = ANY ((ARRAY['NEW_DOCUMENT'::character varying, 'AUTO_FILL'::character varying, 'TEMPLATE_MERGE'::character varying, 'BATCH_GENERATE'::character varying])::text[])))
);


--
-- Name: ai_document_generation_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_document_generation_log ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_document_generation_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_document_generations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_document_generations (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    template_id bigint,
    document_name character varying(255),
    document_type character varying(100),
    practice_area character varying(100),
    jurisdiction character varying(100),
    case_id bigint,
    generation_prompt text,
    generated_content text,
    precedent_documents jsonb,
    rag_documents_used jsonb,
    variables_used jsonb,
    model_used character varying(100),
    tokens_used integer,
    cost_usd numeric(10,4),
    generation_time_ms bigint,
    quality_rating integer,
    user_feedback text,
    was_edited boolean,
    edit_percentage integer,
    was_finalized boolean,
    ai_enhanced boolean,
    status character varying(50),
    version integer,
    parent_generation_id bigint,
    created_at timestamp without time zone,
    finalized_at timestamp without time zone
);


--
-- Name: ai_document_generations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_document_generations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_document_generations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_document_generations_id_seq OWNED BY public.ai_document_generations.id;


--
-- Name: ai_drafting_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_drafting_templates (
    id bigint NOT NULL,
    user_id bigint,
    organization_id bigint,
    created_by_user_id bigint,
    template_name character varying(255) NOT NULL,
    template_type character varying(100),
    practice_area character varying(100),
    jurisdiction character varying(100),
    template_content text NOT NULL,
    variables jsonb,
    ai_drafting_instructions text,
    tone character varying(50),
    usage_count integer,
    is_shared boolean,
    is_system_template boolean,
    is_active boolean,
    average_rating numeric(3,2),
    rating_count integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    last_used_at timestamp without time zone
);


--
-- Name: ai_drafting_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_drafting_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_drafting_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_drafting_templates_id_seq OWNED BY public.ai_drafting_templates.id;


--
-- Name: ai_edit_suggestions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_edit_suggestions (
    id bigint NOT NULL,
    accepted_at timestamp(6) without time zone,
    accepted_by bigint,
    confidence_score numeric(3,2),
    created_at timestamp(6) without time zone,
    is_accepted boolean,
    is_rejected boolean,
    organization_id bigint,
    original_text text,
    position_end integer,
    position_start integer,
    priority character varying(255),
    session_id bigint NOT NULL,
    suggested_by_ai boolean,
    suggested_by_user bigint,
    suggested_text text,
    suggestion_explanation text,
    suggestion_type character varying(255) NOT NULL,
    CONSTRAINT ai_edit_suggestions_priority_check CHECK (((priority)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying, 'CRITICAL'::character varying])::text[]))),
    CONSTRAINT ai_edit_suggestions_suggestion_type_check CHECK (((suggestion_type)::text = ANY ((ARRAY['GRAMMAR'::character varying, 'STYLE'::character varying, 'LEGAL_ACCURACY'::character varying, 'CITATION'::character varying, 'FORMATTING'::character varying, 'STRUCTURE'::character varying, 'CLARITY'::character varying, 'COMPLIANCE'::character varying, 'TEMPLATE_MATCH'::character varying])::text[])))
);


--
-- Name: ai_edit_suggestions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_edit_suggestions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_edit_suggestions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_editing_sessions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_editing_sessions (
    id bigint NOT NULL,
    active_status character varying(255),
    ai_suggestions_enabled boolean,
    auto_save_interval integer,
    change_log text,
    created_at timestamp(6) without time zone,
    current_content text,
    end_time timestamp(6) without time zone,
    file_id bigint NOT NULL,
    lock_status character varying(255),
    locked_by bigint,
    organization_id bigint,
    owner_id bigint NOT NULL,
    participants text,
    session_name character varying(200),
    start_time timestamp(6) without time zone,
    template_id bigint,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_editing_sessions_active_status_check CHECK (((active_status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'PAUSED'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying])::text[]))),
    CONSTRAINT ai_editing_sessions_lock_status_check CHECK (((lock_status)::text = ANY ((ARRAY['UNLOCKED'::character varying, 'LOCKED'::character varying, 'READ_ONLY'::character varying])::text[])))
);


--
-- Name: ai_editing_sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_editing_sessions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_editing_sessions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_family_law_calculations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_family_law_calculations (
    id bigint NOT NULL,
    calculated_amount numeric(10,2),
    calculated_by bigint,
    calculation_result text NOT NULL,
    calculation_type character varying(255) NOT NULL,
    case_id bigint,
    created_at timestamp(6) without time zone,
    custody_percentage numeric(5,2),
    deviation_amount numeric(10,2),
    deviation_reason text,
    effective_date date,
    gross_income_payor numeric(12,2),
    gross_income_recipient numeric(12,2),
    input_parameters text NOT NULL,
    ma_guidelines_version character varying(20),
    notes text,
    number_of_children integer,
    organization_id bigint,
    review_date date,
    updated_at timestamp(6) without time zone,
    verified_by bigint,
    CONSTRAINT ai_family_law_calculations_calculation_type_check CHECK (((calculation_type)::text = ANY ((ARRAY['CHILD_SUPPORT'::character varying, 'ALIMONY'::character varying, 'PROPERTY_DIVISION'::character varying, 'ATTORNEY_FEES'::character varying])::text[])))
);


--
-- Name: ai_family_law_calculations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_family_law_calculations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_family_law_calculations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_family_law_cases; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_family_law_cases (
    id bigint NOT NULL,
    alimony_amount double precision,
    case_notes text,
    case_title character varying(300) NOT NULL,
    case_type character varying(255) NOT NULL,
    children_ages character varying(100),
    children_count integer,
    client_id bigint NOT NULL,
    court_name character varying(200),
    created_at timestamp(6) without time zone,
    custody_arrangement character varying(100),
    grounds_for_divorce character varying(100),
    has_minor_children boolean,
    is_contested boolean,
    judge_name character varying(200),
    marriage_date date,
    mediator_name character varying(200),
    next_hearing_date date,
    opposing_counsel character varying(200),
    organization_id bigint,
    priority_level character varying(20),
    property_division_status character varying(50),
    requires_guardian_ad_litem boolean,
    separation_date date,
    spouse_name character varying(200),
    status character varying(255) NOT NULL,
    support_amount double precision,
    total_marital_assets double precision,
    total_marital_debts double precision,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_family_law_cases_case_type_check CHECK (((case_type)::text = ANY ((ARRAY['DIVORCE'::character varying, 'LEGAL_SEPARATION'::character varying, 'ANNULMENT'::character varying, 'CHILD_CUSTODY'::character varying, 'CHILD_SUPPORT'::character varying, 'ALIMONY_SPOUSAL_SUPPORT'::character varying, 'PROPERTY_DIVISION'::character varying, 'PRENUPTIAL_AGREEMENT'::character varying, 'POSTNUPTIAL_AGREEMENT'::character varying, 'PATERNITY'::character varying, 'ADOPTION'::character varying, 'GUARDIANSHIP'::character varying, 'DOMESTIC_VIOLENCE'::character varying, 'RESTRAINING_ORDER'::character varying, 'MODIFICATION_OF_SUPPORT'::character varying, 'MODIFICATION_OF_CUSTODY'::character varying, 'ENFORCEMENT_OF_ORDERS'::character varying, 'CONTEMPT_OF_COURT'::character varying, 'PARENTING_PLAN'::character varying, 'VISITATION_RIGHTS'::character varying, 'GRANDPARENTS_RIGHTS'::character varying, 'STEPPARENT_ADOPTION'::character varying, 'TERMINATION_OF_PARENTAL_RIGHTS'::character varying, 'JUVENILE_DEPENDENCY'::character varying, 'EMANCIPATION'::character varying, 'NAME_CHANGE'::character varying, 'COLLABORATIVE_DIVORCE'::character varying, 'MEDIATION'::character varying, 'ARBITRATION'::character varying])::text[]))),
    CONSTRAINT ai_family_law_cases_status_check CHECK (((status)::text = ANY ((ARRAY['INITIAL_CONSULTATION'::character varying, 'CASE_OPENED'::character varying, 'DISCOVERY_PHASE'::character varying, 'MEDIATION_SCHEDULED'::character varying, 'MEDIATION_IN_PROGRESS'::character varying, 'MEDIATION_FAILED'::character varying, 'MEDIATION_SUCCESSFUL'::character varying, 'NEGOTIATION_PHASE'::character varying, 'SETTLEMENT_PENDING'::character varying, 'SETTLEMENT_REACHED'::character varying, 'PRETRIAL_CONFERENCE'::character varying, 'TRIAL_PREPARATION'::character varying, 'TRIAL_SCHEDULED'::character varying, 'TRIAL_IN_PROGRESS'::character varying, 'AWAITING_JUDGMENT'::character varying, 'JUDGMENT_ENTERED'::character varying, 'APPEAL_FILED'::character varying, 'APPEAL_IN_PROGRESS'::character varying, 'APPEAL_DECIDED'::character varying, 'MODIFICATION_REQUESTED'::character varying, 'ENFORCEMENT_ACTION'::character varying, 'CONTEMPT_PROCEEDINGS'::character varying, 'CASE_CLOSED'::character varying, 'CASE_DISMISSED'::character varying, 'CASE_SETTLED'::character varying, 'CASE_WITHDRAWN'::character varying, 'ON_HOLD'::character varying, 'PENDING_PAYMENT'::character varying, 'DOCUMENT_REVIEW'::character varying, 'AWAITING_CLIENT_RESPONSE'::character varying])::text[])))
);


--
-- Name: ai_family_law_cases_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_family_law_cases ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_family_law_cases_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_immigration_cases; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_immigration_cases (
    id bigint NOT NULL,
    attorney_notes text,
    beneficiary_name character varying(200) NOT NULL,
    case_id bigint,
    case_notes text,
    created_at timestamp(6) without time zone,
    documents_checklist text,
    filing_fee numeric(10,2),
    form_type character varying(20) NOT NULL,
    next_action_date date,
    next_action_description text,
    notice_date date,
    organization_id bigint,
    petitioner_name character varying(200) NOT NULL,
    priority_date date,
    processing_time_estimate integer,
    receipt_date date,
    receipt_number character varying(20),
    relationship character varying(100),
    service_center character varying(100),
    status character varying(255),
    updated_at timestamp(6) without time zone,
    uscis_case_number character varying(50),
    CONSTRAINT ai_immigration_cases_status_check CHECK (((status)::text = ANY ((ARRAY['PREPARATION'::character varying, 'FILED'::character varying, 'RECEIVED'::character varying, 'IN_REVIEW'::character varying, 'RFE_ISSUED'::character varying, 'RFE_RESPONDED'::character varying, 'INTERVIEW_SCHEDULED'::character varying, 'APPROVED'::character varying, 'DENIED'::character varying, 'WITHDRAWN'::character varying, 'TERMINATED'::character varying])::text[])))
);


--
-- Name: ai_immigration_cases_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_immigration_cases ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_immigration_cases_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_immigration_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_immigration_documents (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    document_name character varying(200) NOT NULL,
    document_type character varying(100) NOT NULL,
    expiration_date timestamp(6) without time zone,
    file_path text,
    form_number character varying(20),
    is_required boolean,
    is_submitted boolean,
    notes text,
    organization_id bigint,
    priority_level character varying(20),
    review_status character varying(50),
    reviewer_comments text,
    status character varying(50) NOT NULL,
    submission_date timestamp(6) without time zone,
    updated_at timestamp(6) without time zone
);


--
-- Name: ai_immigration_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_immigration_documents ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_immigration_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_immigration_forms; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_immigration_forms (
    id bigint NOT NULL,
    ai_assistance_prompts text,
    created_at timestamp(6) without time zone,
    filing_fee numeric(10,2),
    filing_requirements text,
    form_category character varying(255) NOT NULL,
    form_instructions text,
    form_number character varying(20) NOT NULL,
    form_template text,
    form_title character varying(200) NOT NULL,
    is_active boolean,
    last_updated date,
    organization_id bigint,
    processing_time_range character varying(50),
    required_documents text,
    CONSTRAINT ai_immigration_forms_form_category_check CHECK (((form_category)::text = ANY ((ARRAY['FAMILY_BASED'::character varying, 'EMPLOYMENT_BASED'::character varying, 'HUMANITARIAN'::character varying, 'NATURALIZATION'::character varying, 'TEMPORARY_STATUS'::character varying, 'ADJUSTMENT'::character varying, 'WAIVER'::character varying, 'APPEAL'::character varying])::text[])))
);


--
-- Name: ai_immigration_forms_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_immigration_forms ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_immigration_forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_legal_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_legal_templates (
    id bigint NOT NULL,
    ai_prompt_structure text,
    average_rating numeric(3,2),
    category character varying(255) NOT NULL,
    created_at timestamp(6) without time zone,
    created_by bigint,
    description text,
    document_type character varying(100),
    firm_id bigint,
    formatting_rules text,
    is_approved boolean,
    is_ma_certified boolean,
    is_public boolean,
    jurisdiction character varying(100),
    ma_jurisdiction_specific boolean,
    name character varying(255) NOT NULL,
    organization_id bigint,
    pdf_field_mappings text,
    pdf_form_hash character varying(64),
    pdf_form_url character varying(500),
    practice_area character varying(100),
    style_guide_id bigint,
    success_rate numeric(5,2),
    template_content text,
    template_type character varying(20),
    updated_at timestamp(6) without time zone,
    usage_count integer,
    variable_mappings text,
    CONSTRAINT ai_legal_templates_category_check CHECK (((category)::text = ANY ((ARRAY['MOTION'::character varying, 'BRIEF'::character varying, 'PLEADING'::character varying, 'CONTRACT'::character varying, 'CORRESPONDENCE'::character varying, 'DISCOVERY'::character varying, 'SETTLEMENT'::character varying, 'COURT_FILING'::character varying, 'INTERNAL_MEMO'::character varying, 'CLIENT_ADVICE'::character varying, 'RESEARCH_MEMO'::character varying, 'OPINION_LETTER'::character varying, 'IMMIGRATION_FORM'::character varying, 'FAMILY_LAW_FORM'::character varying, 'CRIMINAL_MOTION'::character varying, 'REAL_ESTATE_DOC'::character varying, 'PATENT_APPLICATION'::character varying])::text[])))
);


--
-- Name: ai_legal_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_legal_templates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_legal_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_ma_court_rules; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_ma_court_rules (
    id bigint NOT NULL,
    court_level character varying(255) NOT NULL,
    created_at timestamp(6) without time zone,
    deadlines_json text,
    effective_date date,
    forms_required text,
    is_active boolean,
    last_amended date,
    local_rules text,
    practice_notes text,
    related_statutes text,
    rule_category character varying(100),
    rule_number character varying(20) NOT NULL,
    rule_text text NOT NULL,
    rule_title character varying(300) NOT NULL,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_ma_court_rules_court_level_check CHECK (((court_level)::text = ANY ((ARRAY['SUPERIOR_COURT'::character varying, 'DISTRICT_COURT'::character varying, 'PROBATE_FAMILY'::character varying, 'LAND_COURT'::character varying, 'HOUSING_COURT'::character varying, 'JUVENILE_COURT'::character varying, 'APPEALS_COURT'::character varying, 'SJC'::character varying])::text[])))
);


--
-- Name: ai_ma_court_rules_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_ma_court_rules ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_ma_court_rules_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_ma_sentencing_guidelines; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_ma_sentencing_guidelines (
    id bigint NOT NULL,
    category character varying(100),
    created_at timestamp(6) without time zone,
    effective_date date,
    eligibility_notes text,
    fine_range character varying(100),
    mandatory_minimum boolean,
    max_sentence character varying(100),
    min_sentence character varying(100),
    offense_code character varying(20) NOT NULL,
    offense_description character varying(500) NOT NULL,
    points_value integer,
    recent_updates text,
    statutory_citation character varying(100),
    subcategory character varying(100),
    updated_at timestamp(6) without time zone
);


--
-- Name: ai_ma_sentencing_guidelines_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_ma_sentencing_guidelines ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_ma_sentencing_guidelines_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_ma_statutes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_ma_statutes (
    id bigint NOT NULL,
    amendments_history text,
    chapter character varying(10) NOT NULL,
    citation_format character varying(100),
    created_at timestamp(6) without time zone,
    cross_references text,
    effective_date date,
    is_active boolean,
    keywords text,
    last_updated date,
    practice_area character varying(100),
    practice_notes text,
    related_cases text,
    section character varying(20) NOT NULL,
    statute_text text NOT NULL,
    title character varying(500) NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: ai_ma_statutes_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_ma_statutes ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_ma_statutes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_patent_applications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_patent_applications (
    id bigint NOT NULL,
    abstract text,
    ai_analysis_completed boolean,
    ai_recommendations text,
    ai_risk_score numeric(3,2),
    application_number character varying(50),
    art_unit character varying(10),
    assignees text,
    attorney_docket_number character varying(100),
    attorney_name character varying(200),
    cited_references_count integer,
    claims text,
    claims_count integer,
    client_id bigint NOT NULL,
    confirmation_number character varying(20),
    continuation_data text,
    cpc_classification character varying(50),
    created_at timestamp(6) without time zone,
    created_by bigint,
    customer_number character varying(20),
    description text,
    drawings_count integer,
    examination_date date,
    examination_fees numeric(10,2),
    examiner_name character varying(200),
    expiration_date date,
    filing_date date,
    filing_fees numeric(10,2),
    foreign_filing_data text,
    forward_citations_count integer,
    grant_date date,
    independent_claims_count integer,
    internal_reference character varying(100),
    inventors text,
    ipc_classification character varying(50),
    is_international boolean,
    issue_fees numeric(10,2),
    last_office_action_date date,
    law_firm character varying(200),
    maintenance_fees_due date,
    micro_entity_status boolean,
    next_maintenance_fee numeric(10,2),
    notes text,
    office_actions_count integer,
    organization_id bigint,
    patent_type character varying(255) NOT NULL,
    prior_art_references text,
    priority_application_number character varying(50),
    priority_country character varying(50),
    priority_date date,
    publication_date date,
    response_due_date date,
    search_fees numeric(10,2),
    small_entity_status boolean,
    specification_pages integer,
    status character varying(255) NOT NULL,
    technology_area character varying(200),
    title character varying(500) NOT NULL,
    updated_at timestamp(6) without time zone,
    updated_by bigint,
    us_classification character varying(50),
    CONSTRAINT ai_patent_applications_patent_type_check CHECK (((patent_type)::text = ANY ((ARRAY['UTILITY_PATENT'::character varying, 'DESIGN_PATENT'::character varying, 'PLANT_PATENT'::character varying, 'PROVISIONAL_APPLICATION'::character varying, 'NON_PROVISIONAL_APPLICATION'::character varying, 'PCT_APPLICATION'::character varying, 'CONTINUATION_APPLICATION'::character varying, 'CONTINUATION_IN_PART'::character varying, 'DIVISIONAL_APPLICATION'::character varying, 'REISSUE_APPLICATION'::character varying, 'REEXAMINATION_REQUEST'::character varying, 'INTER_PARTES_REVIEW'::character varying, 'POST_GRANT_REVIEW'::character varying, 'COVERED_BUSINESS_METHOD'::character varying, 'DERIVATION_PROCEEDING'::character varying, 'INTERFERENCE_PROCEEDING'::character varying, 'APPEAL_TO_PTAB'::character varying, 'APPEAL_TO_FEDERAL_CIRCUIT'::character varying, 'INTERNATIONAL_APPLICATION'::character varying, 'FOREIGN_FILING'::character varying, 'MADRID_PROTOCOL'::character varying, 'TRADEMARK_APPLICATION'::character varying, 'SERVICE_MARK_APPLICATION'::character varying, 'COPYRIGHT_REGISTRATION'::character varying, 'TRADE_SECRET_PROTECTION'::character varying, 'LICENSING_AGREEMENT'::character varying, 'ASSIGNMENT_AGREEMENT'::character varying, 'INVENTION_DISCLOSURE'::character varying, 'PRIOR_ART_SEARCH'::character varying, 'FREEDOM_TO_OPERATE_ANALYSIS'::character varying, 'PATENT_LANDSCAPE_ANALYSIS'::character varying, 'IP_PORTFOLIO_MANAGEMENT'::character varying, 'IP_LITIGATION'::character varying, 'IP_ENFORCEMENT'::character varying, 'IP_LICENSING_NEGOTIATION'::character varying])::text[]))),
    CONSTRAINT ai_patent_applications_status_check CHECK (((status)::text = ANY ((ARRAY['DRAFT'::character varying, 'FILED'::character varying, 'PENDING'::character varying, 'UNDER_EXAMINATION'::character varying, 'OFFICE_ACTION_RECEIVED'::character varying, 'RESPONSE_FILED'::character varying, 'INTERVIEW_SCHEDULED'::character varying, 'INTERVIEW_COMPLETED'::character varying, 'ALLOWANCE_RECEIVED'::character varying, 'PATENT_GRANTED'::character varying, 'PATENT_ISSUED'::character varying, 'MAINTENANCE_FEE_DUE'::character varying, 'MAINTENANCE_FEE_PAID'::character varying, 'EXPIRED'::character varying, 'ABANDONED'::character varying, 'REJECTED'::character varying, 'APPEALED'::character varying, 'APPEAL_PENDING'::character varying, 'APPEAL_DECIDED'::character varying, 'REEXAMINATION_REQUESTED'::character varying, 'REEXAMINATION_PENDING'::character varying, 'IPR_FILED'::character varying, 'IPR_PENDING'::character varying, 'PGR_FILED'::character varying, 'PGR_PENDING'::character varying, 'INTERFERENCE_DECLARED'::character varying, 'DERIVATION_PROCEEDING'::character varying, 'LITIGATION_PENDING'::character varying, 'INVALIDATED'::character varying, 'UPHELD'::character varying, 'LICENSED'::character varying, 'ASSIGNED'::character varying, 'SOLD'::character varying, 'ENFORCEMENT_ACTION'::character varying, 'INFRINGEMENT_CLAIMED'::character varying, 'VALIDITY_CHALLENGED'::character varying, 'ON_HOLD'::character varying, 'WITHDRAWN'::character varying, 'PUBLISHED'::character varying, 'SEARCH_COMPLETED'::character varying])::text[])))
);


--
-- Name: ai_patent_applications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_patent_applications ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_patent_applications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_patent_prior_art; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_patent_prior_art (
    id bigint NOT NULL,
    abstract text,
    analysis_notes text,
    applicant_cited boolean,
    application_id bigint NOT NULL,
    assignee_name character varying(300),
    blocking_analysis text,
    citation_category character varying(50),
    classification_codes text,
    country_code character varying(5),
    created_at timestamp(6) without time zone,
    database_source character varying(100),
    examiner_cited boolean,
    inventor_name character varying(300),
    is_blocking boolean,
    organization_id bigint,
    patent_number character varying(50),
    prior_art_type character varying(100) NOT NULL,
    priority_date date,
    publication_date date,
    publication_number character varying(50),
    relevance_score double precision,
    relevant_claims text,
    search_query_used text,
    title character varying(500) NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: ai_patent_prior_art_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_patent_prior_art ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_patent_prior_art_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_patent_searches; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_patent_searches (
    id bigint NOT NULL,
    ai_analysis_confidence numeric(3,2),
    analysis_results text,
    case_id bigint,
    created_at timestamp(6) without time zone,
    invention_description text,
    invention_title character varying(300) NOT NULL,
    organization_id bigint,
    patentability_score numeric(3,2),
    prior_art_references text,
    recommendations text,
    review_status character varying(255),
    risk_assessment character varying(255),
    search_cost numeric(10,2),
    search_databases text,
    search_date date,
    search_results text,
    search_strategy text,
    search_terms text,
    search_type character varying(255) NOT NULL,
    searcher_name character varying(200),
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_patent_searches_review_status_check CHECK (((review_status)::text = ANY ((ARRAY['PENDING'::character varying, 'IN_REVIEW'::character varying, 'COMPLETED'::character varying, 'REQUIRES_UPDATE'::character varying])::text[]))),
    CONSTRAINT ai_patent_searches_risk_assessment_check CHECK (((risk_assessment)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying, 'CRITICAL'::character varying])::text[]))),
    CONSTRAINT ai_patent_searches_search_type_check CHECK (((search_type)::text = ANY ((ARRAY['PRIOR_ART'::character varying, 'FREEDOM_TO_OPERATE'::character varying, 'PATENTABILITY'::character varying, 'INVALIDITY'::character varying, 'INFRINGEMENT'::character varying])::text[])))
);


--
-- Name: ai_patent_searches_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_patent_searches ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_patent_searches_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_pdf_form_fields; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_pdf_form_fields (
    id bigint NOT NULL,
    ai_generation_prompt text,
    case_data_path character varying(200),
    created_at timestamp(6) without time zone,
    default_value character varying(500),
    display_order integer,
    field_type character varying(50),
    is_required boolean,
    pdf_field_name character varying(200) NOT NULL,
    template_id bigint NOT NULL,
    validation_rule character varying(200)
);


--
-- Name: ai_pdf_form_fields_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_pdf_form_fields ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_pdf_form_fields_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_real_estate_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_real_estate_documents (
    id bigint NOT NULL,
    compliance_notes text,
    created_at timestamp(6) without time zone,
    document_category character varying(100),
    document_content text,
    document_name character varying(200) NOT NULL,
    document_type character varying(100) NOT NULL,
    expiration_date timestamp(6) without time zone,
    file_path text,
    is_notarized boolean,
    is_required boolean,
    is_signed boolean,
    notarization_date timestamp(6) without time zone,
    organization_id bigint,
    parties_involved text,
    priority_level character varying(20),
    property_address character varying(500),
    requires_notarization boolean,
    review_status character varying(50),
    reviewer_comments text,
    signing_date timestamp(6) without time zone,
    status character varying(50) NOT NULL,
    transaction_id bigint NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: ai_real_estate_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_real_estate_documents ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_real_estate_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_real_estate_transactions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_real_estate_transactions (
    id bigint NOT NULL,
    book_page character varying(50),
    buyer_name character varying(300),
    case_id bigint,
    closing_attorney character varying(200),
    closing_costs text,
    closing_date date,
    created_at timestamp(6) without time zone,
    deed_type character varying(255),
    inspection_deadline date,
    lender_name character varying(200),
    loan_amount numeric(15,2),
    lot_plan_info character varying(200),
    mortgage_contingency_deadline date,
    organization_id bigint,
    property_address text NOT NULL,
    property_type character varying(255) NOT NULL,
    purchase_and_sale_signed date,
    purchase_price numeric(15,2),
    registry_of_deeds character varying(100),
    seller_name character varying(300),
    special_conditions text,
    title_company character varying(200),
    title_issues text,
    transaction_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_real_estate_transactions_deed_type_check CHECK (((deed_type)::text = ANY ((ARRAY['WARRANTY'::character varying, 'QUITCLAIM'::character varying, 'FORECLOSURE'::character varying, 'TAX'::character varying])::text[]))),
    CONSTRAINT ai_real_estate_transactions_property_type_check CHECK (((property_type)::text = ANY ((ARRAY['RESIDENTIAL'::character varying, 'COMMERCIAL'::character varying, 'LAND'::character varying, 'CONDO'::character varying, 'MULTI_FAMILY'::character varying])::text[]))),
    CONSTRAINT ai_real_estate_transactions_transaction_type_check CHECK (((transaction_type)::text = ANY ((ARRAY['PURCHASE'::character varying, 'SALE'::character varying, 'REFINANCE'::character varying, 'COMMERCIAL'::character varying, 'LEASE'::character varying])::text[])))
);


--
-- Name: ai_real_estate_transactions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_real_estate_transactions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_real_estate_transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_research_cache; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_research_cache (
    id bigint NOT NULL,
    ai_model_used character varying(50),
    ai_response text NOT NULL,
    case_id character varying(50),
    confidence_score numeric(3,2),
    created_at timestamp(6) without time zone,
    expires_at timestamp(6) without time zone,
    is_valid boolean,
    jurisdiction character varying(100),
    last_used timestamp(6) without time zone,
    organization_id bigint,
    practice_area character varying(100),
    query_hash character varying(64) NOT NULL,
    query_text text NOT NULL,
    query_type character varying(255) NOT NULL,
    research_mode character varying(20),
    usage_count integer,
    CONSTRAINT ai_research_cache_query_type_check CHECK (((query_type)::text = ANY ((ARRAY['CASE_LAW'::character varying, 'STATUTE_INTERPRETATION'::character varying, 'PRECEDENT_SEARCH'::character varying, 'LEGAL_MEMO'::character varying, 'CONTRACT_ANALYSIS'::character varying, 'IMMIGRATION_RESEARCH'::character varying, 'CRIMINAL_RESEARCH'::character varying, 'FAMILY_LAW_RESEARCH'::character varying, 'REAL_ESTATE_RESEARCH'::character varying, 'PATENT_RESEARCH'::character varying, 'ALL'::character varying, 'STATUTES'::character varying, 'RULES'::character varying, 'REGULATIONS'::character varying, 'GUIDELINES'::character varying])::text[])))
);


--
-- Name: ai_research_cache_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_research_cache ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_research_cache_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_style_guides; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_style_guides (
    id bigint NOT NULL,
    citation_style character varying(255),
    created_at timestamp(6) without time zone,
    created_by bigint,
    description text,
    firm_id bigint,
    font_preferences text,
    footer_template text,
    formatting_preferences text,
    is_active boolean,
    is_default boolean,
    letterhead_template text,
    margin_settings text,
    name character varying(150) NOT NULL,
    organization_id bigint,
    rules_json text,
    signature_blocks text,
    terminology_preferences text,
    updated_at timestamp(6) without time zone,
    CONSTRAINT ai_style_guides_citation_style_check CHECK (((citation_style)::text = ANY ((ARRAY['BLUEBOOK'::character varying, 'MASSACHUSETTS'::character varying, 'ALWD'::character varying, 'CUSTOM'::character varying])::text[])))
);


--
-- Name: ai_style_guides_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_style_guides ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_style_guides_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_task_suggestions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_task_suggestions (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    suggestion_type character varying(50),
    title character varying(255) NOT NULL,
    description text,
    suggested_action text,
    ai_confidence numeric(3,2),
    ai_reasoning text,
    priority character varying(20),
    suggested_due_date date,
    estimated_time_minutes integer,
    status character varying(20),
    user_response text,
    related_documents jsonb,
    metadata jsonb,
    created_at timestamp without time zone,
    resolved_at timestamp without time zone,
    completed_at timestamp without time zone
);


--
-- Name: ai_task_suggestions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_task_suggestions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_task_suggestions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_task_suggestions_id_seq OWNED BY public.ai_task_suggestions.id;


--
-- Name: ai_template_variables; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_template_variables (
    id bigint NOT NULL,
    computation_formula text,
    created_at timestamp(6) without time zone,
    data_source character varying(255) NOT NULL,
    default_value text,
    display_name character varying(150),
    display_order integer,
    help_text text,
    is_computed boolean,
    is_required boolean,
    source_field character varying(100),
    template_id bigint NOT NULL,
    validation_rules text,
    variable_name character varying(100) NOT NULL,
    variable_type character varying(255) NOT NULL,
    CONSTRAINT ai_template_variables_data_source_check CHECK (((data_source)::text = ANY ((ARRAY['CASE_DATA'::character varying, 'CLIENT_DATA'::character varying, 'USER_INPUT'::character varying, 'COMPUTED'::character varying, 'LOOKUP'::character varying])::text[]))),
    CONSTRAINT ai_template_variables_variable_type_check CHECK (((variable_type)::text = ANY ((ARRAY['TEXT'::character varying, 'NUMBER'::character varying, 'DATE'::character varying, 'BOOLEAN'::character varying, 'EMAIL'::character varying, 'PHONE'::character varying, 'ADDRESS'::character varying, 'CASE_REF'::character varying, 'CLIENT_REF'::character varying])::text[])))
);


--
-- Name: ai_template_variables_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_template_variables ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_template_variables_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_usage_analytics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_usage_analytics (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    user_role character varying(100),
    feature_type character varying(50),
    feature_subtype character varying(50),
    model_used character varying(100),
    tokens_consumed integer,
    cost_usd numeric(10,4),
    execution_time_ms bigint,
    success boolean,
    error_message text,
    error_type character varying(50),
    session_id bigint,
    case_id bigint,
    practice_area character varying(100),
    user_satisfaction_score integer,
    was_result_used boolean,
    created_at timestamp without time zone
);


--
-- Name: ai_usage_analytics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_usage_analytics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_usage_analytics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_usage_analytics_id_seq OWNED BY public.ai_usage_analytics.id;


--
-- Name: ai_usage_metrics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_usage_metrics (
    id bigint NOT NULL,
    action_taken character varying(200),
    ai_model_used character varying(50),
    case_id bigint,
    cost_estimate numeric(10,4),
    created_at timestamp(6) without time zone,
    documents_processed integer,
    efficiency_gain_percentage numeric(5,2),
    error_count integer,
    feature_type character varying(255) NOT NULL,
    organization_id bigint NOT NULL,
    session_duration_minutes integer,
    success_rate numeric(3,2),
    time_saved_minutes integer,
    tokens_used integer,
    user_id bigint NOT NULL,
    user_satisfaction_rating integer,
    CONSTRAINT ai_usage_metrics_feature_type_check CHECK (((feature_type)::text = ANY ((ARRAY['DOCUMENT_GENERATION'::character varying, 'LEGAL_RESEARCH'::character varying, 'CONTRACT_ANALYSIS'::character varying, 'IMMIGRATION_ASSISTANCE'::character varying, 'FAMILY_LAW_CALCULATION'::character varying, 'CRIMINAL_ANALYSIS'::character varying, 'REAL_ESTATE_ASSISTANCE'::character varying, 'PATENT_ANALYSIS'::character varying, 'COLLABORATION'::character varying, 'TEMPLATE_USAGE'::character varying, 'AI_SUGGESTIONS'::character varying])::text[])))
);


--
-- Name: ai_usage_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_usage_metrics ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_usage_metrics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_usage_quota; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_usage_quota (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    quota_date date NOT NULL,
    tokens_used integer,
    api_calls_made integer,
    cost_usd numeric(10,4),
    daily_token_limit integer,
    monthly_cost_limit_usd numeric(10,2),
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: ai_usage_quota_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_usage_quota_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_usage_quota_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_usage_quota_id_seq OWNED BY public.ai_usage_quota.id;


--
-- Name: ai_user_preferences; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_user_preferences (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    custom_system_prompt text,
    research_preferences jsonb,
    drafting_preferences jsonb,
    analysis_preferences jsonb,
    chat_interface_mode character varying(20),
    show_confidence_scores boolean,
    show_source_citations boolean,
    enable_typing_indicator boolean,
    notify_task_suggestions boolean,
    notify_deadline_warnings boolean,
    notify_cost_alerts boolean,
    email_notification_frequency character varying(20),
    allow_data_for_training boolean,
    allow_firm_analytics boolean,
    auto_delete_conversations_days integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: ai_user_preferences_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_user_preferences_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_user_preferences_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_user_preferences_id_seq OWNED BY public.ai_user_preferences.id;


--
-- Name: ai_user_profiles; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_user_profiles (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    primary_role character varying(100),
    primary_practice_area character varying(100),
    secondary_practice_areas jsonb,
    jurisdiction_preferences jsonb,
    primary_jurisdiction character varying(100),
    communication_style character varying(50),
    preferred_citation_format character varying(50),
    language_preference character varying(10),
    ai_enabled boolean,
    enable_proactive_suggestions boolean,
    enable_auto_drafting boolean,
    enable_document_analysis boolean,
    preferred_ai_model character varying(50),
    max_monthly_ai_cost numeric(10,2),
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    onboarding_completed_at timestamp without time zone
);


--
-- Name: ai_user_profiles_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_user_profiles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_user_profiles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_user_profiles_id_seq OWNED BY public.ai_user_profiles.id;


--
-- Name: ai_workspace_document_citations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_workspace_document_citations (
    id bigint NOT NULL,
    case_id bigint,
    citation_format character varying(50),
    citation_text character varying(500) NOT NULL,
    created_at timestamp(6) without time zone,
    is_verified boolean,
    organization_id bigint,
    position_end integer,
    position_start integer,
    updated_at timestamp(6) without time zone,
    verification_result text,
    document_id bigint NOT NULL,
    version_id bigint
);


--
-- Name: ai_workspace_document_citations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_workspace_document_citations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_workspace_document_citations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_workspace_document_comments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_workspace_document_comments (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    version_id bigint,
    user_id bigint NOT NULL,
    comment_text text NOT NULL,
    position_start integer,
    position_end integer,
    is_resolved boolean,
    parent_comment_id bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: ai_workspace_document_comments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ai_workspace_document_comments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: ai_workspace_document_comments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.ai_workspace_document_comments_id_seq OWNED BY public.ai_workspace_document_comments.id;


--
-- Name: ai_workspace_document_versions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_workspace_document_versions (
    id bigint NOT NULL,
    content text NOT NULL,
    content_html text,
    cost_estimate numeric(10,4),
    created_at timestamp(6) without time zone,
    created_by_user boolean,
    organization_id bigint,
    selected_text text,
    selection_end_index integer,
    selection_start_index integer,
    tokens_used integer,
    transformation_scope character varying(20),
    transformation_type character varying(50),
    transformed_selection text,
    version_note character varying(500),
    version_number integer NOT NULL,
    word_count integer,
    document_id bigint NOT NULL
);


--
-- Name: ai_workspace_document_versions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_workspace_document_versions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_workspace_document_versions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: ai_workspace_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ai_workspace_documents (
    id bigint NOT NULL,
    case_id bigint,
    created_at timestamp(6) without time zone,
    current_version integer,
    deleted_at timestamp(6) without time zone,
    document_type character varying(100),
    jurisdiction character varying(100),
    organization_id bigint NOT NULL,
    session_id bigint,
    status character varying(50),
    title character varying(500) NOT NULL,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL
);


--
-- Name: ai_workspace_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.ai_workspace_documents ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ai_workspace_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: annotation_reactions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.annotation_reactions (
    id bigint NOT NULL,
    annotation_id character varying(100) NOT NULL,
    user_id bigint NOT NULL,
    reaction_type character varying(100) NOT NULL,
    created_at timestamp without time zone
);


--
-- Name: annotation_reactions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.annotation_reactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: annotation_reactions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.annotation_reactions_id_seq OWNED BY public.annotation_reactions.id;


--
-- Name: annotation_replies; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.annotation_replies (
    id character varying(100) NOT NULL,
    annotation_id character varying(100) NOT NULL,
    user_id bigint NOT NULL,
    content text NOT NULL,
    likes integer,
    created_at timestamp without time zone
);


--
-- Name: appointment_requests; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.appointment_requests (
    id bigint NOT NULL,
    alternative_datetime timestamp(6) without time zone,
    appointment_type character varying(255) NOT NULL,
    attorney_id bigint NOT NULL,
    attorney_notes text,
    calendar_event_id bigint,
    cancellation_reason text,
    cancelled_by character varying(255),
    case_id bigint,
    client_id bigint NOT NULL,
    confirmed_datetime timestamp(6) without time zone,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    duration_minutes integer NOT NULL,
    is_virtual boolean NOT NULL,
    location character varying(255),
    meeting_link character varying(255),
    notes text,
    organization_id bigint,
    original_confirmed_time timestamp(6) without time zone,
    preferred_datetime timestamp(6) without time zone NOT NULL,
    reminder_1h_sent boolean NOT NULL,
    reminder_24h_sent boolean NOT NULL,
    reminder_sent boolean NOT NULL,
    requested_reschedule_time timestamp(6) without time zone,
    reschedule_reason text,
    status character varying(255) NOT NULL,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: appointment_requests_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.appointment_requests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.appointment_requests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: approval_workflows; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.approval_workflows (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    workflow_type character varying(100) NOT NULL,
    practice_area character varying(100),
    is_active boolean,
    organization_id bigint,
    created_by bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: approval_workflows_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.approval_workflows_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: approval_workflows_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.approval_workflows_id_seq OWNED BY public.approval_workflows.id;


--
-- Name: argument_simulations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.argument_simulations (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    original_argument text NOT NULL,
    argument_type character varying(100),
    legal_issue character varying(500),
    counterarguments_json jsonb,
    weaknesses_identified jsonb,
    suggested_rebuttals jsonb,
    strength_score numeric(5,2),
    vulnerability_score numeric(5,2),
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: argument_simulations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.argument_simulations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: argument_simulations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.argument_simulations_id_seq OWNED BY public.argument_simulations.id;


--
-- Name: assignment_rules; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.assignment_rules (
    id bigint NOT NULL,
    is_active boolean,
    case_type character varying(50),
    created_at timestamp(6) without time zone NOT NULL,
    max_workload_percentage numeric(5,2),
    min_expertise_score numeric(5,2),
    organization_id bigint,
    prefer_previous_attorney boolean,
    priority_order integer,
    rule_actions text,
    rule_conditions text,
    rule_name character varying(100) NOT NULL,
    rule_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    CONSTRAINT assignment_rules_rule_type_check CHECK (((rule_type)::text = ANY ((ARRAY['EXPERTISE_BASED'::character varying, 'WORKLOAD_BASED'::character varying, 'ROUND_ROBIN'::character varying, 'CUSTOM'::character varying])::text[])))
);


--
-- Name: assignment_rules_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.assignment_rules ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.assignment_rules_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: attorney_assignment_rules; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorney_assignment_rules (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    practice_area character varying(100),
    priority_order integer NOT NULL,
    conditions jsonb NOT NULL,
    assignment_logic jsonb NOT NULL,
    is_active boolean,
    usage_count integer,
    last_used_at timestamp without time zone,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: attorney_assignment_rules_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.attorney_assignment_rules_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: attorney_assignment_rules_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.attorney_assignment_rules_id_seq OWNED BY public.attorney_assignment_rules.id;


--
-- Name: attorney_assignments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorney_assignments (
    id bigint NOT NULL,
    lead_id bigint NOT NULL,
    attorney_id bigint NOT NULL,
    assignment_method character varying(50) NOT NULL,
    assignment_score numeric(5,2),
    assignment_reasoning jsonb,
    rule_id bigint,
    assigned_by bigint NOT NULL,
    assigned_at timestamp without time zone,
    accepted_at timestamp without time zone,
    rejected_at timestamp without time zone,
    rejection_reason text,
    status character varying(20),
    estimated_contact_time timestamp without time zone,
    actual_contact_time timestamp without time zone,
    notes text
);


--
-- Name: attorney_assignments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.attorney_assignments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: attorney_assignments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.attorney_assignments_id_seq OWNED BY public.attorney_assignments.id;


--
-- Name: attorney_availability; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorney_availability (
    id bigint NOT NULL,
    attorney_id bigint NOT NULL,
    buffer_minutes integer NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    day_of_week integer NOT NULL,
    end_time time(6) without time zone NOT NULL,
    is_active boolean NOT NULL,
    organization_id bigint,
    slot_duration_minutes integer NOT NULL,
    start_time time(6) without time zone NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: attorney_availability_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.attorney_availability ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.attorney_availability_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: attorney_expertise; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorney_expertise (
    id bigint NOT NULL,
    cases_handled integer,
    certifications text,
    created_at timestamp(6) without time zone NOT NULL,
    expertise_area character varying(255) NOT NULL,
    last_case_date date,
    organization_id bigint,
    proficiency_level character varying(255) NOT NULL,
    success_rate numeric(5,2),
    updated_at timestamp(6) without time zone,
    years_experience integer,
    user_id bigint NOT NULL,
    CONSTRAINT attorney_expertise_expertise_area_check CHECK (((expertise_area)::text = ANY ((ARRAY['CORPORATE_LAW'::character varying, 'LITIGATION'::character varying, 'REAL_ESTATE'::character varying, 'FAMILY_LAW'::character varying, 'CRIMINAL_LAW'::character varying, 'EMPLOYMENT_LAW'::character varying, 'INTELLECTUAL_PROPERTY'::character varying, 'TAX_LAW'::character varying, 'BANKRUPTCY'::character varying, 'IMMIGRATION_LAW'::character varying, 'PERSONAL_INJURY'::character varying, 'ENVIRONMENTAL_LAW'::character varying, 'HEALTHCARE_LAW'::character varying, 'CONTRACT_LAW'::character varying, 'COMMERCIAL_LAW'::character varying, 'ESTATE_PLANNING'::character varying, 'MERGERS_AND_ACQUISITIONS'::character varying, 'SECURITIES_LAW'::character varying, 'ANTITRUST_LAW'::character varying, 'PRIVACY_LAW'::character varying, 'OTHER'::character varying])::text[]))),
    CONSTRAINT attorney_expertise_proficiency_level_check CHECK (((proficiency_level)::text = ANY ((ARRAY['BEGINNER'::character varying, 'INTERMEDIATE'::character varying, 'ADVANCED'::character varying, 'EXPERT'::character varying])::text[])))
);


--
-- Name: attorney_expertise_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.attorney_expertise ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.attorney_expertise_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: attorney_performance_metrics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorney_performance_metrics (
    id bigint NOT NULL,
    attorney_id bigint NOT NULL,
    metric_period character varying(20) NOT NULL,
    period_start date NOT NULL,
    period_end date NOT NULL,
    conversion_rate numeric(5,2),
    average_response_time numeric(5,2),
    client_satisfaction_score numeric(3,2),
    case_success_rate numeric(5,2),
    revenue_generated numeric(12,2),
    case_closure_time numeric(5,1),
    billable_hours_monthly numeric(5,1),
    cases_handled integer,
    consultations_conducted integer,
    referrals_made integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: attorney_performance_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.attorney_performance_metrics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: attorney_performance_metrics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.attorney_performance_metrics_id_seq OWNED BY public.attorney_performance_metrics.id;


--
-- Name: attorney_unavailable_periods; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorney_unavailable_periods (
    id bigint NOT NULL,
    attorney_id bigint NOT NULL,
    start_date date NOT NULL,
    end_date date NOT NULL,
    reason character varying(100),
    description text,
    is_all_day boolean,
    start_time time without time zone,
    end_time time without time zone,
    created_at timestamp without time zone
);


--
-- Name: attorney_unavailable_periods_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.attorney_unavailable_periods_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: attorney_unavailable_periods_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.attorney_unavailable_periods_id_seq OWNED BY public.attorney_unavailable_periods.id;


--
-- Name: attorneys; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.attorneys (
    id bigint NOT NULL,
    bar_number character varying(255),
    bio text,
    certifications text,
    created_at timestamp(6) without time zone,
    current_case_load integer,
    education text,
    experience_years integer,
    hourly_rate numeric(38,2),
    is_active boolean,
    languages text,
    license_state character varying(255),
    max_case_load integer,
    office_location character varying(255),
    organization_id bigint,
    practice_areas text,
    preferred_case_types text,
    specializations text,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL
);


--
-- Name: attorneys_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.attorneys ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.attorneys_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: audit_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.audit_log (
    id bigint NOT NULL,
    user_id bigint,
    session_id character varying(255),
    action character varying(50) NOT NULL,
    entity_type character varying(50) NOT NULL,
    entity_id bigint,
    description text,
    metadata text,
    ip_address character varying(45),
    user_agent text,
    organization_id bigint,
    "timestamp" timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


--
-- Name: audit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.audit_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: audit_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.audit_log_id_seq OWNED BY public.audit_log.id;


--
-- Name: automated_document_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.automated_document_templates (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    document_type character varying(50) NOT NULL,
    practice_area character varying(100),
    template_format character varying(20),
    template_content text,
    template_file_path character varying(500),
    merge_fields jsonb,
    generation_rules jsonb,
    auto_generate boolean,
    requires_review boolean,
    is_active boolean,
    usage_count integer,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: automated_document_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.automated_document_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: automated_document_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.automated_document_templates_id_seq OWNED BY public.automated_document_templates.id;


--
-- Name: billing_cycles; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.billing_cycles (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    cycle_name character varying(100) NOT NULL,
    end_date date NOT NULL,
    generated_at timestamp(6) without time zone,
    invoice_id bigint,
    legal_case_id bigint NOT NULL,
    organization_id bigint,
    start_date date NOT NULL,
    status character varying(255) NOT NULL,
    total_amount numeric(12,2),
    total_hours numeric(6,2),
    updated_at timestamp(6) without time zone,
    CONSTRAINT billing_cycles_status_check CHECK (((status)::text = ANY ((ARRAY['DRAFT'::character varying, 'PROCESSING'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying])::text[])))
);


--
-- Name: billing_cycles_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.billing_cycles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.billing_cycles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: billing_rates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.billing_rates (
    id bigint NOT NULL,
    customer_id bigint,
    created_at timestamp(6) without time zone NOT NULL,
    effective_date date NOT NULL,
    end_date date,
    is_active boolean NOT NULL,
    legal_case_id bigint,
    matter_type_id bigint,
    organization_id bigint,
    rate_amount numeric(10,2) NOT NULL,
    rate_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL,
    CONSTRAINT billing_rates_rate_type_check CHECK (((rate_type)::text = ANY ((ARRAY['STANDARD'::character varying, 'PREMIUM'::character varying, 'DISCOUNTED'::character varying, 'EMERGENCY'::character varying, 'PRO_BONO'::character varying])::text[])))
);


--
-- Name: billing_rates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.billing_rates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.billing_rates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: calendar_event_participants; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.calendar_event_participants (
    id bigint NOT NULL,
    event_id bigint NOT NULL,
    user_id bigint NOT NULL,
    role character varying(50),
    response_status character varying(50),
    added_by bigint,
    added_at timestamp without time zone
);


--
-- Name: calendar_event_participants_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.calendar_event_participants_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: calendar_event_participants_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.calendar_event_participants_id_seq OWNED BY public.calendar_event_participants.id;


--
-- Name: calendar_events; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.calendar_events (
    id bigint NOT NULL,
    additional_reminders character varying(255),
    all_day boolean,
    case_id bigint,
    color character varying(255),
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    email_notification boolean,
    end_time timestamp(6) without time zone,
    event_type character varying(255) NOT NULL,
    external_calendar character varying(255),
    external_id character varying(255),
    high_priority boolean,
    location character varying(255),
    organization_id bigint,
    push_notification boolean,
    recurrence_rule character varying(255),
    reminder_minutes integer,
    reminder_sent boolean,
    reminders_sent character varying(255),
    start_time timestamp(6) without time zone NOT NULL,
    status character varying(255),
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    user_id bigint
);


--
-- Name: calendar_events_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.calendar_events ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.calendar_events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_access_requests; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_access_requests (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    requested_by bigint NOT NULL,
    requested_role character varying(50) NOT NULL,
    reason text NOT NULL,
    status character varying(50),
    reviewed_by bigint,
    reviewed_at timestamp without time zone,
    review_notes text,
    requested_at timestamp without time zone,
    expires_at timestamp without time zone
);


--
-- Name: case_access_requests_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_access_requests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_access_requests_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_access_requests_id_seq OWNED BY public.case_access_requests.id;


--
-- Name: case_activities; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_activities (
    id bigint NOT NULL,
    activity_type character varying(255) NOT NULL,
    case_id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    description text NOT NULL,
    metadata text,
    organization_id bigint,
    reference_id bigint,
    reference_type character varying(255),
    user_id bigint
);


--
-- Name: case_activities_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_activities ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_activities_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_assignment_history; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_assignment_history (
    id bigint NOT NULL,
    action character varying(255) NOT NULL,
    case_id bigint NOT NULL,
    metadata text,
    organization_id bigint NOT NULL,
    performed_at timestamp(6) without time zone NOT NULL,
    reason text,
    user_id bigint NOT NULL,
    case_assignment_id bigint NOT NULL,
    new_user_id bigint,
    performed_by bigint NOT NULL,
    previous_user_id bigint,
    CONSTRAINT case_assignment_history_action_check CHECK (((action)::text = ANY ((ARRAY['CREATED'::character varying, 'TRANSFERRED'::character varying, 'MODIFIED'::character varying, 'DEACTIVATED'::character varying])::text[])))
);


--
-- Name: case_assignment_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_assignment_history ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_assignment_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_assignments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_assignments (
    id bigint NOT NULL,
    is_active boolean,
    assigned_at timestamp(6) without time zone,
    assignment_type character varying(255),
    created_at timestamp(6) without time zone NOT NULL,
    effective_from date NOT NULL,
    effective_to date,
    expertise_match_score numeric(5,2),
    notes text,
    organization_id bigint NOT NULL,
    role_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    workload_weight numeric(5,2),
    assigned_by bigint,
    user_id bigint NOT NULL,
    case_id bigint NOT NULL,
    CONSTRAINT case_assignments_assignment_type_check CHECK (((assignment_type)::text = ANY ((ARRAY['MANUAL'::character varying, 'AUTO_ASSIGNED'::character varying, 'TRANSFERRED'::character varying, 'TEMPORARY'::character varying, 'EMERGENCY'::character varying, 'DELEGATED'::character varying])::text[]))),
    CONSTRAINT case_assignments_role_type_check CHECK (((role_type)::text = ANY ((ARRAY['LEAD_ATTORNEY'::character varying, 'SUPPORTING_ATTORNEY'::character varying, 'CO_COUNSEL'::character varying, 'ASSOCIATE'::character varying, 'PARALEGAL'::character varying, 'LEGAL_ASSISTANT'::character varying, 'SECRETARY'::character varying, 'CONSULTANT'::character varying, 'INTERN'::character varying])::text[])))
);


--
-- Name: case_assignments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_assignments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_assignments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_budget_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_budget_summary (
    id bigint,
    legal_case_id bigint NOT NULL,
    budget_amount numeric(12,2) NOT NULL,
    spent_amount numeric(12,2),
    alert_threshold numeric(5,2),
    last_alert_sent_at timestamp without time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    case_title character varying(255) NOT NULL,
    client_name character varying(255) NOT NULL,
    budget_usage_percentage numeric(21,6),
    remaining_budget numeric(13,2)
);


--
-- Name: case_budgets; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_budgets (
    id bigint NOT NULL,
    legal_case_id bigint NOT NULL,
    budget_amount numeric(12,2) NOT NULL,
    spent_amount numeric(12,2),
    alert_threshold numeric(5,2),
    last_alert_sent_at timestamp without time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: case_budgets_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_budgets_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_budgets_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_budgets_id_seq OWNED BY public.case_budgets.id;


--
-- Name: case_creation_executions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_creation_executions (
    id bigint NOT NULL,
    workflow_id bigint NOT NULL,
    source_type character varying(20) NOT NULL,
    source_id bigint NOT NULL,
    execution_status character varying(20),
    current_step_index integer,
    total_steps integer NOT NULL,
    progress_percentage numeric(5,2),
    started_at timestamp without time zone,
    completed_at timestamp without time zone,
    execution_time_seconds integer,
    triggered_by character varying(20),
    triggered_by_user_id bigint,
    execution_context jsonb,
    error_message text,
    retry_count integer,
    case_id bigint,
    client_id bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: case_creation_executions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_creation_executions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_creation_executions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_creation_executions_id_seq OWNED BY public.case_creation_executions.id;


--
-- Name: case_creation_workflows; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_creation_workflows (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    practice_area character varying(100) NOT NULL,
    workflow_type character varying(30) NOT NULL,
    workflow_steps jsonb NOT NULL,
    automation_rules jsonb,
    prerequisite_checks jsonb,
    success_criteria jsonb,
    rollback_steps jsonb,
    estimated_duration_minutes integer,
    priority_level character varying(20),
    is_active boolean,
    auto_execute boolean,
    requires_approval boolean,
    max_retries integer,
    version integer,
    usage_count integer,
    success_rate numeric(5,2),
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: case_creation_workflows_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_creation_workflows_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_creation_workflows_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_creation_workflows_id_seq OWNED BY public.case_creation_workflows.id;


--
-- Name: case_fee_agreements; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_fee_agreements (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    template_id bigint NOT NULL,
    client_id bigint NOT NULL,
    attorney_id bigint NOT NULL,
    agreement_number character varying(50),
    fee_structure character varying(30) NOT NULL,
    fee_terms jsonb NOT NULL,
    hourly_rates jsonb,
    estimated_total numeric(10,2),
    retainer_amount numeric(10,2),
    contingency_percentage numeric(5,2),
    agreement_content text,
    status character varying(20),
    created_by bigint NOT NULL,
    approved_by bigint,
    approved_at timestamp without time zone,
    sent_to_client_at timestamp without time zone,
    client_signed_at timestamp without time zone,
    client_signature_ip character varying(45),
    attorney_signed_at timestamp without time zone,
    effective_date date,
    expiration_date date,
    notes text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: case_fee_agreements_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_fee_agreements_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_fee_agreements_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_fee_agreements_id_seq OWNED BY public.case_fee_agreements.id;


--
-- Name: case_notes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_notes (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    content text NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    is_private boolean NOT NULL,
    organization_id bigint,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone NOT NULL,
    updated_by bigint,
    user_id bigint
);


--
-- Name: case_notes_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_notes ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_notes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_outcome_predictions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_outcome_predictions (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    user_id bigint NOT NULL,
    predicted_outcome character varying(255),
    confidence_score numeric(5,2),
    success_probability numeric(5,2),
    factors_json jsonb,
    judge_analytics_id bigint,
    similar_cases_analyzed integer,
    risk_level character varying(100),
    risk_factors jsonb,
    settlement_recommendation text,
    strategy_recommendations jsonb,
    created_at timestamp without time zone
);


--
-- Name: case_outcome_predictions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_outcome_predictions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_outcome_predictions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_outcome_predictions_id_seq OWNED BY public.case_outcome_predictions.id;


--
-- Name: case_rate_configurations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_rate_configurations (
    id bigint NOT NULL,
    after_hours_multiplier numeric(5,2) NOT NULL,
    allow_multipliers boolean NOT NULL,
    case_name character varying(255),
    case_number character varying(100),
    created_at timestamp(6) without time zone NOT NULL,
    default_rate numeric(10,2) NOT NULL,
    emergency_multiplier numeric(5,2) NOT NULL,
    is_active boolean NOT NULL,
    legal_case_id bigint NOT NULL,
    organization_id bigint,
    updated_at timestamp(6) without time zone,
    weekend_multiplier numeric(5,2) NOT NULL
);


--
-- Name: case_rate_configurations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_rate_configurations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_rate_configurations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_reminders; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_reminders (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    due_date timestamp(6) without time zone,
    organization_id bigint NOT NULL,
    priority character varying(255) NOT NULL,
    reminder_date timestamp(6) without time zone,
    status character varying(255) NOT NULL,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL
);


--
-- Name: case_reminders_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_reminders ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_reminders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_role_assignments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_role_assignments (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    user_id bigint NOT NULL,
    role_id bigint NOT NULL,
    expires_at timestamp without time zone
);


--
-- Name: case_role_assignments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_role_assignments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_role_assignments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_role_assignments_id_seq OWNED BY public.case_role_assignments.id;


--
-- Name: case_tasks; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_tasks (
    id bigint NOT NULL,
    actual_hours numeric(5,2),
    completed_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone NOT NULL,
    dependencies text,
    description text,
    due_date timestamp(6) without time zone,
    estimated_hours numeric(5,2),
    organization_id bigint,
    priority character varying(255) NOT NULL,
    reminder_date timestamp(6) without time zone,
    status character varying(255) NOT NULL,
    tags text,
    task_type character varying(255) NOT NULL,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    assigned_by bigint NOT NULL,
    assigned_to bigint,
    case_id bigint NOT NULL,
    parent_task_id bigint,
    CONSTRAINT case_tasks_priority_check CHECK (((priority)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying, 'URGENT'::character varying])::text[]))),
    CONSTRAINT case_tasks_status_check CHECK (((status)::text = ANY ((ARRAY['TODO'::character varying, 'IN_PROGRESS'::character varying, 'REVIEW'::character varying, 'BLOCKED'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying])::text[]))),
    CONSTRAINT case_tasks_task_type_check CHECK (((task_type)::text = ANY ((ARRAY['RESEARCH'::character varying, 'DOCUMENT_PREP'::character varying, 'CLIENT_MEETING'::character varying, 'COURT_APPEARANCE'::character varying, 'FILING'::character varying, 'REVIEW'::character varying, 'CORRESPONDENCE'::character varying, 'OTHER'::character varying])::text[])))
);


--
-- Name: case_tasks_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_tasks ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_tasks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_team_assignments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_team_assignments (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_role character varying(100) NOT NULL,
    permissions jsonb,
    assigned_by bigint NOT NULL,
    assigned_date timestamp without time zone,
    expires_at timestamp without time zone,
    is_active boolean
);


--
-- Name: case_team_assignments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_team_assignments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_team_assignments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_team_assignments_id_seq OWNED BY public.case_team_assignments.id;


--
-- Name: case_timeline; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_timeline (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    user_id bigint,
    event_type character varying(50) NOT NULL,
    title character varying(255) NOT NULL,
    description text,
    event_date timestamp without time zone,
    visibility character varying(20),
    metadata jsonb,
    created_at timestamp without time zone
);


--
-- Name: case_timeline_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_timeline_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_timeline_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_timeline_id_seq OWNED BY public.case_timeline.id;


--
-- Name: case_timeline_progress; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_timeline_progress (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    completed_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    notes text,
    organization_id bigint,
    phase_name character varying(255) NOT NULL,
    phase_order integer NOT NULL,
    started_at timestamp(6) without time zone,
    status character varying(255),
    updated_at timestamp(6) without time zone,
    updated_by bigint,
    CONSTRAINT case_timeline_progress_status_check CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'SKIPPED'::character varying])::text[])))
);


--
-- Name: case_timeline_progress_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_timeline_progress ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_timeline_progress_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_timeline_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_timeline_templates (
    id bigint NOT NULL,
    case_type character varying(255) NOT NULL,
    color character varying(255),
    created_at timestamp(6) without time zone,
    estimated_duration_days integer,
    icon character varying(255),
    organization_id bigint,
    phase_description text,
    phase_name character varying(255) NOT NULL,
    phase_order integer NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: case_timeline_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_timeline_templates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_timeline_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_transfer_requests; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_transfer_requests (
    id bigint NOT NULL,
    approval_notes text,
    organization_id bigint,
    processed_at timestamp(6) without time zone,
    reason text NOT NULL,
    requested_at timestamp(6) without time zone NOT NULL,
    status character varying(255) NOT NULL,
    urgency character varying(255) NOT NULL,
    approved_by bigint,
    from_user_id bigint NOT NULL,
    case_id bigint NOT NULL,
    requested_by bigint NOT NULL,
    to_user_id bigint NOT NULL,
    CONSTRAINT case_transfer_requests_status_check CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'CANCELLED'::character varying])::text[]))),
    CONSTRAINT case_transfer_requests_urgency_check CHECK (((urgency)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying, 'URGENT'::character varying])::text[])))
);


--
-- Name: case_transfer_requests_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_transfer_requests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_transfer_requests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_types; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_types (
    id bigint NOT NULL,
    type_code character varying(50) NOT NULL,
    display_name character varying(100) NOT NULL,
    description text,
    is_active boolean,
    sort_order integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: case_types_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.case_types_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: case_types_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.case_types_id_seq OWNED BY public.case_types.id;


--
-- Name: case_workflow_executions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_workflow_executions (
    id bigint NOT NULL,
    collection_id bigint,
    completed_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone NOT NULL,
    current_step integer,
    due_date timestamp(6) without time zone,
    name character varying(255),
    organization_id bigint,
    progress_percentage integer,
    started_at timestamp(6) without time zone,
    status character varying(255) NOT NULL,
    total_steps integer NOT NULL,
    updated_at timestamp(6) without time zone,
    created_by bigint NOT NULL,
    case_id bigint,
    template_id bigint NOT NULL,
    CONSTRAINT case_workflow_executions_status_check CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'RUNNING'::character varying, 'PAUSED'::character varying, 'WAITING_USER'::character varying, 'COMPLETED'::character varying, 'FAILED'::character varying])::text[])))
);


--
-- Name: case_workflow_executions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_workflow_executions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_workflow_executions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_workflow_step_executions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_workflow_step_executions (
    id bigint NOT NULL,
    completed_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone NOT NULL,
    error_message text,
    input_data text,
    organization_id bigint,
    output_data text,
    related_resource_id bigint,
    related_resource_type character varying(255),
    started_at timestamp(6) without time zone,
    status character varying(255) NOT NULL,
    step_name character varying(255) NOT NULL,
    step_number integer NOT NULL,
    step_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    workflow_execution_id bigint NOT NULL,
    CONSTRAINT case_workflow_step_executions_status_check CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'RUNNING'::character varying, 'PAUSED'::character varying, 'WAITING_USER'::character varying, 'COMPLETED'::character varying, 'FAILED'::character varying])::text[]))),
    CONSTRAINT case_workflow_step_executions_step_type_check CHECK (((step_type)::text = ANY ((ARRAY['DISPLAY'::character varying, 'SYNTHESIS'::character varying, 'GENERATION'::character varying, 'INTEGRATION'::character varying, 'ACTION'::character varying])::text[])))
);


--
-- Name: case_workflow_step_executions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_workflow_step_executions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_workflow_step_executions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: case_workflow_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.case_workflow_templates (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    is_system boolean,
    name character varying(255) NOT NULL,
    organization_id bigint,
    steps_config text NOT NULL,
    template_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    created_by bigint,
    CONSTRAINT case_workflow_templates_template_type_check CHECK (((template_type)::text = ANY ((ARRAY['COMPLAINT_RESPONSE'::character varying, 'CONTRACT_REVIEW'::character varying, 'MOTION_OPPOSITION'::character varying, 'DISCOVERY_RESPONSE'::character varying, 'DUE_DILIGENCE'::character varying, 'CUSTOM'::character varying])::text[])))
);


--
-- Name: case_workflow_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.case_workflow_templates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.case_workflow_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: chronological_index; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.chronological_index (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    document_id bigint,
    event_type character varying(100) NOT NULL,
    event_date date NOT NULL,
    event_time time without time zone,
    title character varying(255) NOT NULL,
    description text,
    participants jsonb,
    location character varying(255),
    importance character varying(100),
    category character varying(100),
    outcome text,
    next_steps text,
    is_milestone boolean,
    created_by bigint,
    created_at timestamp without time zone
);


--
-- Name: chronological_index_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.chronological_index_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: chronological_index_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.chronological_index_id_seq OWNED BY public.chronological_index.id;


--
-- Name: citation_analyses; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.citation_analyses (
    id bigint NOT NULL,
    matter_id bigint NOT NULL,
    document_id bigint NOT NULL,
    citation_text character varying(500) NOT NULL,
    status character varying(100) NOT NULL,
    notes text,
    created_at timestamp without time zone
);


--
-- Name: citation_analyses_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.citation_analyses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: citation_analyses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.citation_analyses_id_seq OWNED BY public.citation_analyses.id;


--
-- Name: citation_cache; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.citation_cache (
    id bigint NOT NULL,
    citation character varying(500) NOT NULL,
    citation_type character varying(50),
    jurisdiction character varying(100),
    is_valid boolean,
    validation_data jsonb,
    currency_status character varying(50),
    last_checked timestamp without time zone,
    source character varying(100),
    created_at timestamp without time zone
);


--
-- Name: citation_cache_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.citation_cache_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: citation_cache_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.citation_cache_id_seq OWNED BY public.citation_cache.id;


--
-- Name: citation_library; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.citation_library (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    citation_string character varying(500) NOT NULL,
    case_name character varying(500),
    court character varying(200),
    decision_date date,
    docket_number character varying(100),
    shepardization_status character varying(100),
    last_shepardized_at timestamp without time zone,
    shepard_signal character varying(50),
    citing_cases_count integer,
    positive_treatment_count integer,
    negative_treatment_count integer,
    neutral_treatment_count integer,
    jurisdictions_covered jsonb,
    primary_jurisdiction character varying(100),
    multi_jurisdiction boolean,
    tags jsonb,
    notes text,
    is_favorite boolean,
    alert_on_new_treatment boolean,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: citation_library_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.citation_library_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: citation_library_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.citation_library_id_seq OWNED BY public.citation_library.id;


--
-- Name: client_case_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_case_summary (
    client_id bigint,
    client_name character varying(100) NOT NULL,
    client_type character varying(50),
    client_status character varying(50),
    total_cases bigint,
    active_cases bigint,
    closed_cases bigint,
    total_invoices bigint,
    total_billed numeric(32,2),
    last_case_created timestamp without time zone,
    last_invoice_created timestamp without time zone
);


--
-- Name: client_intake_submissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_intake_submissions (
    id bigint NOT NULL,
    first_name character varying(100) NOT NULL,
    last_name character varying(100) NOT NULL,
    email character varying(255) NOT NULL,
    phone character varying(20),
    practice_area character varying(100),
    case_description text,
    urgency character varying(100),
    company character varying(255),
    preferred_contact_method text,
    referred_by character varying(255),
    status character varying(100),
    notes text,
    assigned_to bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: client_intake_submissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.client_intake_submissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: client_intake_submissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.client_intake_submissions_id_seq OWNED BY public.client_intake_submissions.id;


--
-- Name: client_invoice_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_invoice_summary (
    client_id bigint,
    client_name character varying(100) NOT NULL,
    total_invoices bigint,
    total_billed numeric(32,2),
    total_paid numeric(32,2),
    total_outstanding numeric(32,2),
    last_invoice_date date
);


--
-- Name: client_onboarding_instances; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_onboarding_instances (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    client_id bigint NOT NULL,
    case_id bigint,
    status character varying(20),
    current_stage character varying(50),
    progress_percentage numeric(5,2),
    started_at timestamp without time zone,
    expected_completion_date date,
    completed_at timestamp without time zone,
    assigned_coordinator_id bigint,
    onboarding_data jsonb,
    notes text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: client_onboarding_instances_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.client_onboarding_instances_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: client_onboarding_instances_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.client_onboarding_instances_id_seq OWNED BY public.client_onboarding_instances.id;


--
-- Name: client_onboarding_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_onboarding_templates (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    practice_area character varying(100) NOT NULL,
    onboarding_stages jsonb NOT NULL,
    required_documents jsonb,
    welcome_materials jsonb,
    automated_tasks jsonb,
    notification_schedule jsonb,
    completion_criteria jsonb,
    estimated_duration_days integer,
    is_active boolean,
    usage_count integer,
    completion_rate numeric(5,2),
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: client_onboarding_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.client_onboarding_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: client_onboarding_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.client_onboarding_templates_id_seq OWNED BY public.client_onboarding_templates.id;


--
-- Name: client_portal_access_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_portal_access_log (
    id bigint NOT NULL,
    share_id bigint NOT NULL,
    accessed_at timestamp without time zone,
    ip_address character varying(45),
    user_agent text,
    action character varying(50),
    duration_seconds integer
);


--
-- Name: client_portal_access_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.client_portal_access_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: client_portal_access_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.client_portal_access_log_id_seq OWNED BY public.client_portal_access_log.id;


--
-- Name: client_research_shares; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.client_research_shares (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    client_user_id bigint,
    share_title character varying(255) NOT NULL,
    share_description text,
    original_research_session_id bigint,
    simplified_content text,
    faq_json jsonb,
    key_points jsonb,
    access_token character varying(100),
    is_password_protected boolean,
    password_hash character varying(255),
    allow_download boolean,
    allow_print boolean,
    expires_at timestamp without time zone,
    status character varying(100),
    created_at timestamp without time zone,
    last_accessed_at timestamp without time zone
);


--
-- Name: client_research_shares_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.client_research_shares_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: client_research_shares_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.client_research_shares_id_seq OWNED BY public.client_research_shares.id;


--
-- Name: clients; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.clients (
    id bigint NOT NULL,
    address character varying(255),
    created_at timestamp(6) without time zone,
    email character varying(100) NOT NULL,
    image_url character varying(255),
    name character varying(100) NOT NULL,
    organization_id bigint,
    phone character varying(30),
    status character varying(50),
    stripe_customer_id character varying(255),
    type character varying(50),
    user_id bigint
);


--
-- Name: clients_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.clients ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.clients_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: collection_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.collection_documents (
    id bigint NOT NULL,
    added_at timestamp(6) without time zone,
    added_by bigint,
    analysis_id bigint NOT NULL,
    notes text,
    organization_id bigint NOT NULL,
    collection_id bigint NOT NULL
);


--
-- Name: collection_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.collection_documents ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.collection_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: collection_search_cache; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.collection_search_cache (
    id bigint NOT NULL,
    collection_id bigint NOT NULL,
    user_id bigint NOT NULL,
    query character varying(500) NOT NULL,
    query_hash character varying(64) NOT NULL,
    expanded_query character varying(1000),
    results_json text,
    result_count integer DEFAULT 0,
    organization_id bigint,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    expires_at timestamp without time zone
);


--
-- Name: collection_search_cache_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.collection_search_cache_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: collection_search_cache_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.collection_search_cache_id_seq OWNED BY public.collection_search_cache.id;


--
-- Name: collection_search_history; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.collection_search_history (
    id bigint NOT NULL,
    collection_id bigint NOT NULL,
    user_id bigint NOT NULL,
    query character varying(500) NOT NULL,
    result_count integer DEFAULT 0,
    organization_id bigint,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


--
-- Name: collection_search_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.collection_search_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: collection_search_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.collection_search_history_id_seq OWNED BY public.collection_search_history.id;


--
-- Name: communication_logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.communication_logs (
    id bigint NOT NULL,
    appointment_id bigint,
    case_id bigint,
    channel character varying(20) NOT NULL,
    client_id bigint,
    content text,
    cost double precision,
    cost_currency character varying(3),
    created_at timestamp(6) without time zone NOT NULL,
    delivered_at timestamp(6) without time zone,
    direction character varying(10) NOT NULL,
    duration_seconds integer,
    error_code character varying(20),
    error_message character varying(500),
    from_address character varying(100) NOT NULL,
    organization_id bigint,
    sent_by_user_id bigint,
    sent_by_user_name character varying(100),
    status character varying(20) NOT NULL,
    subject character varying(255),
    template_code character varying(50),
    to_address character varying(100) NOT NULL,
    twilio_sid character varying(50),
    updated_at timestamp(6) without time zone,
    user_id bigint
);


--
-- Name: communication_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.communication_logs ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.communication_logs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: conflict_checks; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.conflict_checks (
    id bigint NOT NULL,
    auto_checked boolean,
    check_type character varying(50) NOT NULL,
    checked_at timestamp(6) without time zone,
    checked_by bigint,
    confidence_score numeric(5,2),
    created_at timestamp(6) without time zone,
    entity_id bigint NOT NULL,
    entity_type character varying(50) NOT NULL,
    expires_at timestamp(6) without time zone,
    organization_id bigint,
    resolution character varying(50),
    resolution_notes text,
    resolved_at timestamp(6) without time zone,
    resolved_by bigint,
    results text,
    search_parameters text,
    search_terms text NOT NULL,
    status character varying(50),
    updated_at timestamp(6) without time zone,
    waiver_document_path character varying(255)
);


--
-- Name: conflict_checks_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.conflict_checks ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.conflict_checks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: consultation_notifications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.consultation_notifications (
    id bigint NOT NULL,
    consultation_id bigint NOT NULL,
    notification_type character varying(30) NOT NULL,
    delivery_method character varying(20) NOT NULL,
    recipient_type character varying(20) NOT NULL,
    recipient_email character varying(255),
    recipient_phone character varying(30),
    message_subject character varying(255),
    message_content text,
    scheduled_time timestamp without time zone NOT NULL,
    sent_at timestamp without time zone,
    status character varying(20),
    delivery_attempts integer,
    error_message text,
    created_at timestamp without time zone
);


--
-- Name: consultation_notifications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.consultation_notifications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: consultation_notifications_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.consultation_notifications_id_seq OWNED BY public.consultation_notifications.id;


--
-- Name: consultations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.consultations (
    id bigint NOT NULL,
    lead_id bigint NOT NULL,
    attorney_id bigint,
    consultation_type character varying(20) NOT NULL,
    scheduled_datetime timestamp without time zone NOT NULL,
    duration_minutes integer,
    method character varying(20) NOT NULL,
    status character varying(20),
    location character varying(255),
    meeting_link character varying(500),
    phone_number character varying(30),
    confirmation_number character varying(20),
    preparation_notes text,
    outcome_notes text,
    follow_up_required boolean,
    follow_up_date timestamp without time zone,
    recording_path character varying(500),
    documents_shared jsonb,
    estimated_case_value numeric(10,2),
    consultation_fee numeric(8,2),
    fee_waived boolean,
    fee_waiver_reason text,
    scheduled_by bigint NOT NULL,
    conducted_by bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    completed_at timestamp without time zone
);


--
-- Name: consultations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.consultations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: consultations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.consultations_id_seq OWNED BY public.consultations.id;


--
-- Name: court_filing_systems; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.court_filing_systems (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    jurisdiction character varying(100) NOT NULL,
    court_name character varying(255) NOT NULL,
    system_type character varying(100) NOT NULL,
    api_endpoint character varying(500),
    authentication_method character varying(100) NOT NULL,
    configuration jsonb,
    is_active boolean,
    supported_document_types jsonb,
    filing_fees_structure jsonb,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: court_filing_systems_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.court_filing_systems_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: court_filing_systems_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.court_filing_systems_id_seq OWNED BY public.court_filing_systems.id;


--
-- Name: court_filings; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.court_filings (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    document_id bigint NOT NULL,
    court_system_id bigint NOT NULL,
    filing_type character varying(100) NOT NULL,
    filing_title character varying(255) NOT NULL,
    docket_number character varying(100),
    filing_date date,
    filing_time time without time zone,
    status character varying(100),
    confirmation_number character varying(100),
    receipt_url character varying(500),
    filing_fees numeric(10,2),
    payment_status character varying(100),
    error_message text,
    filed_by bigint,
    filed_at timestamp without time zone,
    created_at timestamp without time zone
);


--
-- Name: court_filings_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.court_filings_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: court_filings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.court_filings_id_seq OWNED BY public.court_filings.id;


--
-- Name: courts; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.courts (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    jurisdiction_id bigint NOT NULL,
    court_type character varying(100) NOT NULL,
    address text,
    phone character varying(50),
    website character varying(255),
    e_filing_system_id bigint,
    is_active boolean
);


--
-- Name: courts_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.courts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: courts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.courts_id_seq OWNED BY public.courts.id;


--
-- Name: crm_automation_rules; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.crm_automation_rules (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    trigger_type character varying(50) NOT NULL,
    trigger_conditions jsonb NOT NULL,
    actions jsonb NOT NULL,
    is_active boolean,
    execution_count integer,
    last_executed_at timestamp without time zone,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: crm_automation_rules_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.crm_automation_rules_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: crm_automation_rules_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.crm_automation_rules_id_seq OWNED BY public.crm_automation_rules.id;


--
-- Name: crm_email_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.crm_email_templates (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    subject character varying(255) NOT NULL,
    body_text text,
    body_html text,
    template_type character varying(50),
    variables jsonb,
    is_active boolean,
    usage_count integer,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: crm_email_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.crm_email_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: crm_email_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.crm_email_templates_id_seq OWNED BY public.crm_email_templates.id;


--
-- Name: crm_settings; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.crm_settings (
    id bigint NOT NULL,
    setting_key character varying(100) NOT NULL,
    setting_value jsonb NOT NULL,
    setting_type character varying(50),
    description text,
    is_system boolean,
    updated_by bigint,
    updated_at timestamp without time zone,
    created_at timestamp without time zone
);


--
-- Name: crm_settings_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.crm_settings_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: crm_settings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.crm_settings_id_seq OWNED BY public.crm_settings.id;


--
-- Name: department_role_assignments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.department_role_assignments (
    id bigint NOT NULL,
    department_id bigint NOT NULL,
    user_id bigint NOT NULL,
    department_role character varying(100) NOT NULL,
    permissions jsonb,
    assigned_date timestamp without time zone,
    is_active boolean
);


--
-- Name: department_role_assignments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.department_role_assignments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: department_role_assignments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.department_role_assignments_id_seq OWNED BY public.department_role_assignments.id;


--
-- Name: deposition_prep_sessions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.deposition_prep_sessions (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    deponent_name character varying(255),
    deposition_date date,
    deposition_type character varying(100),
    documents_analyzed jsonb,
    total_documents integer,
    contradictions_found integer,
    timeline_events_extracted integer,
    questions_generated integer,
    status character varying(100),
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: deposition_prep_sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.deposition_prep_sessions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: deposition_prep_sessions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.deposition_prep_sessions_id_seq OWNED BY public.deposition_prep_sessions.id;


--
-- Name: deposition_questions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.deposition_questions (
    id bigint NOT NULL,
    session_id bigint NOT NULL,
    question_text text NOT NULL,
    question_category character varying(100),
    question_type character varying(50),
    based_on_document_id text,
    based_on_evidence text,
    expected_answer text,
    question_order integer,
    is_follow_up boolean,
    parent_question_id bigint,
    is_included boolean,
    user_modified_text text,
    notes text,
    created_at timestamp without time zone
);


--
-- Name: deposition_questions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.deposition_questions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: deposition_questions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.deposition_questions_id_seq OWNED BY public.deposition_questions.id;


--
-- Name: discovery_drafts; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.discovery_drafts (
    id bigint NOT NULL,
    matter_id bigint NOT NULL,
    draft_type integer NOT NULL,
    draft_body text NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: discovery_drafts_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.discovery_drafts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: discovery_drafts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.discovery_drafts_id_seq OWNED BY public.discovery_drafts.id;


--
-- Name: doc_automation_categories; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_automation_categories (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    icon character varying(50),
    sort_order integer,
    is_active boolean,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: doc_automation_categories_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.doc_automation_categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: doc_automation_categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.doc_automation_categories_id_seq OWNED BY public.doc_automation_categories.id;


--
-- Name: doc_automation_fields; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_automation_fields (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    field_name character varying(100) NOT NULL,
    field_label character varying(255) NOT NULL,
    field_type text NOT NULL,
    data_source character varying(100) NOT NULL,
    is_required boolean,
    default_value character varying(500),
    validation_rules jsonb,
    help_text text,
    field_order integer,
    is_active boolean,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: doc_automation_fields_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.doc_automation_fields_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: doc_automation_fields_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.doc_automation_fields_id_seq OWNED BY public.doc_automation_fields.id;


--
-- Name: doc_automation_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_automation_permissions (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    user_id bigint,
    role_name character varying(50),
    can_view boolean,
    can_use boolean,
    can_edit boolean,
    can_delete boolean,
    can_share boolean,
    max_usage_per_month integer,
    allowed_case_types jsonb,
    granted_by bigint NOT NULL,
    granted_at timestamp without time zone,
    expires_at timestamp without time zone,
    is_active boolean,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: doc_automation_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.doc_automation_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: doc_automation_permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.doc_automation_permissions_id_seq OWNED BY public.doc_automation_permissions.id;


--
-- Name: doc_automation_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_automation_templates (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    category_id bigint NOT NULL,
    content text NOT NULL,
    sample_data jsonb,
    output_format character varying(100),
    is_active boolean,
    is_public boolean,
    tags jsonb,
    usage_count integer,
    version integer,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: doc_automation_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.doc_automation_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: doc_automation_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.doc_automation_templates_id_seq OWNED BY public.doc_automation_templates.id;


--
-- Name: doc_automation_user_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_automation_user_permissions (
    template_id bigint,
    user_id bigint,
    first_name character varying(255),
    last_name character varying(255),
    user_role character varying(255),
    can_view integer,
    can_use integer,
    can_edit integer,
    can_delete integer,
    can_share integer,
    template_name character varying(255) NOT NULL,
    template_active boolean
);


--
-- Name: doc_generation_analytics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_generation_analytics (
    template_id bigint,
    template_name character varying(255) NOT NULL,
    category_name character varying(100),
    total_generations bigint,
    successful_generations bigint,
    failed_generations bigint,
    avg_processing_time_ms numeric(14,4),
    avg_output_size_bytes numeric(14,4),
    unique_users bigint,
    unique_cases bigint,
    first_used timestamp without time zone,
    last_used timestamp without time zone,
    usage_last_30_days bigint,
    usage_last_7_days bigint
);


--
-- Name: doc_generation_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.doc_generation_log (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    generated_document_id bigint NOT NULL,
    case_id bigint,
    client_id bigint,
    template_version integer NOT NULL,
    output_format character varying(100) NOT NULL,
    generation_data jsonb,
    generation_errors jsonb,
    processing_time_ms integer,
    template_size_bytes integer,
    output_size_bytes integer,
    generated_by bigint NOT NULL,
    generation_source character varying(100),
    user_ip_address character varying(45),
    user_agent text,
    status character varying(100),
    failure_reason text,
    created_at timestamp without time zone
);


--
-- Name: doc_generation_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.doc_generation_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: doc_generation_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.doc_generation_log_id_seq OWNED BY public.doc_generation_log.id;


--
-- Name: document_access_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_access_log (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    user_id bigint NOT NULL,
    access_type character varying(50) NOT NULL,
    access_time timestamp without time zone,
    ip_address character varying(45),
    user_agent text
);


--
-- Name: document_access_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_access_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_access_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_access_log_id_seq OWNED BY public.document_access_log.id;


--
-- Name: document_annotations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_annotations (
    id character varying(100) NOT NULL,
    document_id bigint NOT NULL,
    user_id bigint NOT NULL,
    annotation_type character varying(100) NOT NULL,
    content text NOT NULL,
    category character varying(100) NOT NULL,
    tags jsonb,
    is_public boolean,
    position_data jsonb,
    precedent_value integer,
    strategic_importance integer,
    likes integer,
    dislikes integer,
    related_cases jsonb,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: document_categories; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_categories (
    id bigint NOT NULL,
    name character varying(50) NOT NULL,
    description character varying(200),
    color character varying(20),
    icon character varying(50),
    created_at timestamp without time zone
);


--
-- Name: document_categories_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_categories_id_seq OWNED BY public.document_categories.id;


--
-- Name: document_chunks; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_chunks (
    id bigint NOT NULL,
    analysis_id bigint NOT NULL,
    chunk_index integer NOT NULL,
    collection_id bigint,
    content text NOT NULL,
    created_at timestamp(6) without time zone,
    embedding text,
    embedding_model character varying(255),
    organization_id bigint NOT NULL,
    section_title character varying(255),
    token_count integer
);


--
-- Name: document_chunks_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.document_chunks ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.document_chunks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: document_collections; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_collections (
    id bigint NOT NULL,
    case_id bigint,
    color character varying(255),
    created_at timestamp(6) without time zone,
    description text,
    icon character varying(255),
    is_archived boolean NOT NULL,
    name character varying(255) NOT NULL,
    organization_id bigint,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL
);


--
-- Name: document_collections_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.document_collections ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.document_collections_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: document_contradictions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_contradictions (
    id bigint NOT NULL,
    session_id bigint NOT NULL,
    contradiction_type character varying(100),
    severity character varying(100) NOT NULL,
    document_1_id text,
    document_1_excerpt text,
    document_1_page character varying(50),
    document_2_id text,
    document_2_excerpt text,
    document_2_page character varying(50),
    contradiction_explanation text,
    potential_resolution text,
    is_acknowledged boolean,
    user_notes text,
    created_at timestamp without time zone
);


--
-- Name: document_contradictions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_contradictions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_contradictions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_contradictions_id_seq OWNED BY public.document_contradictions.id;


--
-- Name: document_deadlines; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_deadlines (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    case_id bigint,
    deadline_type integer NOT NULL,
    title character varying(255) NOT NULL,
    description text,
    due_date timestamp without time zone NOT NULL,
    priority character varying(100),
    is_court_imposed boolean,
    court_rule_reference character varying(255),
    status character varying(100),
    assigned_to bigint,
    reminder_sent boolean,
    created_by bigint,
    created_at timestamp without time zone
);


--
-- Name: document_deadlines_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_deadlines_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_deadlines_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_deadlines_id_seq OWNED BY public.document_deadlines.id;


--
-- Name: document_embeddings; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_embeddings (
    id bigint NOT NULL,
    document_id bigint,
    document_name character varying(255),
    document_path character varying(500),
    user_id bigint NOT NULL,
    organization_id bigint,
    is_firm_shared boolean,
    document_type character varying(50),
    practice_area character varying(100),
    jurisdiction character varying(100),
    case_id bigint,
    chunk_text text NOT NULL,
    chunk_index integer,
    total_chunks integer,
    pinecone_id character varying(255),
    embedding_dimension integer,
    metadata jsonb,
    extracted_entities jsonb,
    embedding_status character varying(20),
    error_message text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: document_embeddings_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_embeddings_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_embeddings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_embeddings_id_seq OWNED BY public.document_embeddings.id;


--
-- Name: document_generations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_generations (
    id text NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    session_id text,
    template_id bigint,
    document_type character varying(100) NOT NULL,
    jurisdiction character varying(100) NOT NULL,
    input_context jsonb,
    generated_content text,
    content_length integer,
    generation_method character varying(50),
    ai_model_used character varying(100),
    processing_time_seconds numeric(10,3),
    quality_score numeric(5,2),
    validation_results jsonb,
    user_feedback jsonb,
    generated_at timestamp without time zone,
    is_edited boolean,
    last_edited_at timestamp without time zone,
    last_edited_by bigint,
    edit_count integer
);


--
-- Name: document_relationships; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_relationships (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    created_by bigint,
    description character varying(255),
    organization_id bigint,
    relationship_type character varying(50) NOT NULL,
    source_analysis_id bigint NOT NULL,
    target_analysis_id bigint NOT NULL
);


--
-- Name: document_relationships_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.document_relationships ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.document_relationships_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: document_routing; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_routing (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    routing_type character varying(100) NOT NULL,
    from_user_id bigint,
    to_user_id bigint,
    to_role character varying(100),
    routing_reason text,
    instructions text,
    priority character varying(100),
    status character varying(100),
    routed_at timestamp without time zone,
    received_at timestamp without time zone,
    completed_at timestamp without time zone,
    response text
);


--
-- Name: document_routing_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_routing_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_routing_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_routing_id_seq OWNED BY public.document_routing.id;


--
-- Name: document_statuses; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_statuses (
    id bigint NOT NULL,
    name character varying(20) NOT NULL,
    description character varying(100),
    color character varying(20),
    is_final boolean,
    created_at timestamp without time zone
);


--
-- Name: document_statuses_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_statuses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_statuses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_statuses_id_seq OWNED BY public.document_statuses.id;


--
-- Name: document_tags; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_tags (
    document_id bigint NOT NULL,
    tag character varying(100) NOT NULL
);


--
-- Name: document_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_templates (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    category integer NOT NULL,
    practice_area character varying(100),
    jurisdiction character varying(100),
    template_content text,
    fields jsonb,
    is_active boolean,
    is_public boolean,
    organization_id bigint,
    created_by bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: document_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_templates_id_seq OWNED BY public.document_templates.id;


--
-- Name: document_versions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_versions (
    id bigint NOT NULL,
    version_number integer NOT NULL,
    file_name character varying(255) NOT NULL,
    file_path character varying(255) NOT NULL,
    mime_type character varying(100),
    file_size bigint,
    changes text,
    document_id bigint NOT NULL,
    uploaded_by bigint,
    uploaded_at timestamp without time zone
);


--
-- Name: document_versions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_versions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_versions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_versions_id_seq OWNED BY public.document_versions.id;


--
-- Name: document_visibility_overrides; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_visibility_overrides (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    user_id bigint,
    role_id bigint,
    access_type character varying(50) NOT NULL,
    granted_by bigint NOT NULL,
    granted_at timestamp without time zone,
    expires_at timestamp without time zone,
    reason text
);


--
-- Name: document_visibility_overrides_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_visibility_overrides_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_visibility_overrides_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_visibility_overrides_id_seq OWNED BY public.document_visibility_overrides.id;


--
-- Name: document_workflow_instances; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.document_workflow_instances (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    workflow_id bigint NOT NULL,
    current_step_id bigint,
    status character varying(100),
    started_at timestamp without time zone,
    completed_at timestamp without time zone
);


--
-- Name: document_workflow_instances_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.document_workflow_instances_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: document_workflow_instances_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.document_workflow_instances_id_seq OWNED BY public.document_workflow_instances.id;


--
-- Name: documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.documents (
    id bigint NOT NULL,
    case_id bigint,
    document_category character varying(255),
    description character varying(1000),
    file_name character varying(255) NOT NULL,
    file_size bigint,
    mime_type character varying(255),
    organization_id bigint NOT NULL,
    title character varying(255) NOT NULL,
    document_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    uploaded_at timestamp(6) without time zone,
    uploaded_by bigint,
    file_path character varying(255) NOT NULL,
    CONSTRAINT documents_document_category_check CHECK (((document_category)::text = ANY ((ARRAY['PUBLIC'::character varying, 'INTERNAL'::character varying, 'CONFIDENTIAL'::character varying, 'ATTORNEY_CLIENT_PRIVILEGE'::character varying])::text[]))),
    CONSTRAINT documents_document_type_check CHECK (((document_type)::text = ANY ((ARRAY['CONTRACT'::character varying, 'PLEADING'::character varying, 'EVIDENCE'::character varying, 'CORRESPONDENCE'::character varying, 'MOTION'::character varying, 'ORDER'::character varying, 'OTHER'::character varying])::text[])))
);


--
-- Name: documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.documents ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: documentversion; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.documentversion (
    id bigint NOT NULL,
    changes character varying(255),
    documentid bigint NOT NULL,
    filename character varying(255) NOT NULL,
    filesize bigint,
    filetype character varying(255),
    fileurl character varying(255) NOT NULL,
    organization_id bigint NOT NULL,
    uploadedat timestamp(6) without time zone,
    uploadedby bigint,
    versionnumber integer NOT NULL
);


--
-- Name: documentversion_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.documentversion ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.documentversion_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: drafting_sessions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.drafting_sessions (
    id text NOT NULL,
    user_id bigint NOT NULL,
    document_type character varying(100) NOT NULL,
    jurisdiction character varying(100) NOT NULL,
    workflow_type character varying(100) NOT NULL,
    session_status character varying(50),
    workflow_state jsonb,
    context_data jsonb,
    current_step_index integer,
    total_steps integer,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    completed_at timestamp without time zone,
    expires_at timestamp without time zone
);


--
-- Name: email_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.email_templates (
    id bigint NOT NULL,
    body_template text NOT NULL,
    created_at timestamp(6) without time zone,
    description character varying(255),
    event_type character varying(255) NOT NULL,
    is_active boolean NOT NULL,
    is_default boolean NOT NULL,
    name character varying(255) NOT NULL,
    organization_id bigint,
    subject character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: email_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.email_templates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.email_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: esignature_audit_trail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esignature_audit_trail (
    id bigint NOT NULL,
    esignature_request_id bigint NOT NULL,
    recipient_id bigint,
    event_type character varying(100) NOT NULL,
    event_description text,
    event_source character varying(100) NOT NULL,
    ip_address character varying(45),
    user_agent text,
    geolocation jsonb,
    device_info jsonb,
    provider character varying(100),
    provider_event_id character varying(255),
    provider_raw_data jsonb,
    event_data jsonb,
    error_code character varying(50),
    error_message text,
    event_timestamp timestamp without time zone,
    created_at timestamp without time zone
);


--
-- Name: esignature_audit_trail_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esignature_audit_trail_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: esignature_audit_trail_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.esignature_audit_trail_id_seq OWNED BY public.esignature_audit_trail.id;


--
-- Name: esignature_audit_view; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esignature_audit_view (
    id bigint,
    esignature_request_id bigint NOT NULL,
    request_subject character varying(255),
    request_status character varying(100),
    recipient_id bigint,
    recipient_name character varying(255),
    recipient_email character varying(255),
    event_type character varying(100) NOT NULL,
    event_description text,
    event_source character varying(100) NOT NULL,
    provider character varying(100),
    ip_address character varying(45),
    event_timestamp timestamp without time zone,
    created_at timestamp without time zone
);


--
-- Name: esignature_recipients; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esignature_recipients (
    id bigint NOT NULL,
    esignature_request_id bigint NOT NULL,
    recipient_name character varying(255) NOT NULL,
    recipient_email character varying(255) NOT NULL,
    recipient_phone character varying(50),
    recipient_type integer,
    signing_order integer,
    role_name character varying(100),
    access_code character varying(50),
    host_name character varying(255),
    status character varying(100),
    delivery_method character varying(100),
    sent_at timestamp without time zone,
    delivered_at timestamp without time zone,
    viewed_at timestamp without time zone,
    signed_at timestamp without time zone,
    declined_at timestamp without time zone,
    decline_reason text,
    signature_ip_address character varying(45),
    signature_user_agent text,
    signature_geolocation jsonb,
    provider_recipient_id character varying(255),
    provider_metadata jsonb,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: esignature_recipients_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esignature_recipients_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: esignature_recipients_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.esignature_recipients_id_seq OWNED BY public.esignature_recipients.id;


--
-- Name: esignature_requests; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esignature_requests (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    case_id bigint,
    client_id bigint,
    provider character varying(100),
    provider_envelope_id character varying(255),
    provider_account_id character varying(255),
    subject character varying(255) NOT NULL,
    message text,
    status character varying(100),
    sent_at timestamp without time zone,
    expires_at timestamp without time zone,
    completed_at timestamp without time zone,
    signing_order character varying(100),
    enable_reminders boolean,
    reminder_frequency_days integer,
    require_id_verification boolean,
    enable_sms_auth boolean,
    total_recipients integer,
    signed_recipients integer,
    declined_recipients integer,
    custom_fields jsonb,
    provider_metadata jsonb,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: esignature_requests_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esignature_requests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: esignature_requests_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.esignature_requests_id_seq OWNED BY public.esignature_requests.id;


--
-- Name: events; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.events (
    id bigint NOT NULL,
    type character varying(50) NOT NULL,
    description character varying(255) NOT NULL
);


--
-- Name: events_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: events_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.events_id_seq OWNED BY public.events.id;


--
-- Name: expense; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.expense (
    id bigint NOT NULL,
    amount numeric(19,4) NOT NULL,
    currency character varying(3),
    date timestamp without time zone NOT NULL,
    description text,
    tax numeric(19,4),
    client_id bigint NOT NULL,
    invoice_id bigint,
    legal_case_id bigint,
    category_id bigint NOT NULL,
    vendor_id bigint NOT NULL,
    receipt_id bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: expense_categories; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.expense_categories (
    id bigint NOT NULL,
    color character varying(20) NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    name character varying(100) NOT NULL,
    organization_id bigint,
    updated_at timestamp(6) without time zone NOT NULL,
    parent_id bigint
);


--
-- Name: expense_categories_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.expense_categories ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.expense_categories_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: expense_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.expense_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: expense_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.expense_id_seq OWNED BY public.expense.id;


--
-- Name: expensecategory; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.expensecategory (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    color character varying(20) NOT NULL,
    parent_id bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: expensecategory_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.expensecategory_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: expensecategory_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.expensecategory_id_seq OWNED BY public.expensecategory.id;


--
-- Name: expenses; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.expenses (
    id bigint NOT NULL,
    amount numeric(19,4) NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    currency character varying(3) NOT NULL,
    date timestamp(6) without time zone NOT NULL,
    description text,
    organization_id bigint NOT NULL,
    tax numeric(19,4),
    updated_at timestamp(6) without time zone NOT NULL,
    category_id bigint NOT NULL,
    client_id bigint NOT NULL,
    invoice_id bigint,
    legal_case_id bigint,
    receipt_id bigint,
    vendor_id bigint NOT NULL
);


--
-- Name: expenses_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.expenses ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.expenses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: fee_agreement_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fee_agreement_templates (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    practice_area character varying(100) NOT NULL,
    fee_structure character varying(30) NOT NULL,
    default_terms jsonb NOT NULL,
    variable_fields jsonb,
    approval_workflow jsonb,
    template_content text,
    is_active boolean,
    requires_attorney_approval boolean,
    auto_calculate_fees boolean,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: fee_agreement_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fee_agreement_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: fee_agreement_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.fee_agreement_templates_id_seq OWNED BY public.fee_agreement_templates.id;


--
-- Name: file_access_logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_access_logs (
    id bigint NOT NULL,
    access_method character varying(50),
    accessed_at timestamp(6) without time zone NOT NULL,
    action_type character varying(255) NOT NULL,
    bytes_transferred bigint,
    download_success boolean NOT NULL,
    error_message character varying(500),
    file_id bigint NOT NULL,
    file_version integer,
    ip_address character varying(45),
    organization_id bigint NOT NULL,
    referrer_url character varying(500),
    request_duration_ms bigint,
    session_id character varying(100),
    share_token character varying(100),
    user_agent character varying(500),
    user_id bigint,
    CONSTRAINT file_access_logs_action_type_check CHECK (((action_type)::text = ANY ((ARRAY['VIEW'::character varying, 'DOWNLOAD'::character varying, 'UPLOAD'::character varying, 'EDIT'::character varying, 'DELETE'::character varying, 'SHARE'::character varying, 'COMMENT'::character varying, 'TAG'::character varying, 'VERSION_CREATE'::character varying, 'VERSION_DOWNLOAD'::character varying, 'VERSION_RESTORE'::character varying, 'VERSION_DELETE'::character varying, 'PERMISSION_GRANT'::character varying])::text[])))
);


--
-- Name: file_access_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_access_logs ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_access_logs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: file_comments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_comments (
    id bigint NOT NULL,
    content text NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    created_by bigint NOT NULL,
    file_id bigint NOT NULL,
    is_deleted boolean NOT NULL,
    is_internal boolean NOT NULL,
    organization_id bigint NOT NULL,
    parent_comment_id bigint,
    updated_at timestamp(6) without time zone NOT NULL
);


--
-- Name: file_comments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_comments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_comments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: file_item_tags; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_item_tags (
    file_id bigint NOT NULL,
    tag_id bigint NOT NULL
);


--
-- Name: file_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_items (
    id bigint NOT NULL,
    case_id bigint,
    checksum character varying(64),
    client_access_expires timestamp(6) without time zone,
    created_at timestamp(6) without time zone NOT NULL,
    created_by bigint NOT NULL,
    is_deleted boolean NOT NULL,
    deleted_at timestamp(6) without time zone,
    department_id bigint,
    document_category character varying(50),
    document_status character varying(20),
    extension character varying(10),
    file_path character varying(500) NOT NULL,
    folder_id bigint,
    metadata text,
    mime_type character varying(100),
    name character varying(255) NOT NULL,
    organization_id bigint NOT NULL,
    original_name character varying(255) NOT NULL,
    practice_area character varying(100),
    shared_with_client boolean NOT NULL,
    size bigint NOT NULL,
    is_starred boolean DEFAULT false NOT NULL,
    updated_at timestamp(6) without time zone NOT NULL,
    version integer NOT NULL
);


--
-- Name: file_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: file_metadata; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_metadata (
    file_id bigint NOT NULL,
    meta_key character varying(255) NOT NULL,
    meta_value text
);


--
-- Name: file_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_permissions (
    id bigint NOT NULL,
    expires_at timestamp(6) without time zone,
    file_id bigint NOT NULL,
    granted_at timestamp(6) without time zone NOT NULL,
    granted_by bigint,
    is_revoked boolean NOT NULL,
    notes text,
    organization_id bigint,
    permission_type character varying(255) NOT NULL,
    revoked_at timestamp(6) without time zone,
    revoked_by bigint,
    user_id bigint NOT NULL,
    CONSTRAINT file_permissions_permission_type_check CHECK (((permission_type)::text = ANY ((ARRAY['VIEW'::character varying, 'DOWNLOAD'::character varying, 'EDIT'::character varying, 'DELETE'::character varying, 'SHARE'::character varying, 'ADMIN'::character varying])::text[])))
);


--
-- Name: file_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: file_shares; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_shares (
    id bigint NOT NULL,
    access_level character varying(255) NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    created_by bigint NOT NULL,
    download_count integer NOT NULL,
    expires_at timestamp(6) without time zone,
    file_id bigint NOT NULL,
    is_active boolean NOT NULL,
    last_accessed_at timestamp(6) without time zone,
    max_downloads integer,
    organization_id bigint NOT NULL,
    password_hash character varying(255),
    share_token character varying(100),
    share_type character varying(255) NOT NULL,
    shared_with_email character varying(255),
    shared_with_user_id bigint,
    watermark_text character varying(255),
    CONSTRAINT file_shares_access_level_check CHECK (((access_level)::text = ANY ((ARRAY['VIEW_ONLY'::character varying, 'DOWNLOAD'::character varying, 'COMMENT'::character varying, 'EDIT'::character varying])::text[]))),
    CONSTRAINT file_shares_share_type_check CHECK (((share_type)::text = ANY ((ARRAY['INTERNAL'::character varying, 'EXTERNAL'::character varying, 'PUBLIC_LINK'::character varying])::text[])))
);


--
-- Name: file_shares_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_shares ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_shares_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: file_tags; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_tags (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    created_by bigint NOT NULL,
    file_id bigint NOT NULL,
    is_system_tag boolean NOT NULL,
    organization_id bigint NOT NULL,
    tag_category character varying(50),
    tag_color character varying(20),
    tag_name character varying(100) NOT NULL
);


--
-- Name: file_tags_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_tags ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_tags_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: file_versions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.file_versions (
    id bigint NOT NULL,
    comment text,
    checksum character varying(64),
    created_by bigint NOT NULL,
    file_id bigint NOT NULL,
    file_name character varying(255) NOT NULL,
    file_path character varying(500) NOT NULL,
    size bigint NOT NULL,
    is_current boolean NOT NULL,
    is_deleted boolean NOT NULL,
    mime_type character varying(100),
    organization_id bigint,
    uploaded_at timestamp(6) without time zone NOT NULL,
    uploaded_by bigint NOT NULL,
    version_number integer NOT NULL
);


--
-- Name: file_versions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.file_versions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.file_versions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: financial_access_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.financial_access_permissions (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    invoice_id bigint,
    permission_type character varying(50) NOT NULL,
    granted_by bigint NOT NULL,
    granted_at timestamp without time zone,
    expires_at timestamp without time zone,
    notes text
);


--
-- Name: financial_access_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.financial_access_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: financial_access_permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.financial_access_permissions_id_seq OWNED BY public.financial_access_permissions.id;


--
-- Name: folders; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.folders (
    id bigint NOT NULL,
    case_id bigint,
    created_at timestamp(6) without time zone NOT NULL,
    created_by bigint NOT NULL,
    deleted boolean NOT NULL,
    department_id bigint,
    folder_type character varying(50),
    is_template boolean NOT NULL,
    name character varying(255) NOT NULL,
    organization_id bigint,
    parent_folder_id bigint,
    practice_area character varying(100),
    updated_at timestamp(6) without time zone NOT NULL
);


--
-- Name: folders_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.folders ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.folders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: generated_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.generated_documents (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    source_type character varying(20) NOT NULL,
    source_id bigint NOT NULL,
    document_name character varying(200) NOT NULL,
    file_path character varying(500),
    file_size_bytes bigint,
    mime_type character varying(100),
    generation_status character varying(20),
    merge_data jsonb,
    generated_by bigint NOT NULL,
    reviewed_by bigint,
    reviewed_at timestamp without time zone,
    approval_status character varying(20),
    approval_notes text,
    sent_to_client boolean,
    sent_at timestamp without time zone,
    delivery_method character varying(20),
    generation_time_ms integer,
    error_message text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: generated_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.generated_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: generated_documents_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.generated_documents_id_seq OWNED BY public.generated_documents.id;


--
-- Name: hearing_assistant_queries; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.hearing_assistant_queries (
    id bigint NOT NULL,
    session_id bigint NOT NULL,
    query_text text NOT NULL,
    query_timestamp timestamp without time zone,
    response_text text,
    response_citations jsonb,
    response_time_ms integer,
    hearing_context text,
    was_helpful boolean,
    bookmarked boolean
);


--
-- Name: hearing_assistant_queries_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.hearing_assistant_queries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: hearing_assistant_queries_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.hearing_assistant_queries_id_seq OWNED BY public.hearing_assistant_queries.id;


--
-- Name: hearing_assistant_sessions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.hearing_assistant_sessions (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    hearing_type character varying(100),
    hearing_date date,
    court_name character varying(200),
    judge_name character varying(255),
    session_start timestamp without time zone,
    session_end timestamp without time zone,
    total_queries integer,
    transcript_segments jsonb,
    created_at timestamp without time zone
);


--
-- Name: hearing_assistant_sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.hearing_assistant_sessions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: hearing_assistant_sessions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.hearing_assistant_sessions_id_seq OWNED BY public.hearing_assistant_sessions.id;


--
-- Name: intake_forms; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.intake_forms (
    id bigint NOT NULL,
    auto_assign_to bigint,
    conversion_rate numeric(5,2),
    created_at timestamp(6) without time zone,
    created_by bigint NOT NULL,
    description text,
    email_template_id bigint,
    form_config text NOT NULL,
    form_type character varying(50),
    is_public boolean,
    name character varying(100) NOT NULL,
    organization_id bigint,
    practice_area character varying(100),
    public_url character varying(255),
    published_at timestamp(6) without time zone,
    redirect_url character varying(255),
    status character varying(20),
    submission_count integer,
    success_message text,
    updated_at timestamp(6) without time zone,
    version integer
);


--
-- Name: intake_forms_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.intake_forms ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.intake_forms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: intake_submissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.intake_submissions (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    form_id bigint,
    ip_address character varying(45),
    lead_id bigint,
    notes text,
    organization_id bigint,
    priority_score integer,
    referrer character varying(255),
    reviewed_at timestamp(6) without time zone,
    reviewed_by bigint,
    status character varying(50),
    submission_data text NOT NULL,
    tags text,
    updated_at timestamp(6) without time zone,
    user_agent text
);


--
-- Name: intake_submissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.intake_submissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.intake_submissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: invoice_item; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_item (
    id bigint NOT NULL,
    amount double precision,
    description character varying(255),
    quantity integer,
    total double precision,
    unit_price double precision
);


--
-- Name: invoice_item_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.invoice_item_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: invoice_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.invoice_item_id_seq OWNED BY public.invoice_item.id;


--
-- Name: invoice_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_items (
    id bigint NOT NULL,
    amount double precision,
    description character varying(255),
    organization_id bigint,
    quantity integer,
    total double precision,
    unitprice double precision
);


--
-- Name: invoice_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.invoice_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.invoice_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: invoice_line_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_line_items (
    id bigint NOT NULL,
    amount numeric(15,2) NOT NULL,
    category character varying(50),
    created_at timestamp(6) without time zone,
    description character varying(500) NOT NULL,
    line_order integer NOT NULL,
    organization_id bigint,
    quantity numeric(10,2) NOT NULL,
    service_date date,
    unit_price numeric(15,2) NOT NULL,
    updated_at timestamp(6) without time zone,
    invoice_id bigint NOT NULL
);


--
-- Name: invoice_line_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.invoice_line_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.invoice_line_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: invoice_payments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_payments (
    id bigint NOT NULL,
    invoice_id bigint NOT NULL,
    organization_id bigint,
    payment_date date NOT NULL,
    amount numeric(10,2) NOT NULL,
    payment_method character varying(50) NOT NULL,
    reference_number character varying(100),
    notes text,
    created_by bigint,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


--
-- Name: invoice_payments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.invoice_payments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: invoice_payments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.invoice_payments_id_seq OWNED BY public.invoice_payments.id;


--
-- Name: invoice_reminders; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_reminders (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    message text,
    organization_id bigint,
    recipients text,
    reminder_type character varying(50) NOT NULL,
    scheduled_date date NOT NULL,
    scheduled_time time(6) without time zone,
    sent_at timestamp(6) without time zone,
    status character varying(20),
    subject character varying(255),
    updated_at timestamp(6) without time zone,
    created_by_workflow bigint,
    invoice_id bigint NOT NULL,
    CONSTRAINT invoice_reminders_reminder_type_check CHECK (((reminder_type)::text = ANY ((ARRAY['DUE_SOON'::character varying, 'OVERDUE'::character varying, 'PAYMENT_RECEIVED'::character varying, 'CUSTOM'::character varying])::text[]))),
    CONSTRAINT invoice_reminders_status_check CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'SENT'::character varying, 'CANCELLED'::character varying])::text[])))
);


--
-- Name: invoice_reminders_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.invoice_reminders ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.invoice_reminders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: invoice_statistics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_statistics (
    total_invoices bigint,
    paid_invoices bigint,
    pending_invoices bigint,
    overdue_invoices bigint,
    draft_invoices bigint,
    cancelled_invoices bigint,
    total_paid numeric(32,2),
    total_outstanding numeric(32,2),
    avg_payment_days numeric(12,4)
);


--
-- Name: invoice_template_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_template_items (
    id bigint NOT NULL,
    category character varying(50),
    created_at timestamp(6) without time zone,
    default_quantity numeric(10,2),
    default_unit_price numeric(15,2),
    description character varying(500) NOT NULL,
    is_optional boolean,
    organization_id bigint,
    sort_order integer,
    updated_at timestamp(6) without time zone,
    template_id bigint NOT NULL
);


--
-- Name: invoice_template_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.invoice_template_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.invoice_template_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: invoice_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_templates (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    currency_code character varying(3),
    description character varying(500),
    font_family character varying(50),
    footer_text text,
    header_text text,
    is_active boolean,
    is_default boolean,
    logo_position character varying(20),
    name character varying(100) NOT NULL,
    notes_template text,
    organization_id bigint,
    payment_terms integer,
    primary_color character varying(7),
    secondary_color character varying(7),
    tax_rate numeric(5,2),
    terms_and_conditions text,
    updated_at timestamp(6) without time zone,
    created_by bigint
);


--
-- Name: invoice_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.invoice_templates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.invoice_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: invoice_time_entries; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_time_entries (
    invoice_id bigint NOT NULL,
    time_entry_id bigint NOT NULL
);


--
-- Name: invoice_workflow_executions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_workflow_executions (
    id bigint NOT NULL,
    workflow_rule_id bigint,
    invoice_id bigint,
    executed_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    status character varying(20) NOT NULL,
    result_message text,
    organization_id bigint
);


--
-- Name: invoice_workflow_executions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.invoice_workflow_executions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: invoice_workflow_executions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.invoice_workflow_executions_id_seq OWNED BY public.invoice_workflow_executions.id;


--
-- Name: invoice_workflow_rules; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoice_workflow_rules (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description character varying(500),
    is_active boolean DEFAULT true,
    trigger_event character varying(50) NOT NULL,
    trigger_status character varying(20),
    days_before_due integer,
    days_after_due integer,
    action_type character varying(50) NOT NULL,
    action_config text,
    execution_time time without time zone,
    max_executions integer DEFAULT 1,
    organization_id bigint,
    created_by bigint,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


--
-- Name: invoice_workflow_rules_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.invoice_workflow_rules_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: invoice_workflow_rules_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.invoice_workflow_rules_id_seq OWNED BY public.invoice_workflow_rules.id;


--
-- Name: invoiceitem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoiceitem (
    id bigint NOT NULL,
    amount double precision,
    description character varying(255),
    quantity integer,
    total double precision,
    "unitPrice" double precision
);


--
-- Name: invoiceitem_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.invoiceitem_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: invoiceitem_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.invoiceitem_id_seq OWNED BY public.invoiceitem.id;


--
-- Name: invoices; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.invoices (
    id bigint NOT NULL,
    balance_due numeric(10,2),
    case_name character varying(255),
    client_id bigint NOT NULL,
    client_name character varying(255),
    created_at timestamp(6) without time zone,
    created_by bigint,
    due_date date NOT NULL,
    invoice_number character varying(255),
    issue_date date NOT NULL,
    last_payment_date date,
    legal_case_id bigint,
    notes character varying(1000),
    organization_id bigint,
    payment_status character varying(20),
    status character varying(255) NOT NULL,
    subtotal numeric(10,2) NOT NULL,
    tax_amount numeric(10,2),
    tax_rate numeric(5,2),
    total_amount numeric(10,2) NOT NULL,
    total_paid numeric(10,2),
    updated_at timestamp(6) without time zone,
    CONSTRAINT invoices_status_check CHECK (((status)::text = ANY ((ARRAY['DRAFT'::character varying, 'ISSUED'::character varying, 'PAID'::character varying, 'OVERDUE'::character varying, 'CANCELLED'::character varying, 'PENDING'::character varying])::text[])))
);


--
-- Name: invoices_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.invoices ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.invoices_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: judge_analytics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.judge_analytics (
    id bigint NOT NULL,
    judge_name character varying(255) NOT NULL,
    court character varying(200),
    jurisdiction character varying(100),
    ruling_patterns_json jsonb,
    avg_plaintiff_win_rate numeric(5,2),
    avg_defendant_win_rate numeric(5,2),
    motion_grant_rates jsonb,
    summary_judgment_grant_rate numeric(5,2),
    motion_to_dismiss_grant_rate numeric(5,2),
    case_type_statistics jsonb,
    total_cases_analyzed integer,
    data_source character varying(100),
    last_updated_at timestamp without time zone,
    created_at timestamp without time zone
);


--
-- Name: judge_analytics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.judge_analytics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: judge_analytics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.judge_analytics_id_seq OWNED BY public.judge_analytics.id;


--
-- Name: jurisdiction_comparisons; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.jurisdiction_comparisons (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    legal_issue character varying(500) NOT NULL,
    jurisdictions_array jsonb NOT NULL,
    practice_area character varying(100),
    comparison_matrix_json jsonb,
    key_differences jsonb,
    choice_of_law_recommendation text,
    forum_shopping_analysis text,
    recommended_jurisdiction character varying(100),
    recommendation_reasoning text,
    created_at timestamp without time zone
);


--
-- Name: jurisdiction_comparisons_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.jurisdiction_comparisons_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: jurisdiction_comparisons_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.jurisdiction_comparisons_id_seq OWNED BY public.jurisdiction_comparisons.id;


--
-- Name: jurisdictions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.jurisdictions (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    jurisdiction_type character varying(100) NOT NULL,
    parent_jurisdiction_id bigint,
    is_active boolean
);


--
-- Name: jurisdictions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.jurisdictions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: jurisdictions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.jurisdictions_id_seq OWNED BY public.jurisdictions.id;


--
-- Name: knowledge_insights; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.knowledge_insights (
    id character varying(100) NOT NULL,
    title character varying(255) NOT NULL,
    description text NOT NULL,
    category character varying(100) NOT NULL,
    related_documents jsonb,
    supporting_annotations jsonb,
    confidence integer NOT NULL,
    impact character varying(100) NOT NULL,
    is_actionable boolean,
    recommendations jsonb,
    created_at timestamp without time zone
);


--
-- Name: lead_activities; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lead_activities (
    id bigint NOT NULL,
    activity_date timestamp(6) without time zone,
    activity_type character varying(50) NOT NULL,
    billable_rate numeric(10,2),
    created_at timestamp(6) without time zone,
    created_by bigint NOT NULL,
    description text,
    duration_minutes integer,
    external_id character varying(100),
    follow_up_date timestamp(6) without time zone,
    is_billable boolean,
    lead_id bigint NOT NULL,
    metadata text,
    organization_id bigint NOT NULL,
    outcome character varying(100),
    related_document_id bigint,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: lead_activities_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.lead_activities ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.lead_activities_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: lead_pipeline_history; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lead_pipeline_history (
    id bigint NOT NULL,
    automated boolean,
    duration_in_previous_stage integer,
    from_stage_id bigint,
    lead_id bigint NOT NULL,
    moved_at timestamp(6) without time zone,
    moved_by bigint NOT NULL,
    notes text,
    organization_id bigint NOT NULL,
    to_stage_id bigint NOT NULL
);


--
-- Name: lead_pipeline_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.lead_pipeline_history ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.lead_pipeline_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: lead_qualification_assessments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lead_qualification_assessments (
    id bigint NOT NULL,
    lead_id bigint NOT NULL,
    workflow_id bigint NOT NULL,
    status character varying(20),
    overall_score numeric(5,2),
    completion_percentage numeric(5,2),
    completed_criteria integer,
    total_criteria integer,
    decision character varying(20),
    decision_reason text,
    follow_up_actions jsonb,
    scheduled_follow_up timestamp without time zone,
    assessment_date timestamp without time zone,
    assessed_by bigint NOT NULL,
    completed_at timestamp without time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: lead_qualification_assessments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.lead_qualification_assessments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: lead_qualification_assessments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.lead_qualification_assessments_id_seq OWNED BY public.lead_qualification_assessments.id;


--
-- Name: lead_scoring_configs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lead_scoring_configs (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    practice_area character varying(100),
    scoring_factors jsonb NOT NULL,
    is_active boolean,
    version integer,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: lead_scoring_configs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.lead_scoring_configs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: lead_scoring_configs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.lead_scoring_configs_id_seq OWNED BY public.lead_scoring_configs.id;


--
-- Name: lead_scoring_results; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lead_scoring_results (
    id bigint NOT NULL,
    lead_id bigint NOT NULL,
    scoring_config_id bigint,
    total_score integer NOT NULL,
    priority character varying(20) NOT NULL,
    confidence_level numeric(5,2),
    scoring_factors jsonb NOT NULL,
    recommendations jsonb,
    scored_at timestamp without time zone,
    scored_by character varying(50),
    is_current boolean
);


--
-- Name: lead_scoring_results_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.lead_scoring_results_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: lead_scoring_results_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.lead_scoring_results_id_seq OWNED BY public.lead_scoring_results.id;


--
-- Name: leads; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.leads (
    id bigint NOT NULL,
    assigned_to bigint,
    best_contact_time character varying(50),
    case_complexity character varying(20),
    client_budget_range character varying(50),
    communication_preference character varying(20),
    company character varying(100),
    competitor_firms text,
    consultation_date timestamp(6) without time zone,
    converted_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    email character varying(100) NOT NULL,
    estimated_case_value numeric(10,2),
    first_name character varying(100) NOT NULL,
    follow_up_date timestamp(6) without time zone,
    geographic_location character varying(100),
    initial_inquiry text,
    last_name character varying(100) NOT NULL,
    lead_quality character varying(20),
    lead_score integer,
    lost_reason character varying(255),
    marketing_campaign character varying(100),
    notes text,
    organization_id bigint,
    phone character varying(30),
    practice_area character varying(100),
    priority character varying(20),
    referral_quality_score integer,
    referral_source character varying(100),
    source character varying(50),
    status character varying(50),
    updated_at timestamp(6) without time zone,
    urgency_level character varying(20)
);


--
-- Name: leads_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.leads ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.leads_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: legal_cases; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_cases (
    id bigint NOT NULL,
    case_number character varying(255) NOT NULL,
    client_address character varying(255),
    client_email character varying(255) NOT NULL,
    client_id bigint,
    client_name character varying(255) NOT NULL,
    client_phone character varying(255),
    closed_date date,
    county_name character varying(255),
    courtroom character varying(255),
    created_at timestamp(6) without time zone NOT NULL,
    current_timeline_phase integer,
    description text,
    filing_date date,
    hourly_rate double precision,
    is_confidential boolean,
    judge_name character varying(255),
    next_hearing date,
    organization_id bigint,
    payment_status character varying(255),
    priority character varying(255),
    status character varying(255) NOT NULL,
    timeline_initialized boolean,
    title character varying(255) NOT NULL,
    total_amount double precision,
    total_hours double precision,
    trial_date date,
    type character varying(255),
    updated_at timestamp(6) without time zone,
    CONSTRAINT legal_cases_payment_status_check CHECK (((payment_status)::text = ANY ((ARRAY['PENDING'::character varying, 'PAID'::character varying, 'OVERDUE'::character varying])::text[]))),
    CONSTRAINT legal_cases_priority_check CHECK (((priority)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying, 'URGENT'::character varying])::text[]))),
    CONSTRAINT legal_cases_status_check CHECK (((status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'OPEN'::character varying, 'IN_PROGRESS'::character varying, 'PENDING'::character varying, 'CLOSED'::character varying, 'ARCHIVED'::character varying])::text[])))
);


--
-- Name: legal_cases_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.legal_cases ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.legal_cases_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: legal_citations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_citations (
    id bigint NOT NULL,
    precedent_id bigint NOT NULL,
    citation character varying(500) NOT NULL,
    relevance character varying(100) NOT NULL,
    description text
);


--
-- Name: legal_citations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legal_citations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legal_citations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legal_citations_id_seq OWNED BY public.legal_citations.id;


--
-- Name: legal_development_alerts; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_development_alerts (
    id bigint NOT NULL,
    subscription_id bigint NOT NULL,
    user_id bigint NOT NULL,
    development_type character varying(100) NOT NULL,
    title character varying(500) NOT NULL,
    summary text,
    citation character varying(500),
    source_url character varying(1000),
    publication_date date,
    relevance_score numeric(5,2) NOT NULL,
    relevance_explanation text,
    potential_impact character varying(100) NOT NULL,
    impact_summary text,
    affected_cases jsonb,
    status character varying(100),
    read_at timestamp without time zone,
    actioned_at timestamp without time zone,
    created_at timestamp without time zone
);


--
-- Name: legal_development_alerts_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legal_development_alerts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legal_development_alerts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legal_development_alerts_id_seq OWNED BY public.legal_development_alerts.id;


--
-- Name: legal_development_subscriptions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_development_subscriptions (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    subscription_name character varying(255),
    keywords jsonb NOT NULL,
    practice_areas jsonb,
    jurisdictions jsonb,
    case_id bigint,
    monitor_case_law boolean,
    monitor_statutes boolean,
    monitor_regulations boolean,
    notification_frequency time without time zone,
    email_notifications boolean,
    in_app_notifications boolean,
    relevance_threshold numeric(5,2),
    is_active boolean,
    created_at timestamp without time zone,
    last_checked_at timestamp without time zone
);


--
-- Name: legal_development_subscriptions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legal_development_subscriptions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legal_development_subscriptions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legal_development_subscriptions_id_seq OWNED BY public.legal_development_subscriptions.id;


--
-- Name: legal_document_summaries; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_document_summaries (
    id bigint NOT NULL,
    vault_document_id bigint NOT NULL,
    matter_id bigint NOT NULL,
    parties_roles text,
    key_claims text,
    deadlines text,
    risk_flags text,
    created_at timestamp without time zone
);


--
-- Name: legal_document_summaries_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legal_document_summaries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legal_document_summaries_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legal_document_summaries_id_seq OWNED BY public.legal_document_summaries.id;


--
-- Name: legal_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_documents (
    id text NOT NULL,
    user_id bigint NOT NULL,
    filename character varying(255) NOT NULL,
    original_filename character varying(255) NOT NULL,
    file_type character varying(50) NOT NULL,
    file_size bigint NOT NULL,
    content_hash character varying(64),
    extracted_text text,
    encrypted_content bytea,
    metadata jsonb,
    processing_status character varying(50),
    processing_errors text,
    uploaded_at timestamp without time zone,
    expires_at timestamp without time zone,
    is_permanent boolean
);


--
-- Name: legal_folder_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_folder_templates (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    practice_area character varying(100) NOT NULL,
    case_type character varying(100),
    folder_structure jsonb NOT NULL,
    is_default boolean,
    is_active boolean,
    organization_id bigint,
    created_by bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: legal_folder_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legal_folder_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legal_folder_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legal_folder_templates_id_seq OWNED BY public.legal_folder_templates.id;


--
-- Name: legal_research_audit_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legal_research_audit_log (
    id bigint NOT NULL,
    user_id bigint,
    action character varying(100) NOT NULL,
    entity_type character varying(50),
    entity_id bigint,
    ip_address character varying(45),
    user_agent text,
    metadata_json jsonb,
    "timestamp" timestamp without time zone
);


--
-- Name: legal_research_audit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legal_research_audit_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legal_research_audit_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legal_research_audit_log_id_seq OWNED BY public.legal_research_audit_log.id;


--
-- Name: legaldocument_tags; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legaldocument_tags (
    legal_document_id bigint NOT NULL,
    tags character varying(255)
);


--
-- Name: legience_audit_logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.legience_audit_logs (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    matter_id bigint,
    action_type time without time zone NOT NULL,
    user_prompt text,
    ai_response text,
    doc_ids_used text,
    "timestamp" timestamp without time zone
);


--
-- Name: legience_audit_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.legience_audit_logs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: legience_audit_logs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.legience_audit_logs_id_seq OWNED BY public.legience_audit_logs.id;


--
-- Name: live_assistant_suggestions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.live_assistant_suggestions (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    trigger_type date NOT NULL,
    trigger_entity_type character varying(50),
    trigger_entity_id bigint,
    suggestion_type character varying(100) NOT NULL,
    suggestion_title character varying(255) NOT NULL,
    suggestion_content text NOT NULL,
    suggested_action character varying(255),
    relevance_score numeric(5,2) NOT NULL,
    priority character varying(100),
    status character varying(100),
    viewed_at timestamp without time zone,
    accepted_at timestamp without time zone,
    dismissed_at timestamp without time zone,
    expires_at timestamp without time zone,
    resulted_in_session_id bigint,
    resulted_in_action boolean,
    context_data jsonb,
    created_at timestamp without time zone
);


--
-- Name: live_assistant_suggestions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.live_assistant_suggestions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: live_assistant_suggestions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.live_assistant_suggestions_id_seq OWNED BY public.live_assistant_suggestions.id;


--
-- Name: matter_phases; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.matter_phases (
    id bigint NOT NULL,
    case_id bigint NOT NULL,
    phase_type integer NOT NULL,
    phase_name character varying(255) NOT NULL,
    description text,
    start_date date,
    target_end_date date,
    actual_end_date date,
    status character varying(100),
    progress_percentage numeric(5,2),
    budget_allocated numeric(15,2),
    budget_spent numeric(15,2),
    key_tasks jsonb,
    milestones jsonb,
    team_members jsonb,
    created_by bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: matter_phases_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.matter_phases_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: matter_phases_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.matter_phases_id_seq OWNED BY public.matter_phases.id;


--
-- Name: matter_timeline_events; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.matter_timeline_events (
    id bigint NOT NULL,
    matter_id bigint NOT NULL,
    event_date timestamp without time zone,
    title character varying(255) NOT NULL,
    description text,
    source_document_id bigint,
    confidence_score numeric(5,2),
    created_at timestamp without time zone
);


--
-- Name: matter_timeline_events_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.matter_timeline_events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: matter_timeline_events_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.matter_timeline_events_id_seq OWNED BY public.matter_timeline_events.id;


--
-- Name: matter_types; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.matter_types (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    default_rate numeric(10,2),
    description text,
    is_active boolean NOT NULL,
    name character varying(100) NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: matter_types_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.matter_types ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.matter_types_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: matter_vault_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.matter_vault_documents (
    id bigint NOT NULL,
    matter_id bigint NOT NULL,
    file_name character varying(255) NOT NULL,
    file_type character varying(100) NOT NULL,
    storage_path character varying(500) NOT NULL,
    encrypted_key_ref character varying(255),
    ingestion_status character varying(100),
    summary_text text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: matter_vault_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.matter_vault_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: matter_vault_documents_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.matter_vault_documents_id_seq OWNED BY public.matter_vault_documents.id;


--
-- Name: message_threads; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.message_threads (
    id bigint NOT NULL,
    attorney_id bigint,
    case_id bigint NOT NULL,
    channel character varying(20),
    client_id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    last_message_at timestamp(6) without time zone,
    last_message_by character varying(255),
    organization_id bigint NOT NULL,
    status character varying(255),
    subject character varying(255) NOT NULL,
    unread_by_attorney integer,
    unread_by_client integer,
    updated_at timestamp(6) without time zone,
    CONSTRAINT message_threads_status_check CHECK (((status)::text = ANY ((ARRAY['OPEN'::character varying, 'CLOSED'::character varying, 'ARCHIVED'::character varying])::text[])))
);


--
-- Name: message_threads_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.message_threads ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.message_threads_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: messages; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.messages (
    id bigint NOT NULL,
    attachment_file_id bigint,
    channel character varying(20),
    content text NOT NULL,
    created_at timestamp(6) without time zone,
    has_attachment boolean,
    is_read boolean NOT NULL,
    organization_id bigint NOT NULL,
    read_at timestamp(6) without time zone,
    sender_id bigint NOT NULL,
    sender_type character varying(255) NOT NULL,
    thread_id bigint NOT NULL,
    CONSTRAINT messages_sender_type_check CHECK (((sender_type)::text = ANY ((ARRAY['CLIENT'::character varying, 'ATTORNEY'::character varying])::text[])))
);


--
-- Name: messages_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.messages ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: mobile_time_entries; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.mobile_time_entries (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    device_id character varying(255) NOT NULL,
    local_id character varying(100) NOT NULL,
    legal_case_id bigint,
    date date NOT NULL,
    hours numeric(4,2) NOT NULL,
    description text NOT NULL,
    location_lat numeric(10,8),
    location_lng numeric(11,8),
    is_synced boolean,
    synced_time_entry_id bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: mobile_time_entries_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.mobile_time_entries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: mobile_time_entries_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.mobile_time_entries_id_seq OWNED BY public.mobile_time_entries.id;


--
-- Name: notification_tokens; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.notification_tokens (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    last_used timestamp(6) without time zone,
    organization_id bigint NOT NULL,
    platform character varying(255) NOT NULL,
    token character varying(255) NOT NULL,
    user_id bigint NOT NULL
);


--
-- Name: notification_tokens_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.notification_tokens ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.notification_tokens_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: onboarding_tasks; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.onboarding_tasks (
    id bigint NOT NULL,
    onboarding_instance_id bigint NOT NULL,
    task_name character varying(100) NOT NULL,
    task_type character varying(30) NOT NULL,
    description text,
    assigned_to_id bigint,
    due_date date,
    priority character varying(20),
    status character varying(20),
    completion_percentage numeric(5,2),
    estimated_hours numeric(4,2),
    actual_hours numeric(4,2),
    task_data jsonb,
    completion_notes text,
    completed_at timestamp without time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: onboarding_tasks_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.onboarding_tasks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: onboarding_tasks_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.onboarding_tasks_id_seq OWNED BY public.onboarding_tasks.id;


--
-- Name: organization_invitations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.organization_invitations (
    id bigint NOT NULL,
    accepted_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    created_by bigint NOT NULL,
    email character varying(255) NOT NULL,
    expires_at timestamp(6) without time zone NOT NULL,
    organization_id bigint NOT NULL,
    role character varying(255) NOT NULL,
    token character varying(255) NOT NULL
);


--
-- Name: organization_invitations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.organization_invitations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.organization_invitations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: organizations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.organizations (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    slug character varying(100) NOT NULL,
    logo_url character varying(500),
    website character varying(255),
    email character varying(100),
    phone character varying(30),
    address text,
    plan_type character varying(255) DEFAULT 'FREE'::character varying,
    plan_expires_at timestamp without time zone,
    twilio_subaccount_sid character varying(50),
    twilio_auth_token_encrypted character varying(255),
    twilio_phone_number character varying(20),
    twilio_whatsapp_number character varying(20),
    twilio_friendly_name character varying(100),
    twilio_enabled boolean DEFAULT false,
    twilio_provisioned_at timestamp without time zone,
    boldsign_api_key_encrypted character varying(255),
    boldsign_enabled boolean DEFAULT true,
    boldsign_brand_id character varying(100),
    sms_enabled boolean DEFAULT true,
    whatsapp_enabled boolean DEFAULT false,
    email_enabled boolean DEFAULT true,
    signature_reminder_email boolean DEFAULT true,
    signature_reminder_sms boolean DEFAULT true,
    signature_reminder_whatsapp boolean DEFAULT false,
    signature_reminder_days character varying(50) DEFAULT '7,3,1'::character varying,
    sms_template_signature_request text,
    sms_template_signature_reminder text,
    sms_template_signature_completed text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


--
-- Name: organizations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.organizations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: organizations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.organizations_id_seq OWNED BY public.organizations.id;


--
-- Name: payment; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.payment (
    id bigint NOT NULL,
    amount double precision,
    description character varying(255),
    "paymentMethod" character varying(255),
    status character varying(255),
    "transactionId" character varying(255)
);


--
-- Name: payment_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.payment_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: payment_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.payment_id_seq OWNED BY public.payment.id;


--
-- Name: payment_transactions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.payment_transactions (
    id bigint NOT NULL,
    account_number_last4 character varying(255),
    amount numeric(10,2) NOT NULL,
    bank_name character varying(255),
    completion_date date,
    created_at timestamp(6) without time zone,
    created_by bigint,
    invoice_id bigint NOT NULL,
    notes text,
    organization_id bigint,
    processing_date date,
    reference_number character varying(255),
    routing_number character varying(255),
    transaction_status character varying(255),
    transaction_type character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    wire_reference character varying(255)
);


--
-- Name: payment_transactions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.payment_transactions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.payment_transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: payments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.payments (
    id bigint NOT NULL,
    amount double precision,
    description character varying(255),
    paymentmethod character varying(255),
    status character varying(255),
    transactionid character varying(255)
);


--
-- Name: payments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.payments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.payments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: performance_metrics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.performance_metrics (
    id bigint NOT NULL,
    category character varying(50) NOT NULL,
    created_at timestamp(6) without time zone,
    metric_name character varying(100) NOT NULL,
    metric_unit character varying(20),
    metric_value numeric(15,4) NOT NULL,
    period_end date NOT NULL,
    period_start date NOT NULL,
    updated_at timestamp(6) without time zone,
    CONSTRAINT performance_metrics_category_check CHECK (((category)::text = ANY ((ARRAY['FINANCIAL'::character varying, 'CASE_MANAGEMENT'::character varying, 'CLIENT_SATISFACTION'::character varying, 'OPERATIONAL'::character varying, 'PRODUCTIVITY'::character varying, 'COMPLIANCE'::character varying, 'MARKETING'::character varying, 'HUMAN_RESOURCES'::character varying])::text[])))
);


--
-- Name: performance_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.performance_metrics ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.performance_metrics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: permission_audit_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.permission_audit_log (
    id bigint NOT NULL,
    user_id bigint,
    action_type character varying(50) NOT NULL,
    resource_type character varying(50) NOT NULL,
    resource_id bigint,
    description text,
    "timestamp" timestamp without time zone
);


--
-- Name: permission_audit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.permission_audit_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: permission_audit_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.permission_audit_log_id_seq OWNED BY public.permission_audit_log.id;


--
-- Name: permission_audit_logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.permission_audit_logs (
    id bigint NOT NULL,
    user_id bigint,
    action character varying(50) NOT NULL,
    target_type character varying(50) NOT NULL,
    target_id bigint NOT NULL,
    details text,
    performed_by bigint NOT NULL,
    "timestamp" timestamp without time zone,
    organization_id bigint
);


--
-- Name: permission_audit_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.permission_audit_logs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: permission_audit_logs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.permission_audit_logs_id_seq OWNED BY public.permission_audit_logs.id;


--
-- Name: permission_dependencies; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.permission_dependencies (
    id bigint NOT NULL,
    permission_id bigint NOT NULL,
    required_permission_id bigint NOT NULL
);


--
-- Name: permission_dependencies_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.permission_dependencies_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: permission_dependencies_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.permission_dependencies_id_seq OWNED BY public.permission_dependencies.id;


--
-- Name: permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.permissions (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    resource_type character varying(50) NOT NULL,
    action_type character varying(50) NOT NULL,
    description text,
    is_contextual boolean,
    permission_category character varying(100),
    created_at timestamp without time zone
);


--
-- Name: permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.permissions_id_seq OWNED BY public.permissions.id;


--
-- Name: pipeline_stages; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.pipeline_stages (
    id bigint NOT NULL,
    auto_actions text,
    color character varying(7),
    created_at timestamp(6) without time zone,
    description text,
    estimated_days integer,
    icon character varying(50),
    is_active boolean,
    is_final boolean,
    is_initial boolean,
    is_system boolean,
    name character varying(100) NOT NULL,
    organization_id bigint,
    required_fields text,
    stage_order integer NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: pipeline_stages_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.pipeline_stages ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.pipeline_stages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: practice_areas; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.practice_areas (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description character varying(255),
    color character varying(20),
    icon character varying(50),
    created_at timestamp without time zone
);


--
-- Name: practice_areas_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.practice_areas_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: practice_areas_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.practice_areas_id_seq OWNED BY public.practice_areas.id;


--
-- Name: precedent_documents; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.precedent_documents (
    id bigint NOT NULL,
    document_id bigint NOT NULL,
    precedent_id character varying(100) NOT NULL,
    case_outcome character varying(100) NOT NULL,
    outcome_details text,
    financial_result numeric(15,2),
    time_to_resolution integer,
    client_satisfaction integer,
    legal_issues jsonb NOT NULL,
    jurisdiction character varying(100) NOT NULL,
    court character varying(255) NOT NULL,
    judge character varying(255),
    opposing_counsel character varying(255),
    case_type character varying(100) NOT NULL,
    practice_area character varying(100) NOT NULL,
    document_type integer NOT NULL,
    filing_date date,
    outcome_date date,
    key_arguments jsonb,
    document_strategy text,
    lessons_learned text,
    usage_count integer,
    success_rate numeric(5,2),
    average_rating numeric(3,2),
    is_public boolean,
    organization_id bigint,
    added_by bigint NOT NULL,
    added_at timestamp without time zone,
    last_used timestamp without time zone,
    related_cases jsonb
);


--
-- Name: precedent_documents_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.precedent_documents_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: precedent_documents_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.precedent_documents_id_seq OWNED BY public.precedent_documents.id;


--
-- Name: precedent_similarities; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.precedent_similarities (
    id bigint NOT NULL,
    precedent_id bigint NOT NULL,
    similar_document_id bigint NOT NULL,
    similarity_score numeric(5,2) NOT NULL,
    similarity_factors jsonb,
    calculated_at timestamp without time zone
);


--
-- Name: precedent_similarities_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.precedent_similarities_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: precedent_similarities_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.precedent_similarities_id_seq OWNED BY public.precedent_similarities.id;


--
-- Name: qualification_criteria; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qualification_criteria (
    id bigint NOT NULL,
    workflow_id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    criteria_type character varying(20) NOT NULL,
    is_required boolean,
    weight numeric(3,2),
    validation_rules jsonb,
    options jsonb,
    min_score integer,
    display_order integer,
    created_at timestamp without time zone
);


--
-- Name: qualification_criteria_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.qualification_criteria_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: qualification_criteria_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.qualification_criteria_id_seq OWNED BY public.qualification_criteria.id;


--
-- Name: qualification_responses; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qualification_responses (
    id bigint NOT NULL,
    assessment_id bigint NOT NULL,
    criteria_id bigint NOT NULL,
    response_value jsonb NOT NULL,
    score numeric(5,2),
    notes text,
    responded_at timestamp without time zone,
    responded_by bigint NOT NULL
);


--
-- Name: qualification_responses_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.qualification_responses_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: qualification_responses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.qualification_responses_id_seq OWNED BY public.qualification_responses.id;


--
-- Name: qualification_workflows; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qualification_workflows (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    practice_area character varying(100) NOT NULL,
    workflow_stages jsonb NOT NULL,
    auto_progress_rules jsonb,
    required_documents jsonb,
    estimated_duration_minutes integer,
    is_active boolean,
    version integer,
    usage_count integer,
    created_by bigint NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: qualification_workflows_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.qualification_workflows_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: qualification_workflows_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.qualification_workflows_id_seq OWNED BY public.qualification_workflows.id;


--
-- Name: receipt; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.receipt (
    id bigint NOT NULL,
    file_name character varying(255) NOT NULL,
    content_type character varying(100) NOT NULL,
    file_size bigint NOT NULL,
    thumbnail bytea,
    content bytea NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: receipt_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.receipt_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: receipt_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.receipt_id_seq OWNED BY public.receipt.id;


--
-- Name: receipts; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.receipts (
    id bigint NOT NULL,
    content bytea NOT NULL,
    content_type character varying(100) NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    file_name character varying(255) NOT NULL,
    file_size bigint NOT NULL,
    organization_id bigint,
    thumbnail bytea,
    updated_at timestamp(6) without time zone NOT NULL
);


--
-- Name: receipts_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.receipts ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.receipts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: reminder_queue; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reminder_queue (
    id bigint NOT NULL,
    event_id bigint,
    user_id bigint NOT NULL,
    scheduled_time timestamp without time zone NOT NULL,
    minutes_before integer NOT NULL,
    status character varying(255) DEFAULT 'PENDING'::character varying NOT NULL,
    retry_count integer DEFAULT 0,
    last_attempt timestamp without time zone,
    error_message character varying(255),
    reminder_type character varying(255) DEFAULT 'PRIMARY'::character varying NOT NULL,
    organization_id bigint,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


--
-- Name: reminder_queue_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.reminder_queue_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: reminder_queue_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.reminder_queue_id_seq OWNED BY public.reminder_queue.id;


--
-- Name: research_action_items; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_action_items (
    id bigint NOT NULL,
    action_status character varying(255),
    action_type character varying(255) NOT NULL,
    ai_confidence_score numeric(5,2),
    calendar_event_id bigint,
    case_id bigint,
    completed_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    deadline_date timestamp(6) without time zone,
    deadline_type character varying(100),
    dismissed_at timestamp(6) without time zone,
    document_type character varying(100),
    draft_document_id character varying(36),
    organization_id bigint NOT NULL,
    research_session_id bigint NOT NULL,
    source_citation character varying(500),
    source_finding text NOT NULL,
    task_description text,
    task_id bigint,
    task_priority character varying(255),
    user_id bigint NOT NULL,
    user_modified boolean,
    CONSTRAINT research_action_items_action_status_check CHECK (((action_status)::text = ANY ((ARRAY['PENDING'::character varying, 'IN_PROGRESS'::character varying, 'COMPLETED'::character varying, 'DISMISSED'::character varying])::text[]))),
    CONSTRAINT research_action_items_action_type_check CHECK (((action_type)::text = ANY ((ARRAY['DRAFT_MOTION'::character varying, 'CREATE_DEADLINE'::character varying, 'ATTACH_DOCUMENT'::character varying, 'CREATE_TASK'::character varying, 'ADD_NOTE'::character varying, 'SCHEDULE_EVENT'::character varying])::text[]))),
    CONSTRAINT research_action_items_task_priority_check CHECK (((task_priority)::text = ANY ((ARRAY['LOW'::character varying, 'MEDIUM'::character varying, 'HIGH'::character varying, 'URGENT'::character varying])::text[])))
);


--
-- Name: research_action_items_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.research_action_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.research_action_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: research_annotation; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_annotation (
    id bigint NOT NULL,
    annotation_text text NOT NULL,
    annotation_type character varying(255),
    color character varying(255),
    created_at timestamp(6) without time zone,
    document_id bigint,
    document_title text,
    document_type character varying(255),
    highlighted_text text,
    is_private boolean,
    organization_id bigint,
    page_number integer,
    position_data text,
    session_id character varying(255),
    updated_at timestamp(6) without time zone,
    user_id bigint
);


--
-- Name: research_annotation_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.research_annotation ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.research_annotation_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: research_conversation_messages; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_conversation_messages (
    id bigint NOT NULL,
    conversation_id bigint NOT NULL,
    role character varying(50),
    content text,
    research_mode character varying(50),
    message_index integer,
    is_streaming boolean,
    sources text,
    suggested_actions text,
    execution_time_ms bigint,
    token_count integer,
    created_at timestamp without time zone
);


--
-- Name: research_conversation_messages_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.research_conversation_messages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: research_conversation_messages_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.research_conversation_messages_id_seq OWNED BY public.research_conversation_messages.id;


--
-- Name: research_conversations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_conversations (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    case_id bigint,
    title character varying(255),
    research_mode character varying(50),
    session_id character varying(255),
    total_messages integer,
    is_pinned boolean,
    is_archived boolean,
    last_message_at timestamp without time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    task_type character varying(50),
    document_id bigint,
    related_draft_id character varying(36)
);


--
-- Name: research_conversations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.research_conversations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: research_conversations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.research_conversations_id_seq OWNED BY public.research_conversations.id;


--
-- Name: research_mind_map_edges; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_mind_map_edges (
    id bigint NOT NULL,
    source_node_id bigint NOT NULL,
    target_node_id bigint NOT NULL,
    relationship_type character varying(100),
    label character varying(255),
    strength numeric(5,2),
    color character varying(20),
    style character varying(50),
    created_at timestamp without time zone
);


--
-- Name: research_mind_map_edges_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.research_mind_map_edges_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: research_mind_map_edges_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.research_mind_map_edges_id_seq OWNED BY public.research_mind_map_edges.id;


--
-- Name: research_mind_map_nodes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_mind_map_nodes (
    id bigint NOT NULL,
    workspace_id bigint,
    user_id bigint NOT NULL,
    session_id bigint,
    node_type character varying(50),
    label character varying(255),
    content text,
    position_x numeric(10,2),
    position_y numeric(10,2),
    color character varying(20),
    size character varying(20),
    metadata_json jsonb,
    created_at timestamp without time zone
);


--
-- Name: research_mind_map_nodes_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.research_mind_map_nodes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: research_mind_map_nodes_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.research_mind_map_nodes_id_seq OWNED BY public.research_mind_map_nodes.id;


--
-- Name: research_session; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_session (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    description text,
    is_active boolean,
    last_accessed timestamp(6) without time zone,
    organization_id bigint NOT NULL,
    session_id character varying(255) NOT NULL,
    session_name character varying(255),
    total_documents_viewed integer,
    total_searches integer,
    updated_at timestamp(6) without time zone,
    user_id bigint,
    workflow_execution_id bigint
);


--
-- Name: research_session_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.research_session ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.research_session_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: research_verification_scores; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_verification_scores (
    id bigint NOT NULL,
    session_id bigint NOT NULL,
    message_id bigint NOT NULL,
    user_id bigint NOT NULL,
    finding_text text NOT NULL,
    finding_hash character varying(64) NOT NULL,
    truth_score numeric(5,2) NOT NULL,
    confidence_level character varying(100) NOT NULL,
    verification_status character varying(100),
    total_sources_found integer,
    primary_sources_count integer,
    secondary_sources_count integer,
    court_opinions_count integer,
    statutes_count integer,
    regulations_count integer,
    avg_source_authority_score numeric(5,2),
    most_recent_source_year integer,
    oldest_source_year integer,
    jurisdictions_covered jsonb,
    primary_jurisdiction character varying(100),
    multi_jurisdiction boolean,
    contradicting_sources_found integer,
    contradiction_details jsonb,
    sources_data jsonb NOT NULL,
    verification_timestamp timestamp without time zone,
    last_reverified_at timestamp without time zone
);


--
-- Name: research_verification_scores_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.research_verification_scores_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: research_verification_scores_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.research_verification_scores_id_seq OWNED BY public.research_verification_scores.id;


--
-- Name: research_workspaces; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.research_workspaces (
    id bigint NOT NULL,
    workspace_name character varying(255) NOT NULL,
    case_id bigint,
    practice_area character varying(100),
    jurisdiction character varying(100),
    created_by_user_id bigint NOT NULL,
    organization_id bigint,
    is_public boolean,
    access_level character varying(100),
    status character varying(100),
    primary_research_question text,
    workspace_description text,
    participant_count integer,
    total_messages integer,
    total_documents integer,
    total_annotations integer,
    last_activity_at timestamp without time zone,
    created_at timestamp without time zone,
    archived_at timestamp without time zone
);


--
-- Name: research_workspaces_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.research_workspaces_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: research_workspaces_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.research_workspaces_id_seq OWNED BY public.research_workspaces.id;


--
-- Name: reset_password_verifications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reset_password_verifications (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    url character varying(255) NOT NULL,
    expiration_date timestamp without time zone NOT NULL
);


--
-- Name: reset_password_verifications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.reset_password_verifications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: reset_password_verifications_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.reset_password_verifications_id_seq OWNED BY public.reset_password_verifications.id;


--
-- Name: role_migration_map; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.role_migration_map (
    old_role_name character varying(100) NOT NULL,
    new_role_id bigint,
    title character varying(100),
    seniority_level integer,
    can_approve boolean
);


--
-- Name: role_permissions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.role_permissions (
    role_id bigint NOT NULL,
    permission_id bigint NOT NULL,
    is_granted boolean,
    granted_by bigint,
    granted_at timestamp without time zone
);


--
-- Name: roles; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.roles (
    id bigint NOT NULL,
    description character varying(255),
    display_name character varying(255),
    hierarchy_level integer,
    is_active boolean,
    is_system_role boolean,
    max_billing_rate numeric(38,2),
    name character varying(255) NOT NULL,
    permission character varying(500)
);


--
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.roles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.roles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: search_history; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.search_history (
    id bigint NOT NULL,
    execution_time_ms bigint,
    is_saved boolean,
    organization_id bigint,
    query_type character varying(255),
    results_count integer,
    search_filters text,
    search_query text NOT NULL,
    searched_at timestamp(6) without time zone,
    session_id character varying(255),
    user_id bigint,
    CONSTRAINT search_history_query_type_check CHECK (((query_type)::text = ANY ((ARRAY['CASE_LAW'::character varying, 'STATUTE_INTERPRETATION'::character varying, 'PRECEDENT_SEARCH'::character varying, 'LEGAL_MEMO'::character varying, 'CONTRACT_ANALYSIS'::character varying, 'IMMIGRATION_RESEARCH'::character varying, 'CRIMINAL_RESEARCH'::character varying, 'FAMILY_LAW_RESEARCH'::character varying, 'REAL_ESTATE_RESEARCH'::character varying, 'PATENT_RESEARCH'::character varying, 'ALL'::character varying, 'STATUTES'::character varying, 'RULES'::character varying, 'REGULATIONS'::character varying, 'GUIDELINES'::character varying])::text[])))
);


--
-- Name: search_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.search_history ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.search_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: shepardization_history; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.shepardization_history (
    id bigint NOT NULL,
    citation_id bigint NOT NULL,
    citing_case_citation character varying(500) NOT NULL,
    citing_case_name character varying(500),
    citing_case_date date,
    citing_case_court character varying(200),
    treatment_type character varying(100) NOT NULL,
    treatment_depth character varying(100),
    citing_page_number character varying(50),
    excerpt text,
    headnote_reference character varying(100),
    discovered_at timestamp without time zone
);


--
-- Name: shepardization_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.shepardization_history_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: shepardization_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.shepardization_history_id_seq OWNED BY public.shepardization_history.id;


--
-- Name: signature_audit_logs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.signature_audit_logs (
    id bigint NOT NULL,
    actor_email character varying(100),
    actor_id bigint,
    actor_name character varying(100),
    actor_type character varying(255) NOT NULL,
    channel character varying(255),
    created_at timestamp(6) without time zone,
    event_data text,
    event_type character varying(50) NOT NULL,
    ip_address character varying(45),
    organization_id bigint NOT NULL,
    signature_request_id bigint NOT NULL,
    user_agent character varying(500),
    CONSTRAINT signature_audit_logs_actor_type_check CHECK (((actor_type)::text = ANY ((ARRAY['SYSTEM'::character varying, 'USER'::character varying, 'SIGNER'::character varying, 'WEBHOOK'::character varying])::text[]))),
    CONSTRAINT signature_audit_logs_channel_check CHECK (((channel)::text = ANY ((ARRAY['EMAIL'::character varying, 'SMS'::character varying, 'WHATSAPP'::character varying, 'WEB'::character varying, 'API'::character varying])::text[])))
);


--
-- Name: signature_audit_logs_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.signature_audit_logs ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.signature_audit_logs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: signature_reminder_queue; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.signature_reminder_queue (
    id bigint NOT NULL,
    channel character varying(255) NOT NULL,
    communication_log_id bigint,
    created_at timestamp(6) without time zone,
    error_message character varying(500),
    organization_id bigint NOT NULL,
    scheduled_at timestamp(6) without time zone NOT NULL,
    sent_at timestamp(6) without time zone,
    signature_request_id bigint NOT NULL,
    status character varying(255),
    CONSTRAINT signature_reminder_queue_channel_check CHECK (((channel)::text = ANY ((ARRAY['EMAIL'::character varying, 'SMS'::character varying, 'WHATSAPP'::character varying])::text[]))),
    CONSTRAINT signature_reminder_queue_status_check CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'SENT'::character varying, 'FAILED'::character varying, 'CANCELLED'::character varying])::text[])))
);


--
-- Name: signature_reminder_queue_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.signature_reminder_queue ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.signature_reminder_queue_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: signature_requests; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.signature_requests (
    id bigint NOT NULL,
    additional_signers text,
    boldsign_document_id character varying(100),
    case_id bigint,
    client_id bigint,
    completed_at timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    created_by bigint NOT NULL,
    decline_reason character varying(500),
    declined_at timestamp(6) without time zone,
    document_id bigint,
    expires_at timestamp(6) without time zone,
    file_name character varying(255),
    file_url character varying(500),
    last_reminder_sent_at timestamp(6) without time zone,
    message text,
    organization_id bigint NOT NULL,
    reminder_count integer,
    reminder_email boolean,
    reminder_sms boolean,
    reminder_whatsapp boolean,
    sent_at timestamp(6) without time zone,
    signed_at timestamp(6) without time zone,
    signed_document_url character varying(500),
    signer_email character varying(100) NOT NULL,
    signer_name character varying(100) NOT NULL,
    signer_phone character varying(20),
    status character varying(255) NOT NULL,
    title character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    viewed_at timestamp(6) without time zone,
    CONSTRAINT signature_requests_status_check CHECK (((status)::text = ANY ((ARRAY['DRAFT'::character varying, 'SENT'::character varying, 'VIEWED'::character varying, 'PARTIALLY_SIGNED'::character varying, 'SIGNED'::character varying, 'COMPLETED'::character varying, 'DECLINED'::character varying, 'EXPIRED'::character varying, 'VOIDED'::character varying])::text[])))
);


--
-- Name: signature_requests_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.signature_requests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.signature_requests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: signature_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.signature_templates (
    id bigint NOT NULL,
    boldsign_template_id character varying(100),
    category character varying(50),
    created_at timestamp(6) without time zone,
    created_by bigint NOT NULL,
    default_expiry_days integer,
    default_reminder_email boolean,
    default_reminder_sms boolean,
    description text,
    field_config text,
    file_name character varying(255),
    file_url character varying(500),
    is_active boolean,
    is_global boolean,
    name character varying(100) NOT NULL,
    organization_id bigint NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: signature_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.signature_templates ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.signature_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: sms_templates; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.sms_templates (
    id bigint NOT NULL,
    code character varying(50) NOT NULL,
    name character varying(100) NOT NULL,
    content text NOT NULL,
    category character varying(50),
    variables jsonb,
    active boolean,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: sms_templates_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.sms_templates_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: sms_templates_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.sms_templates_id_seq OWNED BY public.sms_templates.id;


--
-- Name: success_metrics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.success_metrics (
    id bigint NOT NULL,
    precedent_id bigint NOT NULL,
    effectiveness integer NOT NULL,
    reusability integer NOT NULL,
    complexity integer NOT NULL,
    time_investment numeric(8,2) NOT NULL,
    outcome_value numeric(15,2),
    precedent_value integer NOT NULL
);


--
-- Name: success_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.success_metrics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: success_metrics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.success_metrics_id_seq OWNED BY public.success_metrics.id;


--
-- Name: system_health_metrics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.system_health_metrics (
    id bigint NOT NULL,
    metric_type character varying(50) NOT NULL,
    metric_value numeric(10,4) NOT NULL,
    status character varying(20),
    threshold_warning numeric(10,4),
    threshold_critical numeric(10,4),
    recorded_at timestamp without time zone
);


--
-- Name: system_health_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.system_health_metrics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: system_health_metrics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.system_health_metrics_id_seq OWNED BY public.system_health_metrics.id;


--
-- Name: task_comments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.task_comments (
    id bigint NOT NULL,
    attachment_url character varying(500),
    comment text NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    is_internal boolean,
    organization_id bigint NOT NULL,
    task_id bigint NOT NULL,
    user_id bigint NOT NULL
);


--
-- Name: task_comments_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.task_comments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.task_comments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: template_library; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.template_library (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    category integer NOT NULL,
    practice_area character varying(100),
    jurisdiction character varying(100),
    document_type character varying(100),
    template_content text,
    dynamic_fields jsonb,
    usage_count integer,
    success_rate numeric(5,2),
    average_rating numeric(3,2),
    is_public boolean,
    is_approved boolean,
    organization_id bigint,
    created_by bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: template_library_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.template_library_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: template_library_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.template_library_id_seq OWNED BY public.template_library.id;


--
-- Name: template_usage; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.template_usage (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    user_id bigint NOT NULL,
    session_id text,
    variables_used jsonb,
    generated_content_length integer,
    success boolean,
    feedback_rating integer,
    feedback_comments text,
    used_at timestamp without time zone
);


--
-- Name: template_usage_analytics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.template_usage_analytics (
    id bigint NOT NULL,
    template_id bigint NOT NULL,
    used_by bigint NOT NULL,
    case_id bigint,
    document_id bigint,
    outcome character varying(100),
    outcome_details text,
    rating integer,
    feedback text,
    used_at timestamp without time zone
);


--
-- Name: template_usage_analytics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.template_usage_analytics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: template_usage_analytics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.template_usage_analytics_id_seq OWNED BY public.template_usage_analytics.id;


--
-- Name: template_usage_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.template_usage_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: template_usage_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.template_usage_id_seq OWNED BY public.template_usage.id;


--
-- Name: thread_attorney_status; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.thread_attorney_status (
    id bigint NOT NULL,
    attorney_user_id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    last_read_at timestamp(6) without time zone,
    organization_id bigint NOT NULL,
    thread_id bigint NOT NULL,
    unread_count integer,
    updated_at timestamp(6) without time zone
);


--
-- Name: thread_attorney_status_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.thread_attorney_status ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.thread_attorney_status_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: time_entries; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.time_entries (
    id bigint NOT NULL,
    billable boolean NOT NULL,
    billed_amount numeric(10,2),
    created_at timestamp(6) without time zone NOT NULL,
    date date NOT NULL,
    description text NOT NULL,
    end_time time(6) without time zone,
    hours numeric(4,2) NOT NULL,
    invoice_id bigint,
    legal_case_id bigint NOT NULL,
    organization_id bigint,
    rate numeric(10,2) NOT NULL,
    start_time time(6) without time zone,
    status character varying(255) NOT NULL,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL,
    CONSTRAINT time_entries_status_check CHECK (((status)::text = ANY ((ARRAY['DRAFT'::character varying, 'SUBMITTED'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying, 'BILLED'::character varying, 'BILLING_APPROVED'::character varying, 'INVOICED'::character varying])::text[])))
);


--
-- Name: time_entries_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.time_entries ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.time_entries_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: time_entry_approvals; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.time_entry_approvals (
    id bigint NOT NULL,
    time_entry_id bigint NOT NULL,
    approver_id bigint NOT NULL,
    status character varying(100),
    comments text,
    approved_at timestamp without time zone,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: time_entry_approvals_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.time_entry_approvals_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: time_entry_approvals_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.time_entry_approvals_id_seq OWNED BY public.time_entry_approvals.id;


--
-- Name: time_entry_audit_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.time_entry_audit_log (
    id bigint NOT NULL,
    action_type character varying(50) NOT NULL,
    compliance_flag boolean NOT NULL,
    field_name character varying(100),
    ip_address character varying(45),
    new_billable_amount numeric(10,2),
    new_value text,
    old_billable_amount numeric(10,2),
    old_value text,
    organization_id bigint,
    reason text,
    session_id character varying(255),
    time_entry_id bigint NOT NULL,
    "timestamp" timestamp(6) without time zone NOT NULL,
    user_agent text,
    user_id bigint NOT NULL
);


--
-- Name: time_entry_audit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.time_entry_audit_log ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.time_entry_audit_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: time_entry_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.time_entry_summary (
    id bigint,
    legal_case_id bigint NOT NULL,
    user_id bigint NOT NULL,
    date date NOT NULL,
    start_time time without time zone,
    end_time time without time zone,
    hours numeric(4,2) NOT NULL,
    rate numeric(10,2) NOT NULL,
    description text NOT NULL,
    status character varying(100),
    billable boolean,
    invoice_id bigint,
    billed_amount numeric(10,2),
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    first_name character varying(255),
    last_name character varying(255),
    email character varying(255) NOT NULL,
    case_title character varying(255) NOT NULL,
    customer_name character varying(255) NOT NULL,
    total_amount numeric(14,4)
);


--
-- Name: time_reports_cache; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.time_reports_cache (
    id bigint NOT NULL,
    report_type time without time zone NOT NULL,
    user_id bigint,
    legal_case_id bigint,
    customer_id bigint,
    start_date date NOT NULL,
    end_date date NOT NULL,
    parameters jsonb,
    results jsonb NOT NULL,
    generated_at timestamp without time zone,
    expires_at timestamp without time zone
);


--
-- Name: time_reports_cache_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.time_reports_cache_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: time_reports_cache_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.time_reports_cache_id_seq OWNED BY public.time_reports_cache.id;


--
-- Name: timeline_events; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.timeline_events (
    id bigint NOT NULL,
    analysis_id bigint NOT NULL,
    calendar_event_id bigint,
    created_date timestamp(6) without time zone,
    description text,
    event_date date NOT NULL,
    event_type character varying(50),
    organization_id bigint,
    priority character varying(20),
    related_section character varying(255),
    title character varying(255) NOT NULL,
    updated_date timestamp(6) without time zone
);


--
-- Name: timeline_events_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.timeline_events ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.timeline_events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: timer_sessions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.timer_sessions (
    id bigint NOT NULL,
    converted_to_time_entry boolean NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    description text,
    duration integer NOT NULL,
    end_time timestamp(6) without time zone,
    legal_case_id bigint NOT NULL,
    organization_id bigint,
    paused_duration integer NOT NULL,
    start_time timestamp(6) without time zone NOT NULL,
    time_entry_id bigint,
    updated_at timestamp(6) without time zone,
    user_id bigint NOT NULL
);


--
-- Name: timer_sessions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.timer_sessions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.timer_sessions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: trust_account_transactions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.trust_account_transactions (
    id bigint NOT NULL,
    amount numeric(10,2) NOT NULL,
    balance_after numeric(12,2) NOT NULL,
    check_number character varying(255),
    cleared_date date,
    client_id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    created_by bigint,
    description character varying(255) NOT NULL,
    is_cleared boolean NOT NULL,
    legal_case_id bigint,
    notes text,
    organization_id bigint,
    payee_name character varying(255),
    reconciliation_id bigint,
    reference_number character varying(255),
    related_invoice_id bigint,
    transaction_date date NOT NULL,
    transaction_type character varying(255) NOT NULL,
    trust_account_id bigint NOT NULL,
    updated_at timestamp(6) without time zone
);


--
-- Name: trust_account_transactions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.trust_account_transactions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.trust_account_transactions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: trust_accounts; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.trust_accounts (
    id bigint NOT NULL,
    account_name character varying(255) NOT NULL,
    account_number character varying(255),
    account_type character varying(255),
    bank_name character varying(255),
    created_at timestamp(6) without time zone,
    created_by bigint,
    current_balance numeric(12,2) NOT NULL,
    is_active boolean NOT NULL,
    last_reconciliation_date timestamp(6) without time zone,
    minimum_balance numeric(12,2),
    notes text,
    organization_id bigint,
    routing_number character varying(255),
    updated_at timestamp(6) without time zone
);


--
-- Name: trust_accounts_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.trust_accounts ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.trust_accounts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: two_factor_verifications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.two_factor_verifications (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    code character varying(10) NOT NULL,
    expiration_date timestamp without time zone NOT NULL
);


--
-- Name: two_factor_verifications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.two_factor_verifications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: two_factor_verifications_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.two_factor_verifications_id_seq OWNED BY public.two_factor_verifications.id;


--
-- Name: user_doc_generation_statistics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_doc_generation_statistics (
    user_id bigint,
    first_name character varying(255),
    last_name character varying(255),
    email character varying(255) NOT NULL,
    role_name character varying(255),
    total_generations bigint,
    successful_generations bigint,
    failed_generations bigint,
    unique_templates_used bigint,
    unique_cases bigint,
    avg_processing_time_ms numeric(14,4),
    first_generation timestamp without time zone,
    last_generation timestamp without time zone,
    generations_last_30_days bigint
);


--
-- Name: user_events; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_events (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    event_id bigint NOT NULL,
    device character varying(100),
    ip_address character varying(100),
    created_at timestamp without time zone
);


--
-- Name: user_events_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.user_events_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: user_events_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.user_events_id_seq OWNED BY public.user_events.id;


--
-- Name: user_notification_preferences; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_notification_preferences (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    email_enabled boolean NOT NULL,
    enabled boolean NOT NULL,
    event_type character varying(100) NOT NULL,
    in_app_enabled boolean NOT NULL,
    organization_id bigint NOT NULL,
    priority character varying(20),
    push_enabled boolean NOT NULL,
    sms_enabled boolean NOT NULL,
    updated_at timestamp(6) without time zone NOT NULL,
    user_id bigint NOT NULL,
    CONSTRAINT user_notification_preferences_priority_check CHECK (((priority)::text = ANY ((ARRAY['LOW'::character varying, 'NORMAL'::character varying, 'HIGH'::character varying, 'CRITICAL'::character varying])::text[])))
);


--
-- Name: user_notification_preferences_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.user_notification_preferences ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.user_notification_preferences_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_notifications; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_notifications (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    entity_id bigint,
    entity_type character varying(255),
    message text NOT NULL,
    organization_id bigint NOT NULL,
    priority character varying(255) NOT NULL,
    read boolean NOT NULL,
    read_at timestamp(6) without time zone,
    title character varying(255) NOT NULL,
    triggered_by_name character varying(255),
    triggered_by_user_id bigint,
    type character varying(255) NOT NULL,
    url character varying(255),
    user_id bigint NOT NULL
);


--
-- Name: user_notifications_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.user_notifications ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.user_notifications_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: user_productivity_view; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_productivity_view (
    user_id bigint,
    first_name character varying(255),
    last_name character varying(255),
    email character varying(255) NOT NULL,
    total_entries bigint,
    total_hours numeric(26,2),
    total_billable_amount numeric(36,4),
    average_rate numeric(14,6),
    billable_hours numeric(26,2),
    non_billable_hours numeric(26,2)
);


--
-- Name: user_roles; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_roles (
    user_id bigint NOT NULL,
    role_id bigint NOT NULL,
    is_primary boolean,
    assigned_by bigint,
    assigned_at timestamp without time zone,
    is_active boolean
);


--
-- Name: user_workload; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.user_workload (
    id bigint NOT NULL,
    active_cases_count integer,
    average_response_time_hours numeric(5,2),
    billable_hours_week numeric(5,2),
    calculation_date date NOT NULL,
    capacity_percentage numeric(5,2),
    last_calculated_at timestamp(6) without time zone,
    max_capacity_points numeric(10,2),
    non_billable_hours_week numeric(5,2),
    organization_id bigint,
    overdue_tasks_count integer,
    total_workload_points numeric(10,2),
    upcoming_deadlines_count integer,
    user_id bigint NOT NULL
);


--
-- Name: user_workload_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.user_workload ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.user_workload_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    address character varying(255),
    bio character varying(255),
    created_at timestamp(6) without time zone,
    email character varying(255) NOT NULL,
    enabled boolean NOT NULL,
    first_name character varying(255),
    image_url character varying(255),
    last_name character varying(255),
    non_locked boolean NOT NULL,
    organization_id bigint,
    password character varying(255) NOT NULL,
    phone character varying(255),
    title character varying(255),
    using_mfa boolean NOT NULL
);


--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: v_active_case_assignments; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.v_active_case_assignments (
    id bigint,
    case_id bigint NOT NULL,
    case_number character varying(255) NOT NULL,
    case_title character varying(255) NOT NULL,
    user_id bigint NOT NULL,
    attorney_name character varying(511),
    role_type integer NOT NULL,
    workload_weight numeric(5,2),
    assigned_at timestamp without time zone,
    expertise_match_score numeric(5,2)
);


--
-- Name: v_active_onboarding_progress; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.v_active_onboarding_progress (
    onboarding_id bigint,
    client_id bigint NOT NULL,
    client_name character varying(511),
    template_name character varying(100) NOT NULL,
    practice_area character varying(100) NOT NULL,
    status character varying(20),
    current_stage character varying(50),
    progress_percentage numeric(5,2),
    started_at timestamp without time zone,
    expected_completion_date date,
    days_until_due integer,
    coordinator_first_name character varying(255),
    coordinator_last_name character varying(255),
    total_tasks bigint,
    completed_tasks bigint,
    overdue_tasks bigint
);


--
-- Name: v_timer_analytics_enhanced; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.v_timer_analytics_enhanced (
    id bigint,
    user_id bigint NOT NULL,
    legal_case_id bigint NOT NULL,
    start_time timestamp without time zone,
    description text,
    is_active boolean,
    paused_duration integer,
    hourly_rate numeric(10,2),
    apply_multipliers boolean,
    is_emergency boolean,
    work_type character varying(100),
    tags character varying(500),
    created_at timestamp without time zone,
    case_name character varying(255),
    case_number character varying(255),
    case_type character varying(255),
    case_status character varying(20),
    first_name character varying(255),
    last_name character varying(255),
    user_email character varying(255),
    case_default_rate numeric(10,2),
    case_allow_multipliers boolean,
    weekend_multiplier numeric(5,2),
    after_hours_multiplier numeric(5,2),
    emergency_multiplier numeric(5,2),
    current_duration_seconds bigint,
    current_duration_hours numeric(26,4),
    estimated_amount numeric(36,6)
);


--
-- Name: v_user_workload_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.v_user_workload_summary (
    user_id bigint,
    attorney_name character varying(511),
    active_cases_count bigint,
    total_workload_points numeric(10,2),
    capacity_percentage numeric(5,2),
    max_capacity_points numeric(10,2),
    overdue_tasks_count bigint,
    upcoming_deadlines_count bigint,
    workload_status character varying(10)
);


--
-- Name: v_workflow_performance_summary; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.v_workflow_performance_summary (
    workflow_type character varying(30) NOT NULL,
    total_workflows bigint,
    total_executions numeric(32,0),
    successful_executions numeric(32,0),
    failed_executions numeric(32,0),
    average_success_rate numeric(6,2),
    avg_execution_time_seconds numeric(13,2),
    latest_period date
);


--
-- Name: vendor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.vendor (
    id bigint NOT NULL,
    contact character varying(255),
    created_at timestamp(6) without time zone NOT NULL,
    name character varying(255) NOT NULL,
    organization_id bigint,
    tax_id character varying(255),
    updated_at timestamp(6) without time zone
);


--
-- Name: vendor_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.vendor ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.vendor_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: vendors; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.vendors (
    id bigint NOT NULL,
    name character varying(150) NOT NULL,
    contact_email character varying(100),
    contact_phone character varying(30),
    address text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: vendors_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.vendors_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: vendors_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.vendors_id_seq OWNED BY public.vendors.id;


--
-- Name: workflow_optimization_recommendations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workflow_optimization_recommendations (
    id bigint NOT NULL,
    workflow_type character varying(30) NOT NULL,
    workflow_id bigint,
    recommendation_type character varying(30) CONSTRAINT workflow_optimization_recommendati_recommendation_type_not_null NOT NULL,
    title character varying(200) NOT NULL,
    description text NOT NULL,
    impact_assessment jsonb,
    implementation_difficulty character varying(20),
    estimated_time_savings_percentage numeric(5,2),
    priority_score numeric(5,2),
    status character varying(20),
    reviewed_by bigint,
    reviewed_at timestamp without time zone,
    implementation_notes text,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: workflow_optimization_recommendations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workflow_optimization_recommendations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workflow_optimization_recommendations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workflow_optimization_recommendations_id_seq OWNED BY public.workflow_optimization_recommendations.id;


--
-- Name: workflow_performance_metrics; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workflow_performance_metrics (
    id bigint NOT NULL,
    workflow_type character varying(30) NOT NULL,
    workflow_id bigint,
    metric_period character varying(20) NOT NULL,
    period_start date NOT NULL,
    period_end date NOT NULL,
    total_executions integer,
    successful_executions integer,
    failed_executions integer,
    success_rate numeric(5,2),
    average_execution_time_seconds integer,
    median_execution_time_seconds integer,
    total_processing_time_seconds bigint,
    bottleneck_steps jsonb,
    common_errors jsonb,
    improvement_suggestions jsonb,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


--
-- Name: workflow_performance_metrics_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workflow_performance_metrics_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workflow_performance_metrics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workflow_performance_metrics_id_seq OWNED BY public.workflow_performance_metrics.id;


--
-- Name: workflow_step_executions; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workflow_step_executions (
    id bigint NOT NULL,
    instance_id bigint NOT NULL,
    step_id bigint NOT NULL,
    assignee_id bigint,
    status character varying(100),
    comments text,
    executed_at timestamp without time zone,
    due_date timestamp without time zone
);


--
-- Name: workflow_step_executions_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workflow_step_executions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workflow_step_executions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workflow_step_executions_id_seq OWNED BY public.workflow_step_executions.id;


--
-- Name: workflow_steps; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workflow_steps (
    id bigint NOT NULL,
    workflow_id bigint NOT NULL,
    step_order integer NOT NULL,
    step_name character varying(255) NOT NULL,
    step_type character varying(100) NOT NULL,
    role_required character varying(100),
    user_id bigint,
    is_required boolean,
    auto_approve boolean,
    timeout_hours integer
);


--
-- Name: workflow_steps_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workflow_steps_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workflow_steps_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workflow_steps_id_seq OWNED BY public.workflow_steps.id;


--
-- Name: workload_calculations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workload_calculations (
    id bigint NOT NULL,
    calculation_date date NOT NULL,
    case_points text,
    created_at timestamp(6) without time zone NOT NULL,
    factors text,
    organization_id bigint NOT NULL,
    total_points numeric(10,2) NOT NULL,
    user_id bigint NOT NULL
);


--
-- Name: workload_calculations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.workload_calculations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.workload_calculations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: workspace_activity_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workspace_activity_log (
    id bigint NOT NULL,
    workspace_id bigint NOT NULL,
    user_id bigint NOT NULL,
    activity_type character varying(100) NOT NULL,
    activity_description character varying(500),
    entity_type character varying(50),
    entity_id bigint,
    activity_data jsonb,
    created_at timestamp without time zone
);


--
-- Name: workspace_activity_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workspace_activity_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workspace_activity_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workspace_activity_log_id_seq OWNED BY public.workspace_activity_log.id;


--
-- Name: workspace_annotations; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workspace_annotations (
    id bigint NOT NULL,
    workspace_id bigint NOT NULL,
    user_id bigint NOT NULL,
    message_id bigint,
    annotation_type character varying(100) NOT NULL,
    annotation_text text,
    highlighted_text text,
    position_data jsonb,
    tags jsonb,
    color character varying(20),
    replies_count integer,
    parent_annotation_id bigint,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    is_resolved boolean,
    resolved_at timestamp without time zone,
    resolved_by_user_id bigint
);


--
-- Name: workspace_annotations_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workspace_annotations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workspace_annotations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workspace_annotations_id_seq OWNED BY public.workspace_annotations.id;


--
-- Name: workspace_participants; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.workspace_participants (
    id bigint NOT NULL,
    workspace_id bigint NOT NULL,
    user_id bigint NOT NULL,
    role character varying(100) NOT NULL,
    can_invite boolean,
    can_edit boolean,
    can_delete boolean,
    joined_at timestamp without time zone,
    last_seen_at timestamp without time zone,
    is_active boolean,
    messages_contributed integer,
    notify_on_message boolean,
    notify_on_annotation boolean
);


--
-- Name: workspace_participants_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.workspace_participants_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


--
-- Name: workspace_participants_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.workspace_participants_id_seq OWNED BY public.workspace_participants.id;


--
-- Name: account_verifications id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.account_verifications ALTER COLUMN id SET DEFAULT nextval('public.account_verifications_id_seq'::regclass);


--
-- Name: activity_summary id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.activity_summary ALTER COLUMN id SET DEFAULT nextval('public.activity_summary_id_seq'::regclass);


--
-- Name: ai_audit_logs id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_audit_logs ALTER COLUMN id SET DEFAULT nextval('public.ai_audit_logs_id_seq'::regclass);


--
-- Name: ai_document_generations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_document_generations ALTER COLUMN id SET DEFAULT nextval('public.ai_document_generations_id_seq'::regclass);


--
-- Name: ai_drafting_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_drafting_templates ALTER COLUMN id SET DEFAULT nextval('public.ai_drafting_templates_id_seq'::regclass);


--
-- Name: ai_task_suggestions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_task_suggestions ALTER COLUMN id SET DEFAULT nextval('public.ai_task_suggestions_id_seq'::regclass);


--
-- Name: ai_usage_analytics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_usage_analytics ALTER COLUMN id SET DEFAULT nextval('public.ai_usage_analytics_id_seq'::regclass);


--
-- Name: ai_usage_quota id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_usage_quota ALTER COLUMN id SET DEFAULT nextval('public.ai_usage_quota_id_seq'::regclass);


--
-- Name: ai_user_preferences id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_user_preferences ALTER COLUMN id SET DEFAULT nextval('public.ai_user_preferences_id_seq'::regclass);


--
-- Name: ai_user_profiles id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_user_profiles ALTER COLUMN id SET DEFAULT nextval('public.ai_user_profiles_id_seq'::regclass);


--
-- Name: ai_workspace_document_comments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_comments ALTER COLUMN id SET DEFAULT nextval('public.ai_workspace_document_comments_id_seq'::regclass);


--
-- Name: annotation_reactions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.annotation_reactions ALTER COLUMN id SET DEFAULT nextval('public.annotation_reactions_id_seq'::regclass);


--
-- Name: approval_workflows id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.approval_workflows ALTER COLUMN id SET DEFAULT nextval('public.approval_workflows_id_seq'::regclass);


--
-- Name: argument_simulations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.argument_simulations ALTER COLUMN id SET DEFAULT nextval('public.argument_simulations_id_seq'::regclass);


--
-- Name: attorney_assignment_rules id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_assignment_rules ALTER COLUMN id SET DEFAULT nextval('public.attorney_assignment_rules_id_seq'::regclass);


--
-- Name: attorney_assignments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_assignments ALTER COLUMN id SET DEFAULT nextval('public.attorney_assignments_id_seq'::regclass);


--
-- Name: attorney_performance_metrics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_performance_metrics ALTER COLUMN id SET DEFAULT nextval('public.attorney_performance_metrics_id_seq'::regclass);


--
-- Name: attorney_unavailable_periods id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_unavailable_periods ALTER COLUMN id SET DEFAULT nextval('public.attorney_unavailable_periods_id_seq'::regclass);


--
-- Name: audit_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.audit_log ALTER COLUMN id SET DEFAULT nextval('public.audit_log_id_seq'::regclass);


--
-- Name: automated_document_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.automated_document_templates ALTER COLUMN id SET DEFAULT nextval('public.automated_document_templates_id_seq'::regclass);


--
-- Name: calendar_event_participants id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.calendar_event_participants ALTER COLUMN id SET DEFAULT nextval('public.calendar_event_participants_id_seq'::regclass);


--
-- Name: case_access_requests id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_access_requests ALTER COLUMN id SET DEFAULT nextval('public.case_access_requests_id_seq'::regclass);


--
-- Name: case_budgets id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_budgets ALTER COLUMN id SET DEFAULT nextval('public.case_budgets_id_seq'::regclass);


--
-- Name: case_creation_executions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_creation_executions ALTER COLUMN id SET DEFAULT nextval('public.case_creation_executions_id_seq'::regclass);


--
-- Name: case_creation_workflows id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_creation_workflows ALTER COLUMN id SET DEFAULT nextval('public.case_creation_workflows_id_seq'::regclass);


--
-- Name: case_fee_agreements id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_fee_agreements ALTER COLUMN id SET DEFAULT nextval('public.case_fee_agreements_id_seq'::regclass);


--
-- Name: case_outcome_predictions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_outcome_predictions ALTER COLUMN id SET DEFAULT nextval('public.case_outcome_predictions_id_seq'::regclass);


--
-- Name: case_role_assignments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_role_assignments ALTER COLUMN id SET DEFAULT nextval('public.case_role_assignments_id_seq'::regclass);


--
-- Name: case_team_assignments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_team_assignments ALTER COLUMN id SET DEFAULT nextval('public.case_team_assignments_id_seq'::regclass);


--
-- Name: case_timeline id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_timeline ALTER COLUMN id SET DEFAULT nextval('public.case_timeline_id_seq'::regclass);


--
-- Name: case_types id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_types ALTER COLUMN id SET DEFAULT nextval('public.case_types_id_seq'::regclass);


--
-- Name: chronological_index id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.chronological_index ALTER COLUMN id SET DEFAULT nextval('public.chronological_index_id_seq'::regclass);


--
-- Name: citation_analyses id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.citation_analyses ALTER COLUMN id SET DEFAULT nextval('public.citation_analyses_id_seq'::regclass);


--
-- Name: citation_cache id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.citation_cache ALTER COLUMN id SET DEFAULT nextval('public.citation_cache_id_seq'::regclass);


--
-- Name: citation_library id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.citation_library ALTER COLUMN id SET DEFAULT nextval('public.citation_library_id_seq'::regclass);


--
-- Name: client_intake_submissions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_intake_submissions ALTER COLUMN id SET DEFAULT nextval('public.client_intake_submissions_id_seq'::regclass);


--
-- Name: client_onboarding_instances id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_onboarding_instances ALTER COLUMN id SET DEFAULT nextval('public.client_onboarding_instances_id_seq'::regclass);


--
-- Name: client_onboarding_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_onboarding_templates ALTER COLUMN id SET DEFAULT nextval('public.client_onboarding_templates_id_seq'::regclass);


--
-- Name: client_portal_access_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_portal_access_log ALTER COLUMN id SET DEFAULT nextval('public.client_portal_access_log_id_seq'::regclass);


--
-- Name: client_research_shares id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_research_shares ALTER COLUMN id SET DEFAULT nextval('public.client_research_shares_id_seq'::regclass);


--
-- Name: collection_search_cache id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_search_cache ALTER COLUMN id SET DEFAULT nextval('public.collection_search_cache_id_seq'::regclass);


--
-- Name: collection_search_history id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_search_history ALTER COLUMN id SET DEFAULT nextval('public.collection_search_history_id_seq'::regclass);


--
-- Name: consultation_notifications id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.consultation_notifications ALTER COLUMN id SET DEFAULT nextval('public.consultation_notifications_id_seq'::regclass);


--
-- Name: consultations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.consultations ALTER COLUMN id SET DEFAULT nextval('public.consultations_id_seq'::regclass);


--
-- Name: court_filing_systems id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.court_filing_systems ALTER COLUMN id SET DEFAULT nextval('public.court_filing_systems_id_seq'::regclass);


--
-- Name: court_filings id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.court_filings ALTER COLUMN id SET DEFAULT nextval('public.court_filings_id_seq'::regclass);


--
-- Name: courts id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.courts ALTER COLUMN id SET DEFAULT nextval('public.courts_id_seq'::regclass);


--
-- Name: crm_automation_rules id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.crm_automation_rules ALTER COLUMN id SET DEFAULT nextval('public.crm_automation_rules_id_seq'::regclass);


--
-- Name: crm_email_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.crm_email_templates ALTER COLUMN id SET DEFAULT nextval('public.crm_email_templates_id_seq'::regclass);


--
-- Name: crm_settings id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.crm_settings ALTER COLUMN id SET DEFAULT nextval('public.crm_settings_id_seq'::regclass);


--
-- Name: department_role_assignments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.department_role_assignments ALTER COLUMN id SET DEFAULT nextval('public.department_role_assignments_id_seq'::regclass);


--
-- Name: deposition_prep_sessions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.deposition_prep_sessions ALTER COLUMN id SET DEFAULT nextval('public.deposition_prep_sessions_id_seq'::regclass);


--
-- Name: deposition_questions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.deposition_questions ALTER COLUMN id SET DEFAULT nextval('public.deposition_questions_id_seq'::regclass);


--
-- Name: discovery_drafts id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.discovery_drafts ALTER COLUMN id SET DEFAULT nextval('public.discovery_drafts_id_seq'::regclass);


--
-- Name: doc_automation_categories id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_categories ALTER COLUMN id SET DEFAULT nextval('public.doc_automation_categories_id_seq'::regclass);


--
-- Name: doc_automation_fields id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_fields ALTER COLUMN id SET DEFAULT nextval('public.doc_automation_fields_id_seq'::regclass);


--
-- Name: doc_automation_permissions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_permissions ALTER COLUMN id SET DEFAULT nextval('public.doc_automation_permissions_id_seq'::regclass);


--
-- Name: doc_automation_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_templates ALTER COLUMN id SET DEFAULT nextval('public.doc_automation_templates_id_seq'::regclass);


--
-- Name: doc_generation_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_generation_log ALTER COLUMN id SET DEFAULT nextval('public.doc_generation_log_id_seq'::regclass);


--
-- Name: document_access_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_access_log ALTER COLUMN id SET DEFAULT nextval('public.document_access_log_id_seq'::regclass);


--
-- Name: document_categories id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_categories ALTER COLUMN id SET DEFAULT nextval('public.document_categories_id_seq'::regclass);


--
-- Name: document_contradictions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_contradictions ALTER COLUMN id SET DEFAULT nextval('public.document_contradictions_id_seq'::regclass);


--
-- Name: document_deadlines id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_deadlines ALTER COLUMN id SET DEFAULT nextval('public.document_deadlines_id_seq'::regclass);


--
-- Name: document_embeddings id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_embeddings ALTER COLUMN id SET DEFAULT nextval('public.document_embeddings_id_seq'::regclass);


--
-- Name: document_routing id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_routing ALTER COLUMN id SET DEFAULT nextval('public.document_routing_id_seq'::regclass);


--
-- Name: document_statuses id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_statuses ALTER COLUMN id SET DEFAULT nextval('public.document_statuses_id_seq'::regclass);


--
-- Name: document_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_templates ALTER COLUMN id SET DEFAULT nextval('public.document_templates_id_seq'::regclass);


--
-- Name: document_versions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_versions ALTER COLUMN id SET DEFAULT nextval('public.document_versions_id_seq'::regclass);


--
-- Name: document_visibility_overrides id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_visibility_overrides ALTER COLUMN id SET DEFAULT nextval('public.document_visibility_overrides_id_seq'::regclass);


--
-- Name: document_workflow_instances id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_workflow_instances ALTER COLUMN id SET DEFAULT nextval('public.document_workflow_instances_id_seq'::regclass);


--
-- Name: esignature_audit_trail id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esignature_audit_trail ALTER COLUMN id SET DEFAULT nextval('public.esignature_audit_trail_id_seq'::regclass);


--
-- Name: esignature_recipients id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esignature_recipients ALTER COLUMN id SET DEFAULT nextval('public.esignature_recipients_id_seq'::regclass);


--
-- Name: esignature_requests id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esignature_requests ALTER COLUMN id SET DEFAULT nextval('public.esignature_requests_id_seq'::regclass);


--
-- Name: events id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.events ALTER COLUMN id SET DEFAULT nextval('public.events_id_seq'::regclass);


--
-- Name: expense id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expense ALTER COLUMN id SET DEFAULT nextval('public.expense_id_seq'::regclass);


--
-- Name: expensecategory id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expensecategory ALTER COLUMN id SET DEFAULT nextval('public.expensecategory_id_seq'::regclass);


--
-- Name: fee_agreement_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fee_agreement_templates ALTER COLUMN id SET DEFAULT nextval('public.fee_agreement_templates_id_seq'::regclass);


--
-- Name: financial_access_permissions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.financial_access_permissions ALTER COLUMN id SET DEFAULT nextval('public.financial_access_permissions_id_seq'::regclass);


--
-- Name: generated_documents id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.generated_documents ALTER COLUMN id SET DEFAULT nextval('public.generated_documents_id_seq'::regclass);


--
-- Name: hearing_assistant_queries id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.hearing_assistant_queries ALTER COLUMN id SET DEFAULT nextval('public.hearing_assistant_queries_id_seq'::regclass);


--
-- Name: hearing_assistant_sessions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.hearing_assistant_sessions ALTER COLUMN id SET DEFAULT nextval('public.hearing_assistant_sessions_id_seq'::regclass);


--
-- Name: invoice_item id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_item ALTER COLUMN id SET DEFAULT nextval('public.invoice_item_id_seq'::regclass);


--
-- Name: invoice_payments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_payments ALTER COLUMN id SET DEFAULT nextval('public.invoice_payments_id_seq'::regclass);


--
-- Name: invoice_workflow_executions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_executions ALTER COLUMN id SET DEFAULT nextval('public.invoice_workflow_executions_id_seq'::regclass);


--
-- Name: invoice_workflow_rules id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_rules ALTER COLUMN id SET DEFAULT nextval('public.invoice_workflow_rules_id_seq'::regclass);


--
-- Name: invoiceitem id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoiceitem ALTER COLUMN id SET DEFAULT nextval('public.invoiceitem_id_seq'::regclass);


--
-- Name: judge_analytics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.judge_analytics ALTER COLUMN id SET DEFAULT nextval('public.judge_analytics_id_seq'::regclass);


--
-- Name: jurisdiction_comparisons id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.jurisdiction_comparisons ALTER COLUMN id SET DEFAULT nextval('public.jurisdiction_comparisons_id_seq'::regclass);


--
-- Name: jurisdictions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.jurisdictions ALTER COLUMN id SET DEFAULT nextval('public.jurisdictions_id_seq'::regclass);


--
-- Name: lead_qualification_assessments id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_qualification_assessments ALTER COLUMN id SET DEFAULT nextval('public.lead_qualification_assessments_id_seq'::regclass);


--
-- Name: lead_scoring_configs id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_scoring_configs ALTER COLUMN id SET DEFAULT nextval('public.lead_scoring_configs_id_seq'::regclass);


--
-- Name: lead_scoring_results id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_scoring_results ALTER COLUMN id SET DEFAULT nextval('public.lead_scoring_results_id_seq'::regclass);


--
-- Name: legal_citations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_citations ALTER COLUMN id SET DEFAULT nextval('public.legal_citations_id_seq'::regclass);


--
-- Name: legal_development_alerts id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_development_alerts ALTER COLUMN id SET DEFAULT nextval('public.legal_development_alerts_id_seq'::regclass);


--
-- Name: legal_development_subscriptions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_development_subscriptions ALTER COLUMN id SET DEFAULT nextval('public.legal_development_subscriptions_id_seq'::regclass);


--
-- Name: legal_document_summaries id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_document_summaries ALTER COLUMN id SET DEFAULT nextval('public.legal_document_summaries_id_seq'::regclass);


--
-- Name: legal_folder_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_folder_templates ALTER COLUMN id SET DEFAULT nextval('public.legal_folder_templates_id_seq'::regclass);


--
-- Name: legal_research_audit_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_research_audit_log ALTER COLUMN id SET DEFAULT nextval('public.legal_research_audit_log_id_seq'::regclass);


--
-- Name: legience_audit_logs id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legience_audit_logs ALTER COLUMN id SET DEFAULT nextval('public.legience_audit_logs_id_seq'::regclass);


--
-- Name: live_assistant_suggestions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.live_assistant_suggestions ALTER COLUMN id SET DEFAULT nextval('public.live_assistant_suggestions_id_seq'::regclass);


--
-- Name: matter_phases id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_phases ALTER COLUMN id SET DEFAULT nextval('public.matter_phases_id_seq'::regclass);


--
-- Name: matter_timeline_events id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_timeline_events ALTER COLUMN id SET DEFAULT nextval('public.matter_timeline_events_id_seq'::regclass);


--
-- Name: matter_vault_documents id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_vault_documents ALTER COLUMN id SET DEFAULT nextval('public.matter_vault_documents_id_seq'::regclass);


--
-- Name: mobile_time_entries id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.mobile_time_entries ALTER COLUMN id SET DEFAULT nextval('public.mobile_time_entries_id_seq'::regclass);


--
-- Name: onboarding_tasks id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.onboarding_tasks ALTER COLUMN id SET DEFAULT nextval('public.onboarding_tasks_id_seq'::regclass);


--
-- Name: organizations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organizations ALTER COLUMN id SET DEFAULT nextval('public.organizations_id_seq'::regclass);


--
-- Name: payment id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.payment ALTER COLUMN id SET DEFAULT nextval('public.payment_id_seq'::regclass);


--
-- Name: permission_audit_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permission_audit_log ALTER COLUMN id SET DEFAULT nextval('public.permission_audit_log_id_seq'::regclass);


--
-- Name: permission_audit_logs id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permission_audit_logs ALTER COLUMN id SET DEFAULT nextval('public.permission_audit_logs_id_seq'::regclass);


--
-- Name: permission_dependencies id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permission_dependencies ALTER COLUMN id SET DEFAULT nextval('public.permission_dependencies_id_seq'::regclass);


--
-- Name: permissions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permissions ALTER COLUMN id SET DEFAULT nextval('public.permissions_id_seq'::regclass);


--
-- Name: practice_areas id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.practice_areas ALTER COLUMN id SET DEFAULT nextval('public.practice_areas_id_seq'::regclass);


--
-- Name: precedent_documents id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.precedent_documents ALTER COLUMN id SET DEFAULT nextval('public.precedent_documents_id_seq'::regclass);


--
-- Name: precedent_similarities id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.precedent_similarities ALTER COLUMN id SET DEFAULT nextval('public.precedent_similarities_id_seq'::regclass);


--
-- Name: qualification_criteria id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.qualification_criteria ALTER COLUMN id SET DEFAULT nextval('public.qualification_criteria_id_seq'::regclass);


--
-- Name: qualification_responses id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.qualification_responses ALTER COLUMN id SET DEFAULT nextval('public.qualification_responses_id_seq'::regclass);


--
-- Name: qualification_workflows id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.qualification_workflows ALTER COLUMN id SET DEFAULT nextval('public.qualification_workflows_id_seq'::regclass);


--
-- Name: receipt id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipt ALTER COLUMN id SET DEFAULT nextval('public.receipt_id_seq'::regclass);


--
-- Name: reminder_queue id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reminder_queue ALTER COLUMN id SET DEFAULT nextval('public.reminder_queue_id_seq'::regclass);


--
-- Name: research_conversation_messages id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_conversation_messages ALTER COLUMN id SET DEFAULT nextval('public.research_conversation_messages_id_seq'::regclass);


--
-- Name: research_conversations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_conversations ALTER COLUMN id SET DEFAULT nextval('public.research_conversations_id_seq'::regclass);


--
-- Name: research_mind_map_edges id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_mind_map_edges ALTER COLUMN id SET DEFAULT nextval('public.research_mind_map_edges_id_seq'::regclass);


--
-- Name: research_mind_map_nodes id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_mind_map_nodes ALTER COLUMN id SET DEFAULT nextval('public.research_mind_map_nodes_id_seq'::regclass);


--
-- Name: research_verification_scores id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_verification_scores ALTER COLUMN id SET DEFAULT nextval('public.research_verification_scores_id_seq'::regclass);


--
-- Name: research_workspaces id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_workspaces ALTER COLUMN id SET DEFAULT nextval('public.research_workspaces_id_seq'::regclass);


--
-- Name: reset_password_verifications id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reset_password_verifications ALTER COLUMN id SET DEFAULT nextval('public.reset_password_verifications_id_seq'::regclass);


--
-- Name: shepardization_history id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.shepardization_history ALTER COLUMN id SET DEFAULT nextval('public.shepardization_history_id_seq'::regclass);


--
-- Name: sms_templates id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.sms_templates ALTER COLUMN id SET DEFAULT nextval('public.sms_templates_id_seq'::regclass);


--
-- Name: success_metrics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.success_metrics ALTER COLUMN id SET DEFAULT nextval('public.success_metrics_id_seq'::regclass);


--
-- Name: system_health_metrics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.system_health_metrics ALTER COLUMN id SET DEFAULT nextval('public.system_health_metrics_id_seq'::regclass);


--
-- Name: template_library id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.template_library ALTER COLUMN id SET DEFAULT nextval('public.template_library_id_seq'::regclass);


--
-- Name: template_usage id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.template_usage ALTER COLUMN id SET DEFAULT nextval('public.template_usage_id_seq'::regclass);


--
-- Name: template_usage_analytics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.template_usage_analytics ALTER COLUMN id SET DEFAULT nextval('public.template_usage_analytics_id_seq'::regclass);


--
-- Name: time_entry_approvals id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.time_entry_approvals ALTER COLUMN id SET DEFAULT nextval('public.time_entry_approvals_id_seq'::regclass);


--
-- Name: time_reports_cache id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.time_reports_cache ALTER COLUMN id SET DEFAULT nextval('public.time_reports_cache_id_seq'::regclass);


--
-- Name: two_factor_verifications id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.two_factor_verifications ALTER COLUMN id SET DEFAULT nextval('public.two_factor_verifications_id_seq'::regclass);


--
-- Name: user_events id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_events ALTER COLUMN id SET DEFAULT nextval('public.user_events_id_seq'::regclass);


--
-- Name: vendors id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.vendors ALTER COLUMN id SET DEFAULT nextval('public.vendors_id_seq'::regclass);


--
-- Name: workflow_optimization_recommendations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_optimization_recommendations ALTER COLUMN id SET DEFAULT nextval('public.workflow_optimization_recommendations_id_seq'::regclass);


--
-- Name: workflow_performance_metrics id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_performance_metrics ALTER COLUMN id SET DEFAULT nextval('public.workflow_performance_metrics_id_seq'::regclass);


--
-- Name: workflow_step_executions id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_step_executions ALTER COLUMN id SET DEFAULT nextval('public.workflow_step_executions_id_seq'::regclass);


--
-- Name: workflow_steps id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_steps ALTER COLUMN id SET DEFAULT nextval('public.workflow_steps_id_seq'::regclass);


--
-- Name: workspace_activity_log id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workspace_activity_log ALTER COLUMN id SET DEFAULT nextval('public.workspace_activity_log_id_seq'::regclass);


--
-- Name: workspace_annotations id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workspace_annotations ALTER COLUMN id SET DEFAULT nextval('public.workspace_annotations_id_seq'::regclass);


--
-- Name: workspace_participants id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workspace_participants ALTER COLUMN id SET DEFAULT nextval('public.workspace_participants_id_seq'::regclass);


--
-- Name: account_verifications account_verifications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.account_verifications
    ADD CONSTRAINT account_verifications_pkey PRIMARY KEY (id);


--
-- Name: action_items action_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.action_items
    ADD CONSTRAINT action_items_pkey PRIMARY KEY (id);


--
-- Name: active_timers active_timers_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.active_timers
    ADD CONSTRAINT active_timers_pkey PRIMARY KEY (id);


--
-- Name: activity_summary activity_summary_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.activity_summary
    ADD CONSTRAINT activity_summary_pkey PRIMARY KEY (id);


--
-- Name: ai_analysis_messages ai_analysis_messages_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_analysis_messages
    ADD CONSTRAINT ai_analysis_messages_pkey PRIMARY KEY (id);


--
-- Name: ai_audit_logs ai_audit_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_audit_logs
    ADD CONSTRAINT ai_audit_logs_pkey PRIMARY KEY (id);


--
-- Name: ai_closing_documents ai_closing_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_closing_documents
    ADD CONSTRAINT ai_closing_documents_pkey PRIMARY KEY (id);


--
-- Name: ai_conversation_messages ai_conversation_messages_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_conversation_messages
    ADD CONSTRAINT ai_conversation_messages_pkey PRIMARY KEY (id);


--
-- Name: ai_conversation_sessions ai_conversation_sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_conversation_sessions
    ADD CONSTRAINT ai_conversation_sessions_pkey PRIMARY KEY (id);


--
-- Name: ai_criminal_cases ai_criminal_cases_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_criminal_cases
    ADD CONSTRAINT ai_criminal_cases_pkey PRIMARY KEY (id);


--
-- Name: ai_criminal_motions ai_criminal_motions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_criminal_motions
    ADD CONSTRAINT ai_criminal_motions_pkey PRIMARY KEY (id);


--
-- Name: ai_document_analysis ai_document_analysis_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_document_analysis
    ADD CONSTRAINT ai_document_analysis_pkey PRIMARY KEY (id);


--
-- Name: ai_document_generation_log ai_document_generation_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_document_generation_log
    ADD CONSTRAINT ai_document_generation_log_pkey PRIMARY KEY (id);


--
-- Name: ai_document_generations ai_document_generations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_document_generations
    ADD CONSTRAINT ai_document_generations_pkey PRIMARY KEY (id);


--
-- Name: ai_drafting_templates ai_drafting_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_drafting_templates
    ADD CONSTRAINT ai_drafting_templates_pkey PRIMARY KEY (id);


--
-- Name: ai_edit_suggestions ai_edit_suggestions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_edit_suggestions
    ADD CONSTRAINT ai_edit_suggestions_pkey PRIMARY KEY (id);


--
-- Name: ai_editing_sessions ai_editing_sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_editing_sessions
    ADD CONSTRAINT ai_editing_sessions_pkey PRIMARY KEY (id);


--
-- Name: ai_family_law_calculations ai_family_law_calculations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_family_law_calculations
    ADD CONSTRAINT ai_family_law_calculations_pkey PRIMARY KEY (id);


--
-- Name: ai_family_law_cases ai_family_law_cases_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_family_law_cases
    ADD CONSTRAINT ai_family_law_cases_pkey PRIMARY KEY (id);


--
-- Name: ai_immigration_cases ai_immigration_cases_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_immigration_cases
    ADD CONSTRAINT ai_immigration_cases_pkey PRIMARY KEY (id);


--
-- Name: ai_immigration_documents ai_immigration_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_immigration_documents
    ADD CONSTRAINT ai_immigration_documents_pkey PRIMARY KEY (id);


--
-- Name: ai_immigration_forms ai_immigration_forms_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_immigration_forms
    ADD CONSTRAINT ai_immigration_forms_pkey PRIMARY KEY (id);


--
-- Name: ai_legal_templates ai_legal_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_legal_templates
    ADD CONSTRAINT ai_legal_templates_pkey PRIMARY KEY (id);


--
-- Name: ai_ma_court_rules ai_ma_court_rules_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_ma_court_rules
    ADD CONSTRAINT ai_ma_court_rules_pkey PRIMARY KEY (id);


--
-- Name: ai_ma_sentencing_guidelines ai_ma_sentencing_guidelines_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_ma_sentencing_guidelines
    ADD CONSTRAINT ai_ma_sentencing_guidelines_pkey PRIMARY KEY (id);


--
-- Name: ai_ma_statutes ai_ma_statutes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_ma_statutes
    ADD CONSTRAINT ai_ma_statutes_pkey PRIMARY KEY (id);


--
-- Name: ai_patent_applications ai_patent_applications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_patent_applications
    ADD CONSTRAINT ai_patent_applications_pkey PRIMARY KEY (id);


--
-- Name: ai_patent_prior_art ai_patent_prior_art_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_patent_prior_art
    ADD CONSTRAINT ai_patent_prior_art_pkey PRIMARY KEY (id);


--
-- Name: ai_patent_searches ai_patent_searches_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_patent_searches
    ADD CONSTRAINT ai_patent_searches_pkey PRIMARY KEY (id);


--
-- Name: ai_pdf_form_fields ai_pdf_form_fields_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_pdf_form_fields
    ADD CONSTRAINT ai_pdf_form_fields_pkey PRIMARY KEY (id);


--
-- Name: ai_real_estate_documents ai_real_estate_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_real_estate_documents
    ADD CONSTRAINT ai_real_estate_documents_pkey PRIMARY KEY (id);


--
-- Name: ai_real_estate_transactions ai_real_estate_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_real_estate_transactions
    ADD CONSTRAINT ai_real_estate_transactions_pkey PRIMARY KEY (id);


--
-- Name: ai_research_cache ai_research_cache_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_research_cache
    ADD CONSTRAINT ai_research_cache_pkey PRIMARY KEY (id);


--
-- Name: ai_style_guides ai_style_guides_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_style_guides
    ADD CONSTRAINT ai_style_guides_pkey PRIMARY KEY (id);


--
-- Name: ai_task_suggestions ai_task_suggestions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_task_suggestions
    ADD CONSTRAINT ai_task_suggestions_pkey PRIMARY KEY (id);


--
-- Name: ai_template_variables ai_template_variables_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_template_variables
    ADD CONSTRAINT ai_template_variables_pkey PRIMARY KEY (id);


--
-- Name: ai_usage_analytics ai_usage_analytics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_usage_analytics
    ADD CONSTRAINT ai_usage_analytics_pkey PRIMARY KEY (id);


--
-- Name: ai_usage_metrics ai_usage_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_usage_metrics
    ADD CONSTRAINT ai_usage_metrics_pkey PRIMARY KEY (id);


--
-- Name: ai_usage_quota ai_usage_quota_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_usage_quota
    ADD CONSTRAINT ai_usage_quota_pkey PRIMARY KEY (id);


--
-- Name: ai_user_preferences ai_user_preferences_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_user_preferences
    ADD CONSTRAINT ai_user_preferences_pkey PRIMARY KEY (id);


--
-- Name: ai_user_profiles ai_user_profiles_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_user_profiles
    ADD CONSTRAINT ai_user_profiles_pkey PRIMARY KEY (id);


--
-- Name: ai_workspace_document_citations ai_workspace_document_citations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_citations
    ADD CONSTRAINT ai_workspace_document_citations_pkey PRIMARY KEY (id);


--
-- Name: ai_workspace_document_comments ai_workspace_document_comments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_comments
    ADD CONSTRAINT ai_workspace_document_comments_pkey PRIMARY KEY (id);


--
-- Name: ai_workspace_document_versions ai_workspace_document_versions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_versions
    ADD CONSTRAINT ai_workspace_document_versions_pkey PRIMARY KEY (id);


--
-- Name: ai_workspace_documents ai_workspace_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_documents
    ADD CONSTRAINT ai_workspace_documents_pkey PRIMARY KEY (id);


--
-- Name: annotation_reactions annotation_reactions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.annotation_reactions
    ADD CONSTRAINT annotation_reactions_pkey PRIMARY KEY (id);


--
-- Name: annotation_replies annotation_replies_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.annotation_replies
    ADD CONSTRAINT annotation_replies_pkey PRIMARY KEY (id);


--
-- Name: appointment_requests appointment_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.appointment_requests
    ADD CONSTRAINT appointment_requests_pkey PRIMARY KEY (id);


--
-- Name: approval_workflows approval_workflows_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.approval_workflows
    ADD CONSTRAINT approval_workflows_pkey PRIMARY KEY (id);


--
-- Name: argument_simulations argument_simulations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.argument_simulations
    ADD CONSTRAINT argument_simulations_pkey PRIMARY KEY (id);


--
-- Name: assignment_rules assignment_rules_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.assignment_rules
    ADD CONSTRAINT assignment_rules_pkey PRIMARY KEY (id);


--
-- Name: attorney_assignment_rules attorney_assignment_rules_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_assignment_rules
    ADD CONSTRAINT attorney_assignment_rules_pkey PRIMARY KEY (id);


--
-- Name: attorney_assignments attorney_assignments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_assignments
    ADD CONSTRAINT attorney_assignments_pkey PRIMARY KEY (id);


--
-- Name: attorney_availability attorney_availability_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_availability
    ADD CONSTRAINT attorney_availability_pkey PRIMARY KEY (id);


--
-- Name: attorney_expertise attorney_expertise_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_expertise
    ADD CONSTRAINT attorney_expertise_pkey PRIMARY KEY (id);


--
-- Name: attorney_performance_metrics attorney_performance_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_performance_metrics
    ADD CONSTRAINT attorney_performance_metrics_pkey PRIMARY KEY (id);


--
-- Name: attorney_unavailable_periods attorney_unavailable_periods_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_unavailable_periods
    ADD CONSTRAINT attorney_unavailable_periods_pkey PRIMARY KEY (id);


--
-- Name: attorneys attorneys_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorneys
    ADD CONSTRAINT attorneys_pkey PRIMARY KEY (id);


--
-- Name: audit_log audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.audit_log
    ADD CONSTRAINT audit_log_pkey PRIMARY KEY (id);


--
-- Name: automated_document_templates automated_document_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.automated_document_templates
    ADD CONSTRAINT automated_document_templates_pkey PRIMARY KEY (id);


--
-- Name: billing_cycles billing_cycles_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.billing_cycles
    ADD CONSTRAINT billing_cycles_pkey PRIMARY KEY (id);


--
-- Name: billing_rates billing_rates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.billing_rates
    ADD CONSTRAINT billing_rates_pkey PRIMARY KEY (id);


--
-- Name: calendar_event_participants calendar_event_participants_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.calendar_event_participants
    ADD CONSTRAINT calendar_event_participants_pkey PRIMARY KEY (id);


--
-- Name: calendar_events calendar_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.calendar_events
    ADD CONSTRAINT calendar_events_pkey PRIMARY KEY (id);


--
-- Name: case_access_requests case_access_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_access_requests
    ADD CONSTRAINT case_access_requests_pkey PRIMARY KEY (id);


--
-- Name: case_activities case_activities_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_activities
    ADD CONSTRAINT case_activities_pkey PRIMARY KEY (id);


--
-- Name: case_assignment_history case_assignment_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignment_history
    ADD CONSTRAINT case_assignment_history_pkey PRIMARY KEY (id);


--
-- Name: case_assignments case_assignments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignments
    ADD CONSTRAINT case_assignments_pkey PRIMARY KEY (id);


--
-- Name: case_budgets case_budgets_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_budgets
    ADD CONSTRAINT case_budgets_pkey PRIMARY KEY (id);


--
-- Name: case_creation_executions case_creation_executions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_creation_executions
    ADD CONSTRAINT case_creation_executions_pkey PRIMARY KEY (id);


--
-- Name: case_creation_workflows case_creation_workflows_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_creation_workflows
    ADD CONSTRAINT case_creation_workflows_pkey PRIMARY KEY (id);


--
-- Name: case_fee_agreements case_fee_agreements_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_fee_agreements
    ADD CONSTRAINT case_fee_agreements_pkey PRIMARY KEY (id);


--
-- Name: case_notes case_notes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_notes
    ADD CONSTRAINT case_notes_pkey PRIMARY KEY (id);


--
-- Name: case_outcome_predictions case_outcome_predictions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_outcome_predictions
    ADD CONSTRAINT case_outcome_predictions_pkey PRIMARY KEY (id);


--
-- Name: case_rate_configurations case_rate_configurations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_rate_configurations
    ADD CONSTRAINT case_rate_configurations_pkey PRIMARY KEY (id);


--
-- Name: case_reminders case_reminders_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_reminders
    ADD CONSTRAINT case_reminders_pkey PRIMARY KEY (id);


--
-- Name: case_role_assignments case_role_assignments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_role_assignments
    ADD CONSTRAINT case_role_assignments_pkey PRIMARY KEY (id);


--
-- Name: case_tasks case_tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_tasks
    ADD CONSTRAINT case_tasks_pkey PRIMARY KEY (id);


--
-- Name: case_team_assignments case_team_assignments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_team_assignments
    ADD CONSTRAINT case_team_assignments_pkey PRIMARY KEY (id);


--
-- Name: case_timeline case_timeline_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_timeline
    ADD CONSTRAINT case_timeline_pkey PRIMARY KEY (id);


--
-- Name: case_timeline_progress case_timeline_progress_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_timeline_progress
    ADD CONSTRAINT case_timeline_progress_pkey PRIMARY KEY (id);


--
-- Name: case_timeline_templates case_timeline_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_timeline_templates
    ADD CONSTRAINT case_timeline_templates_pkey PRIMARY KEY (id);


--
-- Name: case_transfer_requests case_transfer_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_transfer_requests
    ADD CONSTRAINT case_transfer_requests_pkey PRIMARY KEY (id);


--
-- Name: case_types case_types_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_types
    ADD CONSTRAINT case_types_pkey PRIMARY KEY (id);


--
-- Name: case_workflow_executions case_workflow_executions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_executions
    ADD CONSTRAINT case_workflow_executions_pkey PRIMARY KEY (id);


--
-- Name: case_workflow_step_executions case_workflow_step_executions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_step_executions
    ADD CONSTRAINT case_workflow_step_executions_pkey PRIMARY KEY (id);


--
-- Name: case_workflow_templates case_workflow_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_templates
    ADD CONSTRAINT case_workflow_templates_pkey PRIMARY KEY (id);


--
-- Name: chronological_index chronological_index_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.chronological_index
    ADD CONSTRAINT chronological_index_pkey PRIMARY KEY (id);


--
-- Name: citation_analyses citation_analyses_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.citation_analyses
    ADD CONSTRAINT citation_analyses_pkey PRIMARY KEY (id);


--
-- Name: citation_cache citation_cache_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.citation_cache
    ADD CONSTRAINT citation_cache_pkey PRIMARY KEY (id);


--
-- Name: citation_library citation_library_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.citation_library
    ADD CONSTRAINT citation_library_pkey PRIMARY KEY (id);


--
-- Name: client_intake_submissions client_intake_submissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_intake_submissions
    ADD CONSTRAINT client_intake_submissions_pkey PRIMARY KEY (id);


--
-- Name: client_onboarding_instances client_onboarding_instances_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_onboarding_instances
    ADD CONSTRAINT client_onboarding_instances_pkey PRIMARY KEY (id);


--
-- Name: client_onboarding_templates client_onboarding_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_onboarding_templates
    ADD CONSTRAINT client_onboarding_templates_pkey PRIMARY KEY (id);


--
-- Name: client_portal_access_log client_portal_access_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_portal_access_log
    ADD CONSTRAINT client_portal_access_log_pkey PRIMARY KEY (id);


--
-- Name: client_research_shares client_research_shares_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.client_research_shares
    ADD CONSTRAINT client_research_shares_pkey PRIMARY KEY (id);


--
-- Name: clients clients_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.clients
    ADD CONSTRAINT clients_pkey PRIMARY KEY (id);


--
-- Name: collection_documents collection_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_documents
    ADD CONSTRAINT collection_documents_pkey PRIMARY KEY (id);


--
-- Name: collection_search_cache collection_search_cache_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_search_cache
    ADD CONSTRAINT collection_search_cache_pkey PRIMARY KEY (id);


--
-- Name: collection_search_history collection_search_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_search_history
    ADD CONSTRAINT collection_search_history_pkey PRIMARY KEY (id);


--
-- Name: communication_logs communication_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.communication_logs
    ADD CONSTRAINT communication_logs_pkey PRIMARY KEY (id);


--
-- Name: conflict_checks conflict_checks_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.conflict_checks
    ADD CONSTRAINT conflict_checks_pkey PRIMARY KEY (id);


--
-- Name: consultation_notifications consultation_notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.consultation_notifications
    ADD CONSTRAINT consultation_notifications_pkey PRIMARY KEY (id);


--
-- Name: consultations consultations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.consultations
    ADD CONSTRAINT consultations_pkey PRIMARY KEY (id);


--
-- Name: court_filing_systems court_filing_systems_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.court_filing_systems
    ADD CONSTRAINT court_filing_systems_pkey PRIMARY KEY (id);


--
-- Name: court_filings court_filings_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.court_filings
    ADD CONSTRAINT court_filings_pkey PRIMARY KEY (id);


--
-- Name: courts courts_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.courts
    ADD CONSTRAINT courts_pkey PRIMARY KEY (id);


--
-- Name: crm_automation_rules crm_automation_rules_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.crm_automation_rules
    ADD CONSTRAINT crm_automation_rules_pkey PRIMARY KEY (id);


--
-- Name: crm_email_templates crm_email_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.crm_email_templates
    ADD CONSTRAINT crm_email_templates_pkey PRIMARY KEY (id);


--
-- Name: crm_settings crm_settings_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.crm_settings
    ADD CONSTRAINT crm_settings_pkey PRIMARY KEY (id);


--
-- Name: department_role_assignments department_role_assignments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.department_role_assignments
    ADD CONSTRAINT department_role_assignments_pkey PRIMARY KEY (id);


--
-- Name: deposition_prep_sessions deposition_prep_sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.deposition_prep_sessions
    ADD CONSTRAINT deposition_prep_sessions_pkey PRIMARY KEY (id);


--
-- Name: deposition_questions deposition_questions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.deposition_questions
    ADD CONSTRAINT deposition_questions_pkey PRIMARY KEY (id);


--
-- Name: discovery_drafts discovery_drafts_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.discovery_drafts
    ADD CONSTRAINT discovery_drafts_pkey PRIMARY KEY (id);


--
-- Name: doc_automation_categories doc_automation_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_categories
    ADD CONSTRAINT doc_automation_categories_pkey PRIMARY KEY (id);


--
-- Name: doc_automation_fields doc_automation_fields_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_fields
    ADD CONSTRAINT doc_automation_fields_pkey PRIMARY KEY (id);


--
-- Name: doc_automation_permissions doc_automation_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_permissions
    ADD CONSTRAINT doc_automation_permissions_pkey PRIMARY KEY (id);


--
-- Name: doc_automation_templates doc_automation_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_automation_templates
    ADD CONSTRAINT doc_automation_templates_pkey PRIMARY KEY (id);


--
-- Name: doc_generation_log doc_generation_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.doc_generation_log
    ADD CONSTRAINT doc_generation_log_pkey PRIMARY KEY (id);


--
-- Name: document_access_log document_access_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_access_log
    ADD CONSTRAINT document_access_log_pkey PRIMARY KEY (id);


--
-- Name: document_annotations document_annotations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_annotations
    ADD CONSTRAINT document_annotations_pkey PRIMARY KEY (id);


--
-- Name: document_categories document_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_categories
    ADD CONSTRAINT document_categories_pkey PRIMARY KEY (id);


--
-- Name: document_chunks document_chunks_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_chunks
    ADD CONSTRAINT document_chunks_pkey PRIMARY KEY (id);


--
-- Name: document_collections document_collections_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_collections
    ADD CONSTRAINT document_collections_pkey PRIMARY KEY (id);


--
-- Name: document_contradictions document_contradictions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_contradictions
    ADD CONSTRAINT document_contradictions_pkey PRIMARY KEY (id);


--
-- Name: document_deadlines document_deadlines_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_deadlines
    ADD CONSTRAINT document_deadlines_pkey PRIMARY KEY (id);


--
-- Name: document_embeddings document_embeddings_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_embeddings
    ADD CONSTRAINT document_embeddings_pkey PRIMARY KEY (id);


--
-- Name: document_generations document_generations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_generations
    ADD CONSTRAINT document_generations_pkey PRIMARY KEY (id);


--
-- Name: document_relationships document_relationships_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_relationships
    ADD CONSTRAINT document_relationships_pkey PRIMARY KEY (id);


--
-- Name: document_routing document_routing_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_routing
    ADD CONSTRAINT document_routing_pkey PRIMARY KEY (id);


--
-- Name: document_statuses document_statuses_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_statuses
    ADD CONSTRAINT document_statuses_pkey PRIMARY KEY (id);


--
-- Name: document_tags document_tags_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_tags
    ADD CONSTRAINT document_tags_pkey PRIMARY KEY (document_id);


--
-- Name: document_templates document_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_templates
    ADD CONSTRAINT document_templates_pkey PRIMARY KEY (id);


--
-- Name: document_versions document_versions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_versions
    ADD CONSTRAINT document_versions_pkey PRIMARY KEY (id);


--
-- Name: document_visibility_overrides document_visibility_overrides_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_visibility_overrides
    ADD CONSTRAINT document_visibility_overrides_pkey PRIMARY KEY (id);


--
-- Name: document_workflow_instances document_workflow_instances_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.document_workflow_instances
    ADD CONSTRAINT document_workflow_instances_pkey PRIMARY KEY (id);


--
-- Name: documents documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.documents
    ADD CONSTRAINT documents_pkey PRIMARY KEY (id);


--
-- Name: documentversion documentversion_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.documentversion
    ADD CONSTRAINT documentversion_pkey PRIMARY KEY (id);


--
-- Name: drafting_sessions drafting_sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.drafting_sessions
    ADD CONSTRAINT drafting_sessions_pkey PRIMARY KEY (id);


--
-- Name: email_templates email_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.email_templates
    ADD CONSTRAINT email_templates_pkey PRIMARY KEY (id);


--
-- Name: esignature_audit_trail esignature_audit_trail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esignature_audit_trail
    ADD CONSTRAINT esignature_audit_trail_pkey PRIMARY KEY (id);


--
-- Name: esignature_recipients esignature_recipients_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esignature_recipients
    ADD CONSTRAINT esignature_recipients_pkey PRIMARY KEY (id);


--
-- Name: esignature_requests esignature_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esignature_requests
    ADD CONSTRAINT esignature_requests_pkey PRIMARY KEY (id);


--
-- Name: events events_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.events
    ADD CONSTRAINT events_pkey PRIMARY KEY (id);


--
-- Name: expense_categories expense_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expense_categories
    ADD CONSTRAINT expense_categories_pkey PRIMARY KEY (id);


--
-- Name: expense expense_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expense
    ADD CONSTRAINT expense_pkey PRIMARY KEY (id);


--
-- Name: expensecategory expensecategory_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expensecategory
    ADD CONSTRAINT expensecategory_pkey PRIMARY KEY (id);


--
-- Name: expenses expenses_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT expenses_pkey PRIMARY KEY (id);


--
-- Name: fee_agreement_templates fee_agreement_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fee_agreement_templates
    ADD CONSTRAINT fee_agreement_templates_pkey PRIMARY KEY (id);


--
-- Name: file_access_logs file_access_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_access_logs
    ADD CONSTRAINT file_access_logs_pkey PRIMARY KEY (id);


--
-- Name: file_comments file_comments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_comments
    ADD CONSTRAINT file_comments_pkey PRIMARY KEY (id);


--
-- Name: file_item_tags file_item_tags_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_item_tags
    ADD CONSTRAINT file_item_tags_pkey PRIMARY KEY (file_id);


--
-- Name: file_items file_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_items
    ADD CONSTRAINT file_items_pkey PRIMARY KEY (id);


--
-- Name: file_metadata file_metadata_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_metadata
    ADD CONSTRAINT file_metadata_pkey PRIMARY KEY (file_id);


--
-- Name: file_permissions file_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_permissions
    ADD CONSTRAINT file_permissions_pkey PRIMARY KEY (id);


--
-- Name: file_shares file_shares_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_shares
    ADD CONSTRAINT file_shares_pkey PRIMARY KEY (id);


--
-- Name: file_tags file_tags_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_tags
    ADD CONSTRAINT file_tags_pkey PRIMARY KEY (id);


--
-- Name: file_versions file_versions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_versions
    ADD CONSTRAINT file_versions_pkey PRIMARY KEY (id);


--
-- Name: financial_access_permissions financial_access_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.financial_access_permissions
    ADD CONSTRAINT financial_access_permissions_pkey PRIMARY KEY (id);


--
-- Name: folders folders_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.folders
    ADD CONSTRAINT folders_pkey PRIMARY KEY (id);


--
-- Name: generated_documents generated_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.generated_documents
    ADD CONSTRAINT generated_documents_pkey PRIMARY KEY (id);


--
-- Name: hearing_assistant_queries hearing_assistant_queries_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.hearing_assistant_queries
    ADD CONSTRAINT hearing_assistant_queries_pkey PRIMARY KEY (id);


--
-- Name: hearing_assistant_sessions hearing_assistant_sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.hearing_assistant_sessions
    ADD CONSTRAINT hearing_assistant_sessions_pkey PRIMARY KEY (id);


--
-- Name: intake_forms intake_forms_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.intake_forms
    ADD CONSTRAINT intake_forms_pkey PRIMARY KEY (id);


--
-- Name: intake_submissions intake_submissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.intake_submissions
    ADD CONSTRAINT intake_submissions_pkey PRIMARY KEY (id);


--
-- Name: invoice_item invoice_item_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_item
    ADD CONSTRAINT invoice_item_pkey PRIMARY KEY (id);


--
-- Name: invoice_items invoice_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_items
    ADD CONSTRAINT invoice_items_pkey PRIMARY KEY (id);


--
-- Name: invoice_line_items invoice_line_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_line_items
    ADD CONSTRAINT invoice_line_items_pkey PRIMARY KEY (id);


--
-- Name: invoice_payments invoice_payments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_payments
    ADD CONSTRAINT invoice_payments_pkey PRIMARY KEY (id);


--
-- Name: invoice_reminders invoice_reminders_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_reminders
    ADD CONSTRAINT invoice_reminders_pkey PRIMARY KEY (id);


--
-- Name: invoice_template_items invoice_template_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_template_items
    ADD CONSTRAINT invoice_template_items_pkey PRIMARY KEY (id);


--
-- Name: invoice_templates invoice_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_templates
    ADD CONSTRAINT invoice_templates_pkey PRIMARY KEY (id);


--
-- Name: invoice_workflow_executions invoice_workflow_executions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_executions
    ADD CONSTRAINT invoice_workflow_executions_pkey PRIMARY KEY (id);


--
-- Name: invoice_workflow_rules invoice_workflow_rules_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_rules
    ADD CONSTRAINT invoice_workflow_rules_pkey PRIMARY KEY (id);


--
-- Name: invoiceitem invoiceitem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoiceitem
    ADD CONSTRAINT invoiceitem_pkey PRIMARY KEY (id);


--
-- Name: invoices invoices_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoices
    ADD CONSTRAINT invoices_pkey PRIMARY KEY (id);


--
-- Name: judge_analytics judge_analytics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.judge_analytics
    ADD CONSTRAINT judge_analytics_pkey PRIMARY KEY (id);


--
-- Name: jurisdiction_comparisons jurisdiction_comparisons_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.jurisdiction_comparisons
    ADD CONSTRAINT jurisdiction_comparisons_pkey PRIMARY KEY (id);


--
-- Name: jurisdictions jurisdictions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.jurisdictions
    ADD CONSTRAINT jurisdictions_pkey PRIMARY KEY (id);


--
-- Name: knowledge_insights knowledge_insights_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.knowledge_insights
    ADD CONSTRAINT knowledge_insights_pkey PRIMARY KEY (id);


--
-- Name: lead_activities lead_activities_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_activities
    ADD CONSTRAINT lead_activities_pkey PRIMARY KEY (id);


--
-- Name: lead_pipeline_history lead_pipeline_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_pipeline_history
    ADD CONSTRAINT lead_pipeline_history_pkey PRIMARY KEY (id);


--
-- Name: lead_qualification_assessments lead_qualification_assessments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_qualification_assessments
    ADD CONSTRAINT lead_qualification_assessments_pkey PRIMARY KEY (id);


--
-- Name: lead_scoring_configs lead_scoring_configs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_scoring_configs
    ADD CONSTRAINT lead_scoring_configs_pkey PRIMARY KEY (id);


--
-- Name: lead_scoring_results lead_scoring_results_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_scoring_results
    ADD CONSTRAINT lead_scoring_results_pkey PRIMARY KEY (id);


--
-- Name: leads leads_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.leads
    ADD CONSTRAINT leads_pkey PRIMARY KEY (id);


--
-- Name: legal_cases legal_cases_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_cases
    ADD CONSTRAINT legal_cases_pkey PRIMARY KEY (id);


--
-- Name: legal_citations legal_citations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_citations
    ADD CONSTRAINT legal_citations_pkey PRIMARY KEY (id);


--
-- Name: legal_development_alerts legal_development_alerts_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_development_alerts
    ADD CONSTRAINT legal_development_alerts_pkey PRIMARY KEY (id);


--
-- Name: legal_development_subscriptions legal_development_subscriptions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_development_subscriptions
    ADD CONSTRAINT legal_development_subscriptions_pkey PRIMARY KEY (id);


--
-- Name: legal_document_summaries legal_document_summaries_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_document_summaries
    ADD CONSTRAINT legal_document_summaries_pkey PRIMARY KEY (id);


--
-- Name: legal_documents legal_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_documents
    ADD CONSTRAINT legal_documents_pkey PRIMARY KEY (id);


--
-- Name: legal_folder_templates legal_folder_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_folder_templates
    ADD CONSTRAINT legal_folder_templates_pkey PRIMARY KEY (id);


--
-- Name: legal_research_audit_log legal_research_audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_research_audit_log
    ADD CONSTRAINT legal_research_audit_log_pkey PRIMARY KEY (id);


--
-- Name: legience_audit_logs legience_audit_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legience_audit_logs
    ADD CONSTRAINT legience_audit_logs_pkey PRIMARY KEY (id);


--
-- Name: live_assistant_suggestions live_assistant_suggestions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.live_assistant_suggestions
    ADD CONSTRAINT live_assistant_suggestions_pkey PRIMARY KEY (id);


--
-- Name: matter_phases matter_phases_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_phases
    ADD CONSTRAINT matter_phases_pkey PRIMARY KEY (id);


--
-- Name: matter_timeline_events matter_timeline_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_timeline_events
    ADD CONSTRAINT matter_timeline_events_pkey PRIMARY KEY (id);


--
-- Name: matter_types matter_types_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_types
    ADD CONSTRAINT matter_types_pkey PRIMARY KEY (id);


--
-- Name: matter_vault_documents matter_vault_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_vault_documents
    ADD CONSTRAINT matter_vault_documents_pkey PRIMARY KEY (id);


--
-- Name: message_threads message_threads_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.message_threads
    ADD CONSTRAINT message_threads_pkey PRIMARY KEY (id);


--
-- Name: messages messages_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.messages
    ADD CONSTRAINT messages_pkey PRIMARY KEY (id);


--
-- Name: mobile_time_entries mobile_time_entries_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.mobile_time_entries
    ADD CONSTRAINT mobile_time_entries_pkey PRIMARY KEY (id);


--
-- Name: notification_tokens notification_tokens_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification_tokens
    ADD CONSTRAINT notification_tokens_pkey PRIMARY KEY (id);


--
-- Name: onboarding_tasks onboarding_tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.onboarding_tasks
    ADD CONSTRAINT onboarding_tasks_pkey PRIMARY KEY (id);


--
-- Name: organization_invitations organization_invitations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organization_invitations
    ADD CONSTRAINT organization_invitations_pkey PRIMARY KEY (id);


--
-- Name: organizations organizations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organizations
    ADD CONSTRAINT organizations_pkey PRIMARY KEY (id);


--
-- Name: organizations organizations_slug_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organizations
    ADD CONSTRAINT organizations_slug_key UNIQUE (slug);


--
-- Name: payment payment_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.payment
    ADD CONSTRAINT payment_pkey PRIMARY KEY (id);


--
-- Name: payment_transactions payment_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.payment_transactions
    ADD CONSTRAINT payment_transactions_pkey PRIMARY KEY (id);


--
-- Name: payments payments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.payments
    ADD CONSTRAINT payments_pkey PRIMARY KEY (id);


--
-- Name: performance_metrics performance_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.performance_metrics
    ADD CONSTRAINT performance_metrics_pkey PRIMARY KEY (id);


--
-- Name: permission_audit_log permission_audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permission_audit_log
    ADD CONSTRAINT permission_audit_log_pkey PRIMARY KEY (id);


--
-- Name: permission_audit_logs permission_audit_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permission_audit_logs
    ADD CONSTRAINT permission_audit_logs_pkey PRIMARY KEY (id);


--
-- Name: permission_dependencies permission_dependencies_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permission_dependencies
    ADD CONSTRAINT permission_dependencies_pkey PRIMARY KEY (id);


--
-- Name: permissions permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_pkey PRIMARY KEY (id);


--
-- Name: pipeline_stages pipeline_stages_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.pipeline_stages
    ADD CONSTRAINT pipeline_stages_pkey PRIMARY KEY (id);


--
-- Name: practice_areas practice_areas_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.practice_areas
    ADD CONSTRAINT practice_areas_pkey PRIMARY KEY (id);


--
-- Name: precedent_documents precedent_documents_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.precedent_documents
    ADD CONSTRAINT precedent_documents_pkey PRIMARY KEY (id);


--
-- Name: precedent_similarities precedent_similarities_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.precedent_similarities
    ADD CONSTRAINT precedent_similarities_pkey PRIMARY KEY (id);


--
-- Name: qualification_criteria qualification_criteria_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.qualification_criteria
    ADD CONSTRAINT qualification_criteria_pkey PRIMARY KEY (id);


--
-- Name: qualification_responses qualification_responses_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.qualification_responses
    ADD CONSTRAINT qualification_responses_pkey PRIMARY KEY (id);


--
-- Name: qualification_workflows qualification_workflows_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.qualification_workflows
    ADD CONSTRAINT qualification_workflows_pkey PRIMARY KEY (id);


--
-- Name: receipt receipt_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipt
    ADD CONSTRAINT receipt_pkey PRIMARY KEY (id);


--
-- Name: receipts receipts_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.receipts
    ADD CONSTRAINT receipts_pkey PRIMARY KEY (id);


--
-- Name: reminder_queue reminder_queue_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reminder_queue
    ADD CONSTRAINT reminder_queue_pkey PRIMARY KEY (id);


--
-- Name: research_action_items research_action_items_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_action_items
    ADD CONSTRAINT research_action_items_pkey PRIMARY KEY (id);


--
-- Name: research_annotation research_annotation_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_annotation
    ADD CONSTRAINT research_annotation_pkey PRIMARY KEY (id);


--
-- Name: research_conversation_messages research_conversation_messages_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_conversation_messages
    ADD CONSTRAINT research_conversation_messages_pkey PRIMARY KEY (id);


--
-- Name: research_conversations research_conversations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_conversations
    ADD CONSTRAINT research_conversations_pkey PRIMARY KEY (id);


--
-- Name: research_mind_map_edges research_mind_map_edges_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_mind_map_edges
    ADD CONSTRAINT research_mind_map_edges_pkey PRIMARY KEY (id);


--
-- Name: research_mind_map_nodes research_mind_map_nodes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_mind_map_nodes
    ADD CONSTRAINT research_mind_map_nodes_pkey PRIMARY KEY (id);


--
-- Name: research_session research_session_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_session
    ADD CONSTRAINT research_session_pkey PRIMARY KEY (id);


--
-- Name: research_verification_scores research_verification_scores_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_verification_scores
    ADD CONSTRAINT research_verification_scores_pkey PRIMARY KEY (id);


--
-- Name: research_workspaces research_workspaces_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_workspaces
    ADD CONSTRAINT research_workspaces_pkey PRIMARY KEY (id);


--
-- Name: reset_password_verifications reset_password_verifications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.reset_password_verifications
    ADD CONSTRAINT reset_password_verifications_pkey PRIMARY KEY (id);


--
-- Name: role_migration_map role_migration_map_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.role_migration_map
    ADD CONSTRAINT role_migration_map_pkey PRIMARY KEY (old_role_name);


--
-- Name: role_permissions role_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_pkey PRIMARY KEY (role_id, permission_id);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: search_history search_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.search_history
    ADD CONSTRAINT search_history_pkey PRIMARY KEY (id);


--
-- Name: shepardization_history shepardization_history_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.shepardization_history
    ADD CONSTRAINT shepardization_history_pkey PRIMARY KEY (id);


--
-- Name: signature_audit_logs signature_audit_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.signature_audit_logs
    ADD CONSTRAINT signature_audit_logs_pkey PRIMARY KEY (id);


--
-- Name: signature_reminder_queue signature_reminder_queue_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.signature_reminder_queue
    ADD CONSTRAINT signature_reminder_queue_pkey PRIMARY KEY (id);


--
-- Name: signature_requests signature_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.signature_requests
    ADD CONSTRAINT signature_requests_pkey PRIMARY KEY (id);


--
-- Name: signature_templates signature_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.signature_templates
    ADD CONSTRAINT signature_templates_pkey PRIMARY KEY (id);


--
-- Name: sms_templates sms_templates_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.sms_templates
    ADD CONSTRAINT sms_templates_pkey PRIMARY KEY (id);


--
-- Name: success_metrics success_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.success_metrics
    ADD CONSTRAINT success_metrics_pkey PRIMARY KEY (id);


--
-- Name: system_health_metrics system_health_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.system_health_metrics
    ADD CONSTRAINT system_health_metrics_pkey PRIMARY KEY (id);


--
-- Name: task_comments task_comments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.task_comments
    ADD CONSTRAINT task_comments_pkey PRIMARY KEY (id);


--
-- Name: template_library template_library_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.template_library
    ADD CONSTRAINT template_library_pkey PRIMARY KEY (id);


--
-- Name: template_usage_analytics template_usage_analytics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.template_usage_analytics
    ADD CONSTRAINT template_usage_analytics_pkey PRIMARY KEY (id);


--
-- Name: template_usage template_usage_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.template_usage
    ADD CONSTRAINT template_usage_pkey PRIMARY KEY (id);


--
-- Name: thread_attorney_status thread_attorney_status_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.thread_attorney_status
    ADD CONSTRAINT thread_attorney_status_pkey PRIMARY KEY (id);


--
-- Name: time_entries time_entries_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.time_entries
    ADD CONSTRAINT time_entries_pkey PRIMARY KEY (id);


--
-- Name: time_entry_approvals time_entry_approvals_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.time_entry_approvals
    ADD CONSTRAINT time_entry_approvals_pkey PRIMARY KEY (id);


--
-- Name: time_entry_audit_log time_entry_audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.time_entry_audit_log
    ADD CONSTRAINT time_entry_audit_log_pkey PRIMARY KEY (id);


--
-- Name: time_reports_cache time_reports_cache_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.time_reports_cache
    ADD CONSTRAINT time_reports_cache_pkey PRIMARY KEY (id);


--
-- Name: timeline_events timeline_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.timeline_events
    ADD CONSTRAINT timeline_events_pkey PRIMARY KEY (id);


--
-- Name: timer_sessions timer_sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.timer_sessions
    ADD CONSTRAINT timer_sessions_pkey PRIMARY KEY (id);


--
-- Name: trust_account_transactions trust_account_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_account_transactions
    ADD CONSTRAINT trust_account_transactions_pkey PRIMARY KEY (id);


--
-- Name: trust_accounts trust_accounts_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_accounts
    ADD CONSTRAINT trust_accounts_pkey PRIMARY KEY (id);


--
-- Name: two_factor_verifications two_factor_verifications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.two_factor_verifications
    ADD CONSTRAINT two_factor_verifications_pkey PRIMARY KEY (id);


--
-- Name: research_session uk16w3bhgosng3d5tqjn4a3rrng; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.research_session
    ADD CONSTRAINT uk16w3bhgosng3d5tqjn4a3rrng UNIQUE (session_id);


--
-- Name: ai_immigration_forms uk25nf8iodeb6yef0c1nuhwuaq8; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_immigration_forms
    ADD CONSTRAINT uk25nf8iodeb6yef0c1nuhwuaq8 UNIQUE (form_number);


--
-- Name: ai_research_cache uk26mpd6wfojw18carw6lfilx4d; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_research_cache
    ADD CONSTRAINT uk26mpd6wfojw18carw6lfilx4d UNIQUE (query_hash);


--
-- Name: email_templates uk57lojflgusywyihcoxex20bml; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.email_templates
    ADD CONSTRAINT uk57lojflgusywyihcoxex20bml UNIQUE (name);


--
-- Name: leads uk5dw9kmt497rahmbxg530pqers; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.leads
    ADD CONSTRAINT uk5dw9kmt497rahmbxg530pqers UNIQUE (email);


--
-- Name: users uk6dotkott2kjsp8vw4d0m25fb7; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT uk6dotkott2kjsp8vw4d0m25fb7 UNIQUE (email);


--
-- Name: invoice_templates uk6x7cqarq9eggvyn42vg44ltoh; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_templates
    ADD CONSTRAINT uk6x7cqarq9eggvyn42vg44ltoh UNIQUE (name);


--
-- Name: file_shares uk76yrel9c5d30m59bsis0e9jse; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_shares
    ADD CONSTRAINT uk76yrel9c5d30m59bsis0e9jse UNIQUE (share_token);


--
-- Name: legal_cases uk7ehi154dgaohe2vab7byxqr2e; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legal_cases
    ADD CONSTRAINT uk7ehi154dgaohe2vab7byxqr2e UNIQUE (case_number);


--
-- Name: notification_tokens uk84bxeibgfp46l09o1fq07xsme; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.notification_tokens
    ADD CONSTRAINT uk84bxeibgfp46l09o1fq07xsme UNIQUE (token);


--
-- Name: matter_types uk9wcc8dmlgpo8tstxinu750gnp; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.matter_types
    ADD CONSTRAINT uk9wcc8dmlgpo8tstxinu750gnp UNIQUE (name);


--
-- Name: thread_attorney_status ukbxb4b902offps1t552ewr1t7i; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.thread_attorney_status
    ADD CONSTRAINT ukbxb4b902offps1t552ewr1t7i UNIQUE (thread_id, attorney_user_id);


--
-- Name: ai_patent_applications ukcte5ixw70a3lsc4xhi04iim8w; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_patent_applications
    ADD CONSTRAINT ukcte5ixw70a3lsc4xhi04iim8w UNIQUE (application_number);


--
-- Name: user_workload ukgmdv9ftkx2g0e67f3cpqpn010; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_workload
    ADD CONSTRAINT ukgmdv9ftkx2g0e67f3cpqpn010 UNIQUE (user_id, calculation_date);


--
-- Name: signature_requests ukimrvb4gci1mc3bpxsfk1bodg2; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.signature_requests
    ADD CONSTRAINT ukimrvb4gci1mc3bpxsfk1bodg2 UNIQUE (boldsign_document_id);


--
-- Name: trust_accounts ukknb03vtpfi7nrph95cbis0o4f; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_accounts
    ADD CONSTRAINT ukknb03vtpfi7nrph95cbis0o4f UNIQUE (account_number);


--
-- Name: invoices ukl1x55mfsay7co0r3m9ynvipd5; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoices
    ADD CONSTRAINT ukl1x55mfsay7co0r3m9ynvipd5 UNIQUE (invoice_number);


--
-- Name: roles ukofx66keruapi6vyqpv6f2or37; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT ukofx66keruapi6vyqpv6f2or37 UNIQUE (name);


--
-- Name: ai_ma_sentencing_guidelines ukp26s9k86d69xfayx9ctnraoct; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_ma_sentencing_guidelines
    ADD CONSTRAINT ukp26s9k86d69xfayx9ctnraoct UNIQUE (offense_code);


--
-- Name: ai_document_analysis ukq6wwcv4visvgdn1x3c0i2j8d5; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_document_analysis
    ADD CONSTRAINT ukq6wwcv4visvgdn1x3c0i2j8d5 UNIQUE (analysis_id);


--
-- Name: intake_forms ukq9g3dxetifwxk592qdpx4q244; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.intake_forms
    ADD CONSTRAINT ukq9g3dxetifwxk592qdpx4q244 UNIQUE (public_url);


--
-- Name: attorney_expertise ukqx817nkvon863ajwwpvnjhimq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_expertise
    ADD CONSTRAINT ukqx817nkvon863ajwwpvnjhimq UNIQUE (user_id, expertise_area);


--
-- Name: organization_invitations ukr9jb14q9qnygrptm9833hw9ms; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organization_invitations
    ADD CONSTRAINT ukr9jb14q9qnygrptm9833hw9ms UNIQUE (token);


--
-- Name: expenses uks34yycajvitmvaa9seb9djc12; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT uks34yycajvitmvaa9seb9djc12 UNIQUE (receipt_id);


--
-- Name: clients uksrv16ica2c1csub334bxjjb59; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.clients
    ADD CONSTRAINT uksrv16ica2c1csub334bxjjb59 UNIQUE (email);


--
-- Name: pipeline_stages ukt7u0bnpy90tfhkmymntk9o7nt; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.pipeline_stages
    ADD CONSTRAINT ukt7u0bnpy90tfhkmymntk9o7nt UNIQUE (stage_order);


--
-- Name: collection_documents ukwcxh61a81mnnnr36xgovcw79; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_documents
    ADD CONSTRAINT ukwcxh61a81mnnnr36xgovcw79 UNIQUE (collection_id, analysis_id);


--
-- Name: active_timers unique_active_timer; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.active_timers
    ADD CONSTRAINT unique_active_timer UNIQUE (user_id, legal_case_id, is_active);


--
-- Name: case_rate_configurations unique_case_rate; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_rate_configurations
    ADD CONSTRAINT unique_case_rate UNIQUE (legal_case_id);


--
-- Name: user_notification_preferences unique_user_event; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_notification_preferences
    ADD CONSTRAINT unique_user_event UNIQUE (user_id, event_type);


--
-- Name: user_events user_events_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_events
    ADD CONSTRAINT user_events_pkey PRIMARY KEY (id);


--
-- Name: user_notification_preferences user_notification_preferences_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_notification_preferences
    ADD CONSTRAINT user_notification_preferences_pkey PRIMARY KEY (id);


--
-- Name: user_notifications user_notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_notifications
    ADD CONSTRAINT user_notifications_pkey PRIMARY KEY (id);


--
-- Name: user_roles user_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_pkey PRIMARY KEY (user_id, role_id);


--
-- Name: user_workload user_workload_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_workload
    ADD CONSTRAINT user_workload_pkey PRIMARY KEY (id);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: vendor vendor_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.vendor
    ADD CONSTRAINT vendor_pkey PRIMARY KEY (id);


--
-- Name: vendors vendors_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.vendors
    ADD CONSTRAINT vendors_pkey PRIMARY KEY (id);


--
-- Name: workflow_optimization_recommendations workflow_optimization_recommendations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_optimization_recommendations
    ADD CONSTRAINT workflow_optimization_recommendations_pkey PRIMARY KEY (id);


--
-- Name: workflow_performance_metrics workflow_performance_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_performance_metrics
    ADD CONSTRAINT workflow_performance_metrics_pkey PRIMARY KEY (id);


--
-- Name: workflow_step_executions workflow_step_executions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_step_executions
    ADD CONSTRAINT workflow_step_executions_pkey PRIMARY KEY (id);


--
-- Name: workflow_steps workflow_steps_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workflow_steps
    ADD CONSTRAINT workflow_steps_pkey PRIMARY KEY (id);


--
-- Name: workload_calculations workload_calculations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workload_calculations
    ADD CONSTRAINT workload_calculations_pkey PRIMARY KEY (id);


--
-- Name: workspace_activity_log workspace_activity_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workspace_activity_log
    ADD CONSTRAINT workspace_activity_log_pkey PRIMARY KEY (id);


--
-- Name: workspace_annotations workspace_annotations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workspace_annotations
    ADD CONSTRAINT workspace_annotations_pkey PRIMARY KEY (id);


--
-- Name: workspace_participants workspace_participants_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.workspace_participants
    ADD CONSTRAINT workspace_participants_pkey PRIMARY KEY (id);


--
-- Name: idx_audit_action; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_action ON public.audit_log USING btree (action);


--
-- Name: idx_audit_created; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_created ON public.signature_audit_logs USING btree (created_at);


--
-- Name: idx_audit_entity; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_entity ON public.audit_log USING btree (entity_type, entity_id);


--
-- Name: idx_audit_event; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_event ON public.signature_audit_logs USING btree (event_type);


--
-- Name: idx_audit_org; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_org ON public.signature_audit_logs USING btree (organization_id);


--
-- Name: idx_audit_organization; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_organization ON public.audit_log USING btree (organization_id);


--
-- Name: idx_audit_recent; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_recent ON public.audit_log USING btree ("timestamp" DESC, user_id);


--
-- Name: idx_audit_request; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_request ON public.signature_audit_logs USING btree (signature_request_id);


--
-- Name: idx_audit_timestamp; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_timestamp ON public.audit_log USING btree ("timestamp");


--
-- Name: idx_audit_user; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_audit_user ON public.audit_log USING btree (user_id);


--
-- Name: idx_cache_collection_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_cache_collection_id ON public.collection_search_cache USING btree (collection_id);


--
-- Name: idx_cache_expires_at; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_cache_expires_at ON public.collection_search_cache USING btree (expires_at);


--
-- Name: idx_cache_organization; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_cache_organization ON public.collection_search_cache USING btree (organization_id);


--
-- Name: idx_case_reminders_case_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_case_reminders_case_id ON public.case_reminders USING btree (case_id);


--
-- Name: idx_case_reminders_due_date; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_case_reminders_due_date ON public.case_reminders USING btree (due_date);


--
-- Name: idx_case_reminders_org_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_case_reminders_org_id ON public.case_reminders USING btree (organization_id);


--
-- Name: idx_case_reminders_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_case_reminders_status ON public.case_reminders USING btree (status);


--
-- Name: idx_case_reminders_user_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_case_reminders_user_id ON public.case_reminders USING btree (user_id);


--
-- Name: idx_chunk_analysis_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_chunk_analysis_id ON public.document_chunks USING btree (analysis_id);


--
-- Name: idx_chunk_collection_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_chunk_collection_id ON public.document_chunks USING btree (collection_id);


--
-- Name: idx_comm_case_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_comm_case_id ON public.communication_logs USING btree (case_id);


--
-- Name: idx_comm_channel; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_comm_channel ON public.communication_logs USING btree (channel);


--
-- Name: idx_comm_client_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_comm_client_id ON public.communication_logs USING btree (client_id);


--
-- Name: idx_comm_created_at; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_comm_created_at ON public.communication_logs USING btree (created_at);


--
-- Name: idx_comm_twilio_sid; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_comm_twilio_sid ON public.communication_logs USING btree (twilio_sid);


--
-- Name: idx_comm_user_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_comm_user_id ON public.communication_logs USING btree (user_id);


--
-- Name: idx_event_type; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_event_type ON public.user_notification_preferences USING btree (event_type);


--
-- Name: idx_execution_invoice; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_execution_invoice ON public.invoice_workflow_executions USING btree (invoice_id);


--
-- Name: idx_execution_organization; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_execution_organization ON public.invoice_workflow_executions USING btree (organization_id);


--
-- Name: idx_execution_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_execution_status ON public.invoice_workflow_executions USING btree (status);


--
-- Name: idx_execution_workflow; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_execution_workflow ON public.invoice_workflow_executions USING btree (workflow_rule_id);


--
-- Name: idx_history_collection_user; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_history_collection_user ON public.collection_search_history USING btree (collection_id, user_id);


--
-- Name: idx_history_created_at; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_history_created_at ON public.collection_search_history USING btree (created_at);


--
-- Name: idx_history_organization; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_history_organization ON public.collection_search_history USING btree (organization_id);


--
-- Name: idx_invoice_payments_date; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_invoice_payments_date ON public.invoice_payments USING btree (payment_date);


--
-- Name: idx_invoice_payments_invoice; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_invoice_payments_invoice ON public.invoice_payments USING btree (invoice_id);


--
-- Name: idx_invoice_payments_org_date; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_invoice_payments_org_date ON public.invoice_payments USING btree (organization_id, payment_date);


--
-- Name: idx_invoice_payments_org_invoice; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_invoice_payments_org_invoice ON public.invoice_payments USING btree (organization_id, invoice_id);


--
-- Name: idx_invoice_payments_organization_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_invoice_payments_organization_id ON public.invoice_payments USING btree (organization_id);


--
-- Name: idx_metrics_category; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_metrics_category ON public.performance_metrics USING btree (category);


--
-- Name: idx_metrics_created; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_metrics_created ON public.performance_metrics USING btree (created_at);


--
-- Name: idx_metrics_name_period; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_metrics_name_period ON public.performance_metrics USING btree (metric_name, period_start, period_end);


--
-- Name: idx_organizations_plan_type; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_organizations_plan_type ON public.organizations USING btree (plan_type);


--
-- Name: idx_organizations_slug; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_organizations_slug ON public.organizations USING btree (slug);


--
-- Name: idx_permission_audit_logs_org_timestamp; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_permission_audit_logs_org_timestamp ON public.permission_audit_logs USING btree (organization_id, "timestamp");


--
-- Name: idx_permission_audit_logs_organization_id; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_permission_audit_logs_organization_id ON public.permission_audit_logs USING btree (organization_id);


--
-- Name: idx_reminder_event; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_reminder_event ON public.reminder_queue USING btree (event_id);


--
-- Name: idx_reminder_organization; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_reminder_organization ON public.reminder_queue USING btree (organization_id);


--
-- Name: idx_reminder_request; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_reminder_request ON public.signature_reminder_queue USING btree (signature_request_id);


--
-- Name: idx_reminder_scheduled; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_reminder_scheduled ON public.reminder_queue USING btree (scheduled_time);


--
-- Name: idx_reminder_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_reminder_status ON public.reminder_queue USING btree (status);


--
-- Name: idx_sig_boldsign; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_sig_boldsign ON public.signature_requests USING btree (boldsign_document_id);


--
-- Name: idx_sig_case; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_sig_case ON public.signature_requests USING btree (case_id);


--
-- Name: idx_sig_client; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_sig_client ON public.signature_requests USING btree (client_id);


--
-- Name: idx_sig_expires; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_sig_expires ON public.signature_requests USING btree (expires_at);


--
-- Name: idx_sig_org; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_sig_org ON public.signature_requests USING btree (organization_id);


--
-- Name: idx_sig_status; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_sig_status ON public.signature_requests USING btree (status);


--
-- Name: idx_template_active; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_template_active ON public.signature_templates USING btree (is_active);


--
-- Name: idx_template_category; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_template_category ON public.signature_templates USING btree (category);


--
-- Name: idx_template_org; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_template_org ON public.signature_templates USING btree (organization_id);


--
-- Name: idx_user_preferences; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_user_preferences ON public.user_notification_preferences USING btree (user_id);


--
-- Name: idx_workflow_active; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_workflow_active ON public.invoice_workflow_rules USING btree (is_active);


--
-- Name: idx_workflow_organization; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_workflow_organization ON public.invoice_workflow_rules USING btree (organization_id);


--
-- Name: idx_workflow_trigger; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_workflow_trigger ON public.invoice_workflow_rules USING btree (trigger_event, is_active);


--
-- Name: uk_collection_query_user; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX uk_collection_query_user ON public.collection_search_cache USING btree (collection_id, query_hash, user_id);


--
-- Name: invoice_payments trg_update_invoice_payment_status; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trg_update_invoice_payment_status AFTER INSERT OR UPDATE ON public.invoice_payments FOR EACH ROW EXECUTE FUNCTION public.update_invoice_payment_status();


--
-- Name: invoice_reminders fk1a0hd9nl7gujnynnwdvsvajsc; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_reminders
    ADD CONSTRAINT fk1a0hd9nl7gujnynnwdvsvajsc FOREIGN KEY (created_by_workflow) REFERENCES public.invoice_workflow_rules(id);


--
-- Name: appointment_requests fk1erdls03y6jdt8fm8br83o4b5; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.appointment_requests
    ADD CONSTRAINT fk1erdls03y6jdt8fm8br83o4b5 FOREIGN KEY (client_id) REFERENCES public.clients(id);


--
-- Name: case_transfer_requests fk1r4gn4gkntmupcjtsgc8mok3; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_transfer_requests
    ADD CONSTRAINT fk1r4gn4gkntmupcjtsgc8mok3 FOREIGN KEY (from_user_id) REFERENCES public.users(id);


--
-- Name: case_workflow_executions fk339y3naqi309s75aayn7sov89; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_executions
    ADD CONSTRAINT fk339y3naqi309s75aayn7sov89 FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: case_assignment_history fk39yrqk8iyer1y1p22omd8ui2h; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignment_history
    ADD CONSTRAINT fk39yrqk8iyer1y1p22omd8ui2h FOREIGN KEY (previous_user_id) REFERENCES public.users(id);


--
-- Name: case_transfer_requests fk3bmufwb08oht5qy3a1avysy0d; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_transfer_requests
    ADD CONSTRAINT fk3bmufwb08oht5qy3a1avysy0d FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: expense_categories fk3jmrwv3u8p2m0xkw73hw852lx; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expense_categories
    ADD CONSTRAINT fk3jmrwv3u8p2m0xkw73hw852lx FOREIGN KEY (parent_id) REFERENCES public.expense_categories(id);


--
-- Name: case_assignment_history fk3tbn2tgdos0u6bg7bt7f5qrmu; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignment_history
    ADD CONSTRAINT fk3tbn2tgdos0u6bg7bt7f5qrmu FOREIGN KEY (case_assignment_id) REFERENCES public.case_assignments(id);


--
-- Name: task_comments fk5b080alknxfurl8rafmejbiwt; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.task_comments
    ADD CONSTRAINT fk5b080alknxfurl8rafmejbiwt FOREIGN KEY (task_id) REFERENCES public.case_tasks(id);


--
-- Name: case_workflow_executions fk5sotoj8fsx5ipgdahxsp1vao3; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_executions
    ADD CONSTRAINT fk5sotoj8fsx5ipgdahxsp1vao3 FOREIGN KEY (template_id) REFERENCES public.case_workflow_templates(id);


--
-- Name: appointment_requests fk5xqwydcrfsil3lsem93bg675w; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.appointment_requests
    ADD CONSTRAINT fk5xqwydcrfsil3lsem93bg675w FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: invoice_line_items fk62yq0tvg2ma4y8plfgx34bd3l; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_line_items
    ADD CONSTRAINT fk62yq0tvg2ma4y8plfgx34bd3l FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);


--
-- Name: case_workflow_step_executions fk67wvpv7q0wp5qj5u7frh9c74o; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_step_executions
    ADD CONSTRAINT fk67wvpv7q0wp5qj5u7frh9c74o FOREIGN KEY (workflow_execution_id) REFERENCES public.case_workflow_executions(id);


--
-- Name: payment_transactions fk6kny33orn368pmaixmsrbhfgb; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.payment_transactions
    ADD CONSTRAINT fk6kny33orn368pmaixmsrbhfgb FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: task_comments fk6n4f8xnvwdkbjci078pqdn1w1; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.task_comments
    ADD CONSTRAINT fk6n4f8xnvwdkbjci078pqdn1w1 FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: case_workflow_templates fk7dukvas1uuxcqtybqijk74cjd; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_templates
    ADD CONSTRAINT fk7dukvas1uuxcqtybqijk74cjd FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: lead_pipeline_history fk803hhnq1w5i5612573dkigp10; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_pipeline_history
    ADD CONSTRAINT fk803hhnq1w5i5612573dkigp10 FOREIGN KEY (lead_id) REFERENCES public.leads(id);


--
-- Name: user_workload fk87yl22vfkp1hns61otdfiu2d8; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.user_workload
    ADD CONSTRAINT fk87yl22vfkp1hns61otdfiu2d8 FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: invoice_templates fk8og1mefmvoxy1gu0u31g1fbdi; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_templates
    ADD CONSTRAINT fk8og1mefmvoxy1gu0u31g1fbdi FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: expenses fk8pw20ywuv1kya62k9oagvmuac; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT fk8pw20ywuv1kya62k9oagvmuac FOREIGN KEY (client_id) REFERENCES public.clients(id);


--
-- Name: case_workflow_executions fk8vajlmucvb4etai2ngg24986h; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_workflow_executions
    ADD CONSTRAINT fk8vajlmucvb4etai2ngg24986h FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: trust_account_transactions fk8ydcsotdr5cxs0nff6mrwx2cu; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_account_transactions
    ADD CONSTRAINT fk8ydcsotdr5cxs0nff6mrwx2cu FOREIGN KEY (legal_case_id) REFERENCES public.legal_cases(id);


--
-- Name: invoices fk9ioqm804urbgy986pdtwqtl0x; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoices
    ADD CONSTRAINT fk9ioqm804urbgy986pdtwqtl0x FOREIGN KEY (client_id) REFERENCES public.clients(id);


--
-- Name: file_access_logs fk9j9w09e22yq8gv3eyump6prom; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_access_logs
    ADD CONSTRAINT fk9j9w09e22yq8gv3eyump6prom FOREIGN KEY (file_id) REFERENCES public.file_items(id);


--
-- Name: file_comments fk9u8ffn56setg2jdv5bs65ql71; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_comments
    ADD CONSTRAINT fk9u8ffn56setg2jdv5bs65ql71 FOREIGN KEY (parent_comment_id) REFERENCES public.file_comments(id);


--
-- Name: file_shares fk9wvovmy30i059arg5mpxp3xg7; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_shares
    ADD CONSTRAINT fk9wvovmy30i059arg5mpxp3xg7 FOREIGN KEY (shared_with_user_id) REFERENCES public.users(id);


--
-- Name: invoice_workflow_executions fk_execution_workflow; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_executions
    ADD CONSTRAINT fk_execution_workflow FOREIGN KEY (workflow_rule_id) REFERENCES public.invoice_workflow_rules(id) ON DELETE CASCADE;


--
-- Name: invoice_time_entries fka5a307ij54dw9o2n47bx6bkbb; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_time_entries
    ADD CONSTRAINT fka5a307ij54dw9o2n47bx6bkbb FOREIGN KEY (time_entry_id) REFERENCES public.time_entries(id);


--
-- Name: expenses fka7rovi1sh8plniuhdfjbadnyd; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT fka7rovi1sh8plniuhdfjbadnyd FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);


--
-- Name: invoice_time_entries fkaibv1pbpv5dhwp7scpaba9tg6; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_time_entries
    ADD CONSTRAINT fkaibv1pbpv5dhwp7scpaba9tg6 FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);


--
-- Name: intake_submissions fkbg31ijjqgr1t6v6jvtj8xp78u; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.intake_submissions
    ADD CONSTRAINT fkbg31ijjqgr1t6v6jvtj8xp78u FOREIGN KEY (reviewed_by) REFERENCES public.users(id);


--
-- Name: trust_account_transactions fkbr72x92aknon0gnr7yr5manll; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_account_transactions
    ADD CONSTRAINT fkbr72x92aknon0gnr7yr5manll FOREIGN KEY (trust_account_id) REFERENCES public.trust_accounts(id);


--
-- Name: lead_pipeline_history fkbx93si50khebysiquko5gv8as; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_pipeline_history
    ADD CONSTRAINT fkbx93si50khebysiquko5gv8as FOREIGN KEY (to_stage_id) REFERENCES public.pipeline_stages(id);


--
-- Name: case_tasks fkchxb1bhfhirtuua87jpontht2; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_tasks
    ADD CONSTRAINT fkchxb1bhfhirtuua87jpontht2 FOREIGN KEY (assigned_by) REFERENCES public.users(id);


--
-- Name: conflict_checks fkcmyhvbwhtdwdxhtsa5jqix7mm; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.conflict_checks
    ADD CONSTRAINT fkcmyhvbwhtdwdxhtsa5jqix7mm FOREIGN KEY (resolved_by) REFERENCES public.users(id);


--
-- Name: trust_account_transactions fkcuj6rdw67aakcxrm586emcy8u; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_account_transactions
    ADD CONSTRAINT fkcuj6rdw67aakcxrm586emcy8u FOREIGN KEY (client_id) REFERENCES public.clients(id);


--
-- Name: payment_transactions fkd92ib2ip4k7hm0wmou7ckivhl; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.payment_transactions
    ADD CONSTRAINT fkd92ib2ip4k7hm0wmou7ckivhl FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);


--
-- Name: collection_documents fkdlab1saqhg399jtguby2fsn0k; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.collection_documents
    ADD CONSTRAINT fkdlab1saqhg399jtguby2fsn0k FOREIGN KEY (collection_id) REFERENCES public.document_collections(id);


--
-- Name: folders fkdrw3lfljsyubvrm3bnxhbf8t8; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.folders
    ADD CONSTRAINT fkdrw3lfljsyubvrm3bnxhbf8t8 FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: legaldocument_tags fkdxce8n92otqrdok5rgfn3ha0f; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.legaldocument_tags
    ADD CONSTRAINT fkdxce8n92otqrdok5rgfn3ha0f FOREIGN KEY (legal_document_id) REFERENCES public.documents(id);


--
-- Name: file_shares fkdy9ucmfqv0spae6toso5r9td1; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_shares
    ADD CONSTRAINT fkdy9ucmfqv0spae6toso5r9td1 FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: ai_workspace_document_versions fke3q6rwiau38bg2xslju21a5d; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_versions
    ADD CONSTRAINT fke3q6rwiau38bg2xslju21a5d FOREIGN KEY (document_id) REFERENCES public.ai_workspace_documents(id);


--
-- Name: ai_conversation_messages fke5x2lexi7rocb17n17iaf8e0l; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_conversation_messages
    ADD CONSTRAINT fke5x2lexi7rocb17n17iaf8e0l FOREIGN KEY (session_id) REFERENCES public.ai_conversation_sessions(id);


--
-- Name: file_permissions fkeomrcq4oaryycvfh59woekka; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_permissions
    ADD CONSTRAINT fkeomrcq4oaryycvfh59woekka FOREIGN KEY (revoked_by) REFERENCES public.users(id);


--
-- Name: case_transfer_requests fkfcyy3491s5uwjwirutmc9iqyl; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_transfer_requests
    ADD CONSTRAINT fkfcyy3491s5uwjwirutmc9iqyl FOREIGN KEY (to_user_id) REFERENCES public.users(id);


--
-- Name: file_permissions fkfk03hec4dvc4mhovyb4iitryb; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_permissions
    ADD CONSTRAINT fkfk03hec4dvc4mhovyb4iitryb FOREIGN KEY (granted_by) REFERENCES public.users(id);


--
-- Name: lead_pipeline_history fkg1d0t2xim653povbpop6t1llf; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_pipeline_history
    ADD CONSTRAINT fkg1d0t2xim653povbpop6t1llf FOREIGN KEY (from_stage_id) REFERENCES public.pipeline_stages(id);


--
-- Name: expenses fkg7aulw52en8nct0mjq8uut03q; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT fkg7aulw52en8nct0mjq8uut03q FOREIGN KEY (category_id) REFERENCES public.expense_categories(id);


--
-- Name: file_items fkg96hxar4w5qh2eik6od1idnr9; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_items
    ADD CONSTRAINT fkg96hxar4w5qh2eik6od1idnr9 FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: file_items fkga8xfy6ei6jyp279sudx6lyjo; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_items
    ADD CONSTRAINT fkga8xfy6ei6jyp279sudx6lyjo FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: intake_submissions fkgh4b2gjbcefy0v2970gaws3tr; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.intake_submissions
    ADD CONSTRAINT fkgh4b2gjbcefy0v2970gaws3tr FOREIGN KEY (form_id) REFERENCES public.intake_forms(id);


--
-- Name: trust_account_transactions fkgp3dl0v6e1jv78k8tjdepohn2; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.trust_account_transactions
    ADD CONSTRAINT fkgp3dl0v6e1jv78k8tjdepohn2 FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: file_shares fkgpeyaykxbaib3x16jjp1yjrt0; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_shares
    ADD CONSTRAINT fkgpeyaykxbaib3x16jjp1yjrt0 FOREIGN KEY (file_id) REFERENCES public.file_items(id);


--
-- Name: file_comments fkgsrc6b5c6gmcyang69u0egtu; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_comments
    ADD CONSTRAINT fkgsrc6b5c6gmcyang69u0egtu FOREIGN KEY (file_id) REFERENCES public.file_items(id);


--
-- Name: case_assignments fkhcl4t6suiqof48nnlmcc61hpt; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignments
    ADD CONSTRAINT fkhcl4t6suiqof48nnlmcc61hpt FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: expenses fkhg0j3kjwgln50hbykd0joq6kb; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT fkhg0j3kjwgln50hbykd0joq6kb FOREIGN KEY (legal_case_id) REFERENCES public.legal_cases(id);


--
-- Name: file_comments fkhifurym5sl581jlvs0c06u7es; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_comments
    ADD CONSTRAINT fkhifurym5sl581jlvs0c06u7es FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: case_tasks fkhjgqr4okgqeo1bow6hv97aaqf; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_tasks
    ADD CONSTRAINT fkhjgqr4okgqeo1bow6hv97aaqf FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: case_tasks fkhuq8gt8o3qc4ni9xhgngkj46m; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_tasks
    ADD CONSTRAINT fkhuq8gt8o3qc4ni9xhgngkj46m FOREIGN KEY (assigned_to) REFERENCES public.users(id);


--
-- Name: leads fki6nsikkvpti3igqromfsd87d6; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.leads
    ADD CONSTRAINT fki6nsikkvpti3igqromfsd87d6 FOREIGN KEY (assigned_to) REFERENCES public.users(id);


--
-- Name: invoice_reminders fkicma46b3cpspi8r3q21586ftw; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_reminders
    ADD CONSTRAINT fkicma46b3cpspi8r3q21586ftw FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);


--
-- Name: folders fkiohfylsa0e068vfrh56nwqv5w; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.folders
    ADD CONSTRAINT fkiohfylsa0e068vfrh56nwqv5w FOREIGN KEY (parent_folder_id) REFERENCES public.folders(id);


--
-- Name: intake_submissions fkipmxm3iohnrs4ijhof0m1uieg; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.intake_submissions
    ADD CONSTRAINT fkipmxm3iohnrs4ijhof0m1uieg FOREIGN KEY (lead_id) REFERENCES public.leads(id);


--
-- Name: case_transfer_requests fkjcynj8jxfnr1s0lo2seajr1ek; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_transfer_requests
    ADD CONSTRAINT fkjcynj8jxfnr1s0lo2seajr1ek FOREIGN KEY (requested_by) REFERENCES public.users(id);


--
-- Name: file_items fkjiuaq8bwj4r51j3hpi3icgjbb; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_items
    ADD CONSTRAINT fkjiuaq8bwj4r51j3hpi3icgjbb FOREIGN KEY (folder_id) REFERENCES public.folders(id);


--
-- Name: invoice_workflow_executions fkjkoh6ubquvnxp0yxjww5ayrxa; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_executions
    ADD CONSTRAINT fkjkoh6ubquvnxp0yxjww5ayrxa FOREIGN KEY (invoice_id) REFERENCES public.invoices(id);


--
-- Name: lead_activities fkk12pv4hejcsxditlj7tc34aav; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_activities
    ADD CONSTRAINT fkk12pv4hejcsxditlj7tc34aav FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: file_versions fkkpci48gnjso92tvmhuaogtmw4; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_versions
    ADD CONSTRAINT fkkpci48gnjso92tvmhuaogtmw4 FOREIGN KEY (uploaded_by) REFERENCES public.users(id);


--
-- Name: invoice_workflow_rules fkl9h0y55dbv8y399i5w2fk3dlq; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_workflow_rules
    ADD CONSTRAINT fkl9h0y55dbv8y399i5w2fk3dlq FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: lead_activities fkle7c8q5nrqmbyt6ewdijgoqqw; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_activities
    ADD CONSTRAINT fkle7c8q5nrqmbyt6ewdijgoqqw FOREIGN KEY (lead_id) REFERENCES public.leads(id);


--
-- Name: lead_pipeline_history fklebndldlbye2tv4wgtlwehbto; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lead_pipeline_history
    ADD CONSTRAINT fklebndldlbye2tv4wgtlwehbto FOREIGN KEY (moved_by) REFERENCES public.users(id);


--
-- Name: file_versions fklklf775cpd7dc54gj9xup638u; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_versions
    ADD CONSTRAINT fklklf775cpd7dc54gj9xup638u FOREIGN KEY (file_id) REFERENCES public.file_items(id);


--
-- Name: organization_invitations fkm1999e85qe51au08xh8y4m8r5; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organization_invitations
    ADD CONSTRAINT fkm1999e85qe51au08xh8y4m8r5 FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: expenses fkm66od3hx1992p3ner7t24etuf; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT fkm66od3hx1992p3ner7t24etuf FOREIGN KEY (receipt_id) REFERENCES public.receipts(id);


--
-- Name: case_assignments fkmws9fft6mb0bu71soymk64vli; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignments
    ADD CONSTRAINT fkmws9fft6mb0bu71soymk64vli FOREIGN KEY (assigned_by) REFERENCES public.users(id);


--
-- Name: case_assignment_history fkn3kb03n62wktp7p0cqfhqiolp; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignment_history
    ADD CONSTRAINT fkn3kb03n62wktp7p0cqfhqiolp FOREIGN KEY (performed_by) REFERENCES public.users(id);


--
-- Name: calendar_events fkn4lm4uwirnxnk2elux6ujqay5; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.calendar_events
    ADD CONSTRAINT fkn4lm4uwirnxnk2elux6ujqay5 FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: case_transfer_requests fkn6fkwdjsbobc8kvujlaorkxs8; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_transfer_requests
    ADD CONSTRAINT fkn6fkwdjsbobc8kvujlaorkxs8 FOREIGN KEY (approved_by) REFERENCES public.users(id);


--
-- Name: ai_workspace_document_citations fkoh71a3m1mk0i9j2m3en8dga8j; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_citations
    ADD CONSTRAINT fkoh71a3m1mk0i9j2m3en8dga8j FOREIGN KEY (version_id) REFERENCES public.ai_workspace_document_versions(id);


--
-- Name: file_tags fkol5v47mvecidftfsbfyhloyqd; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_tags
    ADD CONSTRAINT fkol5v47mvecidftfsbfyhloyqd FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: attorney_expertise fkop6owqyiy9sno3s1i0jngcv9s; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.attorney_expertise
    ADD CONSTRAINT fkop6owqyiy9sno3s1i0jngcv9s FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: case_assignment_history fkot5v8pj9wpmxgrqiovykpsyyu; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignment_history
    ADD CONSTRAINT fkot5v8pj9wpmxgrqiovykpsyyu FOREIGN KEY (new_user_id) REFERENCES public.users(id);


--
-- Name: ai_workspace_document_citations fkotlh0slsuhlahsdrah6v2n8bn; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ai_workspace_document_citations
    ADD CONSTRAINT fkotlh0slsuhlahsdrah6v2n8bn FOREIGN KEY (document_id) REFERENCES public.ai_workspace_documents(id);


--
-- Name: conflict_checks fkouky5ee6ltdoap5iox6yo88b2; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.conflict_checks
    ADD CONSTRAINT fkouky5ee6ltdoap5iox6yo88b2 FOREIGN KEY (checked_by) REFERENCES public.users(id);


--
-- Name: file_permissions fkp5gd98t2dta2wxchmkn9uyne1; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_permissions
    ADD CONSTRAINT fkp5gd98t2dta2wxchmkn9uyne1 FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: file_access_logs fkpgx7tpvkfpvcrxrnfpes1l40f; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_access_logs
    ADD CONSTRAINT fkpgx7tpvkfpvcrxrnfpes1l40f FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: organization_invitations fkpt2hiwb0x73kxxm65yxabtvc; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.organization_invitations
    ADD CONSTRAINT fkpt2hiwb0x73kxxm65yxabtvc FOREIGN KEY (organization_id) REFERENCES public.organizations(id);


--
-- Name: appointment_requests fkpxndpypljmu70u5bfnhhiics6; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.appointment_requests
    ADD CONSTRAINT fkpxndpypljmu70u5bfnhhiics6 FOREIGN KEY (calendar_event_id) REFERENCES public.calendar_events(id);


--
-- Name: case_tasks fkr1w989uhonfend81qapcw5m34; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_tasks
    ADD CONSTRAINT fkr1w989uhonfend81qapcw5m34 FOREIGN KEY (parent_task_id) REFERENCES public.case_tasks(id);


--
-- Name: case_assignments fkra9s2ywt8i75ahnmw5l1fqb0t; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.case_assignments
    ADD CONSTRAINT fkra9s2ywt8i75ahnmw5l1fqb0t FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- Name: expenses fkrix2dl28a9kijxmlfuxpb9icr; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.expenses
    ADD CONSTRAINT fkrix2dl28a9kijxmlfuxpb9icr FOREIGN KEY (vendor_id) REFERENCES public.vendor(id);


--
-- Name: folders fksfiyg2i0jerd42lof313ijlpd; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.folders
    ADD CONSTRAINT fksfiyg2i0jerd42lof313ijlpd FOREIGN KEY (case_id) REFERENCES public.legal_cases(id);


--
-- Name: file_permissions fkt9tyfyu5onr1eyw309tyvorr; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_permissions
    ADD CONSTRAINT fkt9tyfyu5onr1eyw309tyvorr FOREIGN KEY (file_id) REFERENCES public.file_items(id);


--
-- Name: invoice_template_items fktmfvi1ywrk5yjepu3or8uduyd; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.invoice_template_items
    ADD CONSTRAINT fktmfvi1ywrk5yjepu3or8uduyd FOREIGN KEY (template_id) REFERENCES public.invoice_templates(id);


--
-- Name: file_tags fktmii8gbb3d9hrowayc9li4tu7; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.file_tags
    ADD CONSTRAINT fktmii8gbb3d9hrowayc9li4tu7 FOREIGN KEY (file_id) REFERENCES public.file_items(id);


--
-- PostgreSQL database dump complete
--

\unrestrict AjEwtnjkdUEw6vxqdhGxha88R9X0PEcINXVaK2zYB0LThlRbVQTqZabSasadlzz

