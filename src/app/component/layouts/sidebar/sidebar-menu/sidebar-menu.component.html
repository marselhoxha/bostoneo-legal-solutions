<!-- Dashboard -->
<li class="nav-item">
  <a routerLink="/home" routerLinkActive="active" class="nav-link menu-link">
    <i class="ri-dashboard-2-line"></i> <span data-key="t-dashboard">Dashboard</span>
  </a>
</li>

<!-- Legal Module -->
<li class="nav-item" *ngIf="hasPermission('CASE', 'VIEW')">
  <a class="nav-link menu-link" href="#sidebarLegal" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarLegal">
    <i class="ri-scales-3-line"></i> <span data-key="t-legal">Legal</span>
  </a>
  <div class="collapse menu-dropdown" id="sidebarLegal">
    <ul class="nav nav-sm flex-column">
      <li class="nav-item" *ngIf="hasPermission('CASE', 'VIEW')">
        <a routerLink="/legal/cases" routerLinkActive="active" class="nav-link" data-key="t-cases">Cases</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
        <a routerLink="/legal/documents" routerLinkActive="active" class="nav-link" data-key="t-documents">Documents</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('CALENDAR', 'VIEW')">
        <a routerLink="/legal/calendar" routerLinkActive="active" class="nav-link" data-key="t-calendar">Calendar</a>
      </li>
    </ul>
  </div>
</li>

<!-- Time Tracking & Billing -->
<li class="nav-item" *ngIf="hasPermission('TIME_TRACKING', 'VIEW_OWN')">
  <a class="nav-link menu-link" href="#sidebarTimeTracking" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarTimeTracking">
    <i class="ri-time-line"></i> <span data-key="t-time-tracking">Time & Billing</span>
  </a>
  <div class="collapse menu-dropdown" id="sidebarTimeTracking">
    <ul class="nav nav-sm flex-column">
      <li class="nav-item">
        <a routerLink="/time-tracking/dashboard" routerLinkActive="active" class="nav-link" data-key="t-time-dashboard">Dashboard</a>
      </li>
      <li class="nav-item">
        <a routerLink="/time-tracking/timesheet" routerLinkActive="active" class="nav-link" data-key="t-timesheet">Timesheet</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('TIME_TRACKING', 'CREATE')">
        <a routerLink="/time-tracking/entry" routerLinkActive="active" class="nav-link" data-key="t-new-entry">New Entry</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('TIME_TRACKING', 'APPROVE')">
        <a routerLink="/time-tracking/approval" routerLinkActive="active" class="nav-link" data-key="t-approval">Approval</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('BILLING', 'VIEW')">
        <a routerLink="/time-tracking/rates" routerLinkActive="active" class="nav-link" data-key="t-billing-rates">Billing Rates</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('BILLING', 'CREATE')">
        <a routerLink="/time-tracking/billing/invoice-generation" routerLinkActive="active" class="nav-link" data-key="t-invoice-gen">Invoice Generation</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'ADMIN')">
        <a routerLink="/time-tracking/billing/analytics" routerLinkActive="active" class="nav-link" data-key="t-billing-analytics">Analytics</a>
      </li>
    </ul>
  </div>
</li>

<!-- File Manager -->
<li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
  <a class="nav-link menu-link" href="#sidebarFileManager" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarFileManager">
    <i class="ri-folder-2-line"></i> <span data-key="t-file-manager">File Manager</span>
  </a>
  <div class="collapse menu-dropdown" id="sidebarFileManager">
    <ul class="nav nav-sm flex-column">
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
        <a routerLink="/file-manager" routerLinkActive="active" class="nav-link" data-key="t-my-documents">My Documents</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
        <a routerLink="/file-manager/templates" routerLinkActive="active" class="nav-link" data-key="t-templates">Templates</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('SYSTEM', 'VIEW')">
        <a routerLink="/file-manager/firm-templates" routerLinkActive="active" class="nav-link" data-key="t-firm-templates">Firm Templates</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('SYSTEM', 'VIEW')">
        <a routerLink="/file-manager/permissions" routerLinkActive="active" class="nav-link" data-key="t-permissions">Permissions</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
        <a routerLink="/file-manager/deleted" routerLinkActive="active" class="nav-link" data-key="t-deleted-files">
          <i class="ri-delete-bin-line"></i> Deleted Files
        </a>
      </li>
    </ul>
  </div>
</li>

<!-- Clients/Clients -->
<li class="nav-item" *ngIf="hasPermission('USER', 'VIEW')">
  <a routerLink="/clients" routerLinkActive="active" class="nav-link menu-link">
    <i class="ri-user-3-line"></i> <span data-key="t-clients">Clients</span>
  </a>
</li>

<!-- Financials -->
<li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
  <a class="nav-link menu-link" href="#sidebarFinancial" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarFinancial">
    <i class="ri-money-dollar-circle-line"></i> <span data-key="t-financial">Financial</span>
  </a>
  <div class="collapse menu-dropdown" id="sidebarFinancial">
    <ul class="nav nav-sm flex-column">
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
        <a routerLink="/invoices" routerLinkActive="active" class="nav-link" data-key="t-invoices">Invoices</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'VIEW')">
        <a routerLink="/expenses" routerLinkActive="active" class="nav-link" data-key="t-expenses">Expenses</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('DOCUMENT', 'ADMIN')">
        <a routerLink="/analytics" routerLinkActive="active" class="nav-link" data-key="t-analytics">Analytics</a>
      </li>
    </ul>
  </div>
</li>

<!-- Admin Section -->
<li class="nav-item" *ngIf="hasPermission('ADMINISTRATIVE', 'VIEW')">
  <a class="nav-link menu-link" href="#sidebarAdmin" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarAdmin">
    <i class="ri-admin-line"></i> <span data-key="t-admin">Administration</span>
  </a>
  <div class="collapse menu-dropdown" id="sidebarAdmin">
    <ul class="nav nav-sm flex-column">
      <li class="nav-item" *ngIf="hasPermission('USER', 'VIEW')">
        <a routerLink="/users" routerLinkActive="active" class="nav-link" data-key="t-team-directory">Team Directory</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('ADMINISTRATIVE', 'VIEW')">
        <a routerLink="/admin/roles" routerLinkActive="active" class="nav-link" data-key="t-roles">Role Management</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('ADMINISTRATIVE', 'EDIT')">
        <a routerLink="/admin/user-roles" routerLinkActive="active" class="nav-link" data-key="t-user-roles">User Role Assignment</a>
      </li>
      <li class="nav-item" *ngIf="hasPermission('SYSTEM', 'VIEW')">
        <a routerLink="/admin/audit-logs" routerLinkActive="active" class="nav-link" data-key="t-audit-logs">Audit Logs</a>
      </li>
    </ul>
  </div>
</li>

<!-- FAQ -->
<li class="nav-item">
  <a routerLink="/faq" routerLinkActive="active" class="nav-link menu-link">
    <i class="ri-question-line"></i> <span data-key="t-faq">FAQ</span>
  </a>
</li>

<!-- User Profile -->
<li class="nav-item">
  <a routerLink="/user" routerLinkActive="active" class="nav-link menu-link">
    <i class="ri-user-settings-line"></i> <span data-key="t-profile">My Profile</span>
  </a>
</li>

<!-- Developer Tools (only for admins) -->
<li class="nav-item" *ngIf="hasRole('ROLE_ADMIN')">
  <a class="nav-link menu-link" href="#sidebarDev" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarDev">
    <i class="ri-tools-line"></i> <span data-key="t-dev-tools">Developer Tools</span>
  </a>
  <div class="collapse menu-dropdown" id="sidebarDev">
    <ul class="nav nav-sm flex-column">
      <li class="nav-item">
        <a href="javascript:void(0)" (click)="toggleDebugger()" class="nav-link" data-key="t-permission-debugger">
          <i class="ri-bug-line"></i> Permission Debugger
        </a>
      </li>
    </ul>
  </div>
</li>

<!-- Permission Debugger (hidden by default) -->
<app-permission-debugger *ngIf="showDebugger"></app-permission-debugger> 